var _min=("undefined"!=typeof __min?__min:null)||_min||{};_min=function(e){"use strict";function t(e,t,n){function i(e,t){var n=null;switch(t=r(e,t),e){case a.Emitter.NEW_VIDEO_EVENT:n=h();break;case a.Emitter.NEW_SCRAPE_EVENT:n=g();break;case a.Emitter.CLICK:case a.Emitter.VIEWPORT:n=d();break;case a.Emitter.URL_REPORT:case a.Emitter.DAILY_USER:n=p();break;case a.Emitter.ANALYTICS_EVENT:case a.Emitter.STATS_EVENT:n=l();break;case a.Emitter.VIDEO_VIEWS:n=c();break;case a.Emitter.CUSTOM_EVENTS:n=u()}n.push(e,t)}function r(t,n){switch(t){case a.Emitter.VIDEO_VIEWS:n.hadImpressionSession=e.parseBool(n.hadImpressionSession),n.hadImpressionSession?De.setHadImpressionSession():n.hadImpressionSession=De.hadImpressionSession()}return n}function o(){s.forEach(function(e){e.flush()})}var s=[],l=function(){var i=new y(e,t,n.ServerAnalytics,(!0));return i.enableStorage("_minEE0"),i.init(),s.push(i),function(){return i}}(),c=function(){var i=new y(e,t,n.UrlReporter,(!0));return i.init(),s.push(i),function(){return i}}(),u=function(){var i=new y(e,t,n.UrlReporter,(!0));return i.init(),s.push(i),function(){return i}}(),d=function(){var i=new y(e,t,n.UrlReporter,(!0));return i.enableStorage("_minEE1"),i.init(),s.push(i),function(){return i}}(),p=function(){var i=new y(e,t,n.UrlReporter,(!0));return i.init(),s.push(i),function(){return i}}(),h=function(){var i=new y(e,t,n.VideoData,(!1),a.ReportMethods.GET);return i.init(),s.push(i),function(){return i.setValidator(e.validateScraperURL),i}}(),g=function(){var i=new y(e,t,n.UrlReporter,(!1));return i.init(),s.push(i),function(){return i.setValidator(e.validateScraperURL),i}}();return{getAnalytics:l,getVideoViewsReporter:c,getCounterServerReporter:d,getPlayerContent:h,getPlayerContentDelayed:g,send:i,flushAll:o}}function n(e,t,n){var i=n;if(""!==i){e[E.QUERY_PARAMS_SOURCE]+=i+" ",0===i.indexOf(t)&&(i=i.slice(1));for(var r,o,a=i.split("&"),s=/^qadt([\d\w]+)$/,l=0;l<a.length;l++)r=a[l].split("="),o=r[0],s.test(o)&&(o=o.replace(s,"$1"),e[o]=r[1])}}function i(e,t,n,i){function r(t){t||(t=!1);var n=c(),i=e.getlistAsArray(n[A]);i=o(i),i.length>0&&p([i],t),n[A]=[],u(n)}function o(e){if(e.length<=1)return e;var t=[];e.forEach(function(e,n,i){t.push(JSON.stringify(e))});var n=t.filter(function(e,n){return t.indexOf(e)===n});return t=[],n.forEach(function(e,n,i){t.push(JSON.parse(e))}),t}function l(t,n){var i,r=c();r[n]=e.getlistAsArray(r[n]),i=r[n],i.push(t),u(r)}function c(){var e=t.getItem(S);if(e){if(e=JSON.parse(e),e.clicks)for(var n=0;n<e.clicks.length;n++)e.clicks[n]=i.extract(e.clicks[n]);if(e.clicksDelay)for(var n=0;n<e.clicksDelay.length;n++)e.clicksDelay[n]=i.extract(e.clicksDelay[n])}else e={};return e}function u(e){if(e.clicks)for(var n=0;n<e.clicks.length;n++)e.clicks[n]=i.compress(e.clicks[n]);if(e.clicksDelay)for(var n=0;n<e.clicksDelay.length;n++)e.clicksDelay[n]=i.compress(e.clicksDelay[n]);t.setItem(S,JSON.stringify(e))}function d(e,t){var n,i,r=typeof e;if("string"===r||"number"===r){if(n=c(),n[t]=n[t]||[],i=n[t],0===i.length)return null;for(var o=0;o<i.length;o++)if(i[o].id===e)return i[o];return null}}function p(t,i,r){if(!e.isArray(t))return void e.log("Report not an array");for(var o,s="Test:"+pe.getGroupCode(),l=0;l<t.length;l++){o=e.isArray(t[l])?t[l]:[t[l]];for(var c=0;c<o.length;c++){var u=JSON.parse(JSON.stringify(o[c]));if(n.send(a.Emitter.ANALYTICS_EVENT,u),n.send(a.Emitter.CLICK,u),r){var d={url:u.url,user_agent:navigator.userAgent,source:ae.getAnalyticsSource(),publisher:he.getPublisherIdNumber(),category:"rightClick",action:"sendLogDelayById",label:"highlight_id",value:u.highlight_id};n.send(a.Emitter.CUSTOM_EVENTS,d)}u=e.cloneObject(u),s+=","+u.id+":PClick:"+(u.product||"0");var p=ce.get(u.id,a.Emitter.CLICK_TYPE_CLICK,a.Emitter.CLICK_TYPE_CLICK,u.test_mode,u.product);p.isSent()||(u.uniq=!0,n.send(a.Emitter.ANALYTICS_EVENT,u),n.send(a.Emitter.CLICK,u),p.setAnalyticState(),s+=","+u.id+":UClick:"+(u.product||"0")),h.dispatchEvent(a.Events.DomWindow.CLICK)}}(he.getCanReportImmediately()||i)&&(n.getAnalytics().flush(),n.getCounterServerReporter().flush())}function g(){r(),h.addEventListener(a.Events.PLAYER_VIDEO_CHANGED,r,this),h.addEventListener(a.Events.PLAYER_PLAYING,f,this)}function f(){setTimeout(r,0,!0)}function v(e){l(e,A),e.product==a.Emitter.PRODUCT_IN_ARTICLE?r():b.start()}function m(e){l(e,I)}function E(e,t){var n,i,r=typeof e;if(("string"===r||"number"===r)&&(n=c(),n[t]=n[t]||[],i=n[t],0!==i.length)){for(var o=0;o<i.length;o++)if(i[o].id===e){i.splice(o,1);break}u(n)}}function y(e){E(e,I)}function _(e){var t=d(e,I);t&&(t.type=a.Emitter.ANALYTICS_CLICK_EVENT,p([t],null,!0),y(e))}var S="minAnalytics",A="clicks",I="clicksDelay",b=new s.utils.Debounce(a.FLUSH_ANALYTICS,r);return{init:g,log:v,logDelay:m,removeLogDelayById:y,sendLogDelayById:_}}function r(e){function t(e,t){c.addEventListener(e,t)}function n(e){c.removeEventListener(e)}function i(){l.windowDispatchEvent(a.Events.MINUTE_READY),u&&(he.getReportCompatibilityOnly()?ae.isBrowserSupported()&&(l.log("MinuteEventListener >> consts.Events.DAILY_USER"),c.dispatchEvent("apvUser",r())):(l.log("MinuteEventListener >> consts.Events.DAILY_USER"),c.dispatchEvent("apvUser",r())))}function r(){return{isMinuteActive:!e.isTestGroup()}}function s(){he.isMinuteEventListenerActive()&&(h.addEventListener(a.Events.PLAYER_PLAYING,function(t){if(t&&t.data){if(e.isTestGroup()){if(t.data.counter>=he.getVVCounterTestLimit())return}else if(t.data.counter>=he.getVVCounterLimit())return;l.log("MinuteEventListener >> consts.Events.PLAYER_PLAYING"),c.dispatchEvent("minuteVideoView",r())}}),h.addEventListener(a.Events.DAILY_USER,function(e){u=!0}))}var c=new o,u=!1;return{addEventListener:t,removeEventListener:n,dispatchReadyEvent:i,init:s}}if(_min.debug)window._minAlreadyLoaded=!1;else{if(window._minAlreadyLoaded)return void console.warn("Minute.ly already loaded");window._minAlreadyLoaded=!0}var o=function(){function e(e){return Array.prototype.slice.call(e)}var t=function(){this.listeners=Object.create(null)};return t.prototype.addEventListener=function(t,n,i){var r=e(arguments);r=r.length>3?r.slice(3):[],this.listeners[t]=this.listeners[t]||[],this.listeners[t].push({context:i,callback:n,isOnce:!1,args:r})},t.prototype.addEventListenerOnce=function(t,n,i){var r=e(arguments);r=r.length>3?r.slice(3):[],this.listeners[t]=this.listeners[t]||[],this.listeners[t].push({context:i,callback:n,isOnce:!0,args:r})},t.prototype.removeEventListener=function(e,t,n){if(this.listeners[e]){for(var i=this.listeners[e].length,r=[],o=0;o<i;o++){var a=this.listeners[e][o];a.context===n&&a.callback===t||r.push(a)}this.listeners[e]=r}},t.prototype.removeAllEventListener=function(){this.listeners={}},t.prototype.dispatchEvent=function(t,n){var i,r,o=0,a={type:t,data:n},s=e(arguments).slice(2);s=[a].concat(s);var l=this.listeners[t];if(l){var c=l.length;for(i=0;i<c;i++)if(r=l[i],r&&r.callback){var u=s.concat(r.args);r.callback.apply(r.context,u),o+=1}for(i=c-1;i>=0;i--)r=l[i],r&&r.isOnce&&l.splice(i,1)}},t}(),a={};a.Urls=function(){var e="https:"==window.location.protocol?1:0;return{ServerData:["http://data.minute.ly/","https://z2d7c5q4.map2.ssl.hwcdn.net/"][e],ServerAnalytics:["http://data.minute.ly/","https://z2d7c5q4.map2.ssl.hwcdn.net/"][e],UrlReporter:["http://counter.snackly.co/","https://counter.snackly.co/"][e],VideoData:["http://vdata.minute.ly/","https://b3g8i8r3.map2.ssl.hwcdn.net/"][e],Configuration:["http://apv.configuration.minute.ly/","https://r7c2k6b3.map2.ssl.hwcdn.net/"][e],Logger:["http://logger.snackly.co/","https://logger.snackly.co/"][e],Error:["http://errors.snackly.co/","https://errors.snackly.co/"][e]}}(),a.styles={},a.styles.OBJECT_FIT="object-fit",a.values={},a.values.RELATIVE="relative",a.values.ABSOLUTE="absolute",a.values.HIDDEN="hidden",a.values.COVER="cover",a.values.NONE="none",a.values.BLOCK="block",a.values.HUNDRED_PERCENT="100%",a.APV={Origin:{source:"[o]",target:"o",size:450}},a.APVStates={Disposed:"disposed",New:"new",Blocked:"blocked",Disabled:"disabled",Active:"active"},a.config={},a.config.WindowIntervals={SCROLL:"scroll",RESIZE:"resize",URL:"url",ECHO_TIME:"echoTime",ECHO_REPEAT:"echoRepeat"},a.FLUSH_ANALYTICS=5e3,a.WindowKeys={COMPATIBILITY:"compatibility"},a.Events={WINDOW_DISPOSE:"windowDispose",TEST_MODE_READY:"testModeReady",WINDOW_SERVICE_READY:"windowServiceReady",POST_MESSAGE_RESPONSE:"postMessageResponse",VIDEOS_UPDATE:"videosUpdate",APV_DISPOSED:"apvDisposed",PLAYER_VIDEO_VIEW_CLICK:"playerVideoViewClick",APV_LOGO_CLICK:"apvLogoClick",PLAYER_FOUND:"playerFound",PLAYER_PLACEHOLDER_FOUND:"playerPlaceholderFound",PLAYER_PLAYING:"playerPlaying",PLAYER_VIDEO_CHANGED:"playerVideoChanged",IMPRESSION:"impressionAnalytics",CLIENT_INIT_ANALYTICS:"clientInitAnalyticsEvent",DAILY_USER:"dailyUserCreated",FIRST_VIDEO_VIEW:"firstVideoView",SYSTEM_RUNNING:"systemRunning",NEW_VIDEO_DATE:"newVideoData",LOAD_MORE_FOUND:"loadmorefound",AUXCLICK_EVENT:"auxclick",MESSAGE_EVENT:"message",FORCE_FIND_ELMS:"forceFindElements",INARTICLE_CLICK:"inArticleClick",MOUSE_UP:"mouseup",REGULAR_CLICK:"regularClick"},a.Events.Element={VISIBLE:"elmVisible",NON_VISIBLE:"elmNonVisible",ANALYTICS_VISIBLE:"elmVisibleAnalytics",CLICK:"elmClick",CONTEXT_MENU_OPEN:"elmContextMenuOpen",CONTEXT_MENU_CLOSE:"elmContextMenuClose",MUTANT:"elmMutant",MOUSE_ENTER:"mouseenter",MOUSE_OUT:"mouseout",READY:"ready",UPDATE_CAROUSEL_ELEMENT:"updateCarouselContainer"},a.Events.Players={PLAYING:"playing",PAUSED:"paused",LOADED:"loaded",ENDED:"ended",ERROR:"error",AD_EVENT:"adEvent"},a.Events.DomWindow={SCROLL:"scroll",FOCUS:"focus",SAFARI_FOCUS:"safariFocus",BLUR:"blur",RESIZE:"resize",CLICK:"click",VISIBILITY_CHANGE:"visibilitychange",ORIENTATION_CHANGE:"orientationchange"},a.UrlStructure={Origin:"origin",PathName:"pathname",Search:"search",Hash:"hash"},a.Emitter={ANALYTICS_EVENT:0,STATS_EVENT:1,NEW_VIDEO_EVENT:2,VIDEO_VIEWS:42,CLICK:94,DAILY_USER:93,VIEWPORT:95,NEW_SCRAPE_EVENT:97,URL_REPORT:98,CUSTOM_EVENTS:"custom_analytic",CONTEXT_MENU_OPEN_EVENT:4,ANALYTICS_CLICK_EVENT:0,ANALYTICS_IMPRESSION_EVENT:1,ANALYTICS_BLOCKING_DISTANCE_POTENTIAL:2,ANALYTICS_SOURCE_WEB_VIEW_ANDROID:10,ANALYTICS_SOURCE_WEB_VIEW_IOS:11,ANALYTICS_SOURCE_WEB_MOBILE:2,ANALYTICS_SOURCE_WEB_DESKTOP:1,PRODUCT_APV:0,PRODUCT_IN_ARTICLE:1,CLICK_TYPE_NONE:"n",CLICK_TYPE_CLICK:"c"},a.Placements={VIEWPORT_IMPRESSION:1,HOVER_IMPRESSION:2},a.ReportMethods={GIF:"gif",GET:"get",POST:"post"},a.OriginalSrc={PATH:"path",ATTR:"attr"},a.iframeScope={INNER:"inner",OUTER:"outer"},a.integrationDataSet={ENABLE:"data-min-enable",ANCHOR:"data-min-anchor",PREVIEW:"data-min-preview",SIZE:"data-min-size",VIEWPORT_MASK:"data-min-mask",VIEWPORT_OBSERVER:"data-min-observer"},a.IFramePostMessageTypes={RequestPercentsVisible:"RequestPercentsVisible",PercentsVisible:"PercentsVisible"},e.debug?a.Events.MINUTE_READY="minuteReady_debug":a.Events.MINUTE_READY="minuteReady",a.logoPositions={"top-left":{left:0,top:0,marginRight:"2%",marginLeft:"2%",marginTop:"2%",marginBottom:"2%"},"top-right":{right:0,top:0,marginRight:"2%",marginLeft:"2%",marginTop:"2%",marginBottom:"2%"},"bottom-left":{left:0,bottom:0,marginRight:"2%",marginLeft:"2%",marginTop:"2%",marginBottom:"2%"},"bottom-right":{right:0,bottom:0,marginRight:"2%",marginLeft:"2%",marginTop:"2%",marginBottom:"2%"}},a.StorageKeys={DAILY_DATA_OBJ:"minDaily",SESSION_DATA_OBJ:"minSession",BUFFER_DATA_OBJ:"minBuffer",VERSION_DATA_OBJ:"minVersion",UNIQUE_DATA_OBJ:"minUniq"},a.StorageSubKeys={dailyUser:"dailyUser",testMode:"testMode",_minEE0:"_minEE0",_minEE1:"_minEE1",sessionUniqs:"sessionUniqs",minSessionSent:"minSessionSent",minSID:"minSID",minAnalytics:"minAnalytics",minFlavor:"minFlavor",experiment:"experiment",minUID:"minUID",minFromCamp:"minFromCamp",viewedHlts:"viewedHlts",hadImp:"hadImp"},a.SESSION_TTL=18e5,a.cookiesKeysTable=function(){var e={};return e[a.StorageKeys.DAILY_DATA_OBJ]={expiration:"daily",keys:[a.StorageSubKeys.dailyUser,a.StorageSubKeys.testMode]},e[a.StorageKeys.SESSION_DATA_OBJ]={expiration:"session",keys:[a.StorageSubKeys.sessionUniqs,a.StorageSubKeys.minSessionSent,a.StorageSubKeys.minSID,a.StorageSubKeys.hadImp]},e[a.StorageKeys.BUFFER_DATA_OBJ]={expiration:null,keys:[a.StorageSubKeys._minEE0,a.StorageSubKeys._minEE1,a.StorageSubKeys.minAnalytics]},e[a.StorageKeys.VERSION_DATA_OBJ]={expiration:null,keys:[a.StorageSubKeys.experiment,a.StorageSubKeys.minFlavor]},e[a.StorageKeys.UNIQUE_DATA_OBJ]={expiration:null,keys:[a.StorageSubKeys.minUID,a.StorageSubKeys.minFromCamp,a.StorageSubKeys.viewedHlts]},e}(),e=e,e.ver="1.10.10.4",e._publisher=e._publisher||"",e._publisherDebugUrl=e._publisherDebugUrl||"";var s={};s.publisher={},s.publisher.utils=s.publisher.utils||{};var l={};l.getDateNow=function(){return new Date},l.getTimeNow=function(){return l.getDateNow().getTime()};var c={},u="production",d=l.getTimeNow(),p=window.performance?window.performance.timing.navigationStart:d,h=new o,g=(function(){var e=!1;return h.addEventListenerOnce(a.Events.SYSTEM_RUNNING,function(){e=!0}),function(){return e}}(),!1),f="/";g||(f=location.hostname),function(){try{return Array.prototype.slice.call([1]),void(l.cloneArray=function(e){return Array.prototype.slice.call(e)})}catch(e){}var t=[];l.cloneArray=function(e){return t.slice.call(e)}}(),l.cloneObject=function(e){var t={};for(var n in e)if(l.isArray(e[n]))t[n]=l.cloneArray(e[n]);else if(null!==e[n])switch(typeof e[n]){case"boolean":case"number":case"string":case"undefined":t[n]=e[n];break;case"object":t[n]=l.cloneObject(e[n])}else t[n]=null;return t},l.extentObject=function(e,t){for(var n in e)if(null!==e[n]&&void 0!==e[n]||null===t[n])if(l.isArray(e[n]))t[n]=l.cloneArray(e[n]);else if(void 0!==t[n])switch(typeof e[n]){case"boolean":case"number":case"string":t[n]=e[n];break;case"object":t[n]=l.extentObject(e[n],t[n])}else t[n]=e[n];return t},l.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},s.utils=s.utils||{},s.utils.Signal=function(){function e(e,t,n,i,r){this._listener=t,this._isOnce=n,this.context=i,this._signal=e,this._priority=r||0}function t(e,t){if("function"!=typeof e)return void l.logError("listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))}function n(){this._bindings=[],this._prevParams=null;var e=this;this.dispatch=function(){n.prototype.dispatch.apply(e,arguments)}}return e.prototype={active:!0,params:null,execute:function(e){var t,n;return this.active&&this._listener&&(n=this.params?this.params.concat(e):e,t=this._listener.apply(this.context,n),this._isOnce&&this.detach()),t},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},n.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(t,n,i,r){var o,a=this._indexOfListener(t,i);if(a!==-1){if(o=this._bindings[a],o.isOnce()!==n)return void l.logError("You cannot add"+(n?"":"Once")+"() then add"+(n?"Once":"")+"() the same listener without removing the relationship first.")}else o=new e(this,t,n,i,r),this._addBinding(o);return this.memorize&&this._prevParams&&o.execute(this._prevParams),o},_addBinding:function(e){var t=this._bindings.length;do--t;while(this._bindings[t]&&e._priority<=this._bindings[t]._priority);this._bindings.splice(t+1,0,e)},_indexOfListener:function(e,t){for(var n,i=this._bindings.length;i--;)if(n=this._bindings[i],n._listener===e&&n.context===t)return i;return-1},has:function(e,t){return this._indexOfListener(e,t)!==-1},add:function(e,n,i){return t(e,"add"),this._registerListener(e,!1,n,i)},addOnce:function(e,n,i){return t(e,"addOnce"),this._registerListener(e,!0,n,i)},remove:function(e,n){t(e,"remove");var i=this._indexOfListener(e,n);return i!==-1&&(this._bindings[i]._destroy(),this._bindings.splice(i,1)),e},removeAll:function(){for(var e=this._bindings.length;e--;)this._bindings[e]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(e){if(this.active){var t,n=Array.prototype.slice.call(arguments),i=this._bindings.length;if(this.memorize&&(this._prevParams=n),i){t=this._bindings.slice(),this._shouldPropagate=!0;do i--;while(t[i]&&this._shouldPropagate&&t[i].execute(n)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}},n}();var v=function(){function e(){return 0===o&&(o=r(d-p)),o}function t(){return 0===a&&(a=r(l.getTimeNow()-p)),a}function n(){return r(l.getTimeNow()-p)}function i(){return r(l.getTimeNow()-d)}function r(e){return 100*Math.floor(e/100)}var o=0,a=0;return{getScriptTime:e,getConfigTime:t,getTimeFromGenesis:n,getTimeFromMinuteGenesis:i}}(),m={HIGHLIGHT_APVS:"highlightAPV",ENABLE_DEBUG:"enableDebug",FORCE_TEST:"forceTest",FORCE_YOUTUBE_API:"forceYtApi",DISABLE_PROD:"disableProd",BYPASS_WINDOW_LOAD:"bypassWindowLoad",ACTIVE_ALL:"activeAll",PREVENT_PAGE_LOAD:"preventPageLoad",IGNORE_REFERRERS:"ignoreReferrers",ENABLE_BLOCKING_DISTANCE:"enableBD",ENABLE_BLOCKING_DISTANCE_DEBUG:"enableBDDebug",MINUTE_UI_TEST:"uiTest",DEBUG_VISIBILITY:"debugVisibility",FORCE_ENABLE:"forceEnable",FORCE_CONTENT_CHANGED:"forceContentChanged"},E={QUERY_PARAMS_SOURCE:"queryParams",SCRIPT_HOSTNAME:"scriptHostname",IS_PROCUTION:"isProduction"};e.debugParams={},s.utils=s.utils||{},s.utils.Debounce=function(e,t,n){function i(e){y=e||g,h("enableFilter(time="+y+")")}function r(e,t){h("setEcho(time="+e+", repeat="+t+")"),S=e||g,A=t||A}function o(){h("start");var e=arguments.length>0?l.cloneArray(arguments):m;w(e),C(e)}function a(){h("stop"),u(),_=0}function s(){h("kill"),u(),f=null,v=null,m=null,P=!0}function c(){return E>0}function u(){h("_clear"),c()&&(clearTimeout(E),E=0)}function d(e){b=e}function p(){D=!0,h("debug")}function h(e){D&&l.log("Deboucer >> "+b+" >> "+e)}var g=e,f=t,v=n||null,m=l.cloneArray(arguments).slice(3),E=0,y=0,_=0,S=0,A=1,I=0,b="",D=!1,P=!1,w=function(e){if(h("_checkTimeFilter"),!(y<=0)){var t=l.getTimeNow();0===_&&(_=t);var n=t>_+y;if(n){if(h("****** callback by _checkTimeFilter!"),P)return;if(!f)return void l.log("Debounce is dead, and timer is running... exiting");f.apply(v,e),_=t}}},C=function(e){h("_startEcho");var t=l.cloneArray(e);u(),I=0,E=setTimeout(function n(){if(I+1===A&&(t=t.concat(!0)),h("****** callback by echo!"),!P){if(!f)return void l.log("Debounce is dead, and timer is running... exiting");f.apply(v,t),I++,I<A&&setTimeout(n,g),a()}},g)};return{enableFilter:i,setEcho:r,start:o,stop:a,kill:s,isRunning:c,setName:d,debug:p}},s.utils=s.utils||{},s.utils.Timer=function(e,t,n){function i(){if(0===S){var e=arguments.length>0?l.cloneArray(arguments):_;P(e)}}function r(e){I=e||0}function a(){return b}function c(){b=0}function u(){D=null,v()}function d(){v(),E=null,y=null,_=null,D=null,A.removeAllEventListener()}function p(){return 0!==S}function h(){A.addEventListener.apply(A,l.cloneArray(arguments))}function g(){A.removeEventListener.apply(A,l.cloneArray(arguments))}function f(e){E&&E.apply(y,e),0===I||b<I?(b++,A.dispatchEvent(s.utils.Timer.Tick)):v()}function v(){S>0&&(clearInterval(S),S=0)}var m=e,E=t,y=n||null,_=l.cloneArray(arguments).slice(3),S=0,A=new o,I=0,b=0,D=null,P=function(e){D=e,v(),S=setInterval(function(){f(D)},m)};return{start:i,stop:u,kill:d,reset:c,isRunning:p,setCounterLimit:r,getCounter:a,addEventListener:h,removeEventListener:g}},s.utils.Timer.Tick="timerTick",s.utils.Timer.start=function(e){var t=new s.utils.Timer(e);return t.start(),t},function(){function e(e,t){function n(e){e=e||{},f=!!e.isTrackAlsoDisplay,v=e.parentElement||null}function i(){h.start()}function r(){h.stop()}function o(){c=null,h.kill(),h=null,d.removeAll(),d=null,p.removeAll(),p=null}function a(){return f?!!c.offsetParent:(v||document.body).contains(c)}function l(){var e=a();g!==e&&(g=e,g?(u.added&&u.added(),d.dispatch()):(u.removed&&u.removed(),p.dispatch()))}var c=e,u=t||{},d=new s.utils.Signal,p=new s.utils.Signal,h=new s.utils.Timer(100,l),g=a(),f=!1,v=null;return{start:i,stop:r,dispose:o,onAddToDom:d,onRemovedFromDom:p,setTrackingOptions:n}}s.utils.DomElementTracker=e}();var y=function(t,n,i,r,o){function s(e){P=e,w=!!n}function l(e){r&&(e.session=se.getId(),e.user=se.getUserId()),e.url=e.url||t.urls.getCurrentCanonicalURL(),e.stor=!!n}function c(n,i){if(b){if(t.isArray(i))for(var r=0;r<i.length;r++)l(i[r]);else l(i);var o={ver:e.ver,flavor:e.flavor.name,type:n,payload:i};I&&(o.timestamp=t.getTimeNow()),w&&h(o),y.push(o),y.length>=_&&d()}}function u(){b=!1}function d(){if(document&&document.body){if(w&&(y=g(),v([])),0===y.length||D&&!D())return void(y=[]);var e,n=y.slice();y=[];var i=!0;if("string"==typeof n&&""!==n?e=0===n.indexOf('"[{\\"')?JSON.parse(n):n:t.isArray(n)&&n.length>0?e=JSON.stringify(n):t.isArray(n)&&0===n.length?i=!1:(t.sendErrorReport("EmitterEventsCorrupt"),i=!1),!me.isDebug()&&i&&!me.isActiveAll()){var r="data="+encodeURIComponent(t.b64EncodeUnicode(e));t.sendReportByUrl(S,r,A)}t.log("Emitter Send: "+JSON.stringify(n)),t.log(n)}}function p(e){D=e}function h(e){var t=g();t.push(e),v(t)}function g(){var e=f(P);return e&&0!==JSON.parse(e).length||!C||t.logWarning("Another tab or IFrame, sent your emitters"),e=e?JSON.parse(e):[],C=!1,e}function f(e){if(!n)return null;try{return n.getItem(e)}catch(t){}return null}function v(e){e.length&&(C=!0),n&&n.setItem(P,JSON.stringify(e))}function m(){setInterval(d.bind(this),E)}var E=3e3,y=[],_=2,S=i||a.Urls.ServerData,A=o,I=t.parseBool(r,!0),b=!0,D=null,P=null,w=!1,C=!1;return{enableStorage:s,push:c,disable:u,flush:d,setValidator:p,init:m}};!function(){s.reports={},s.reports.Levels={Debug:"debug",Info:"info",Warning:"warning",Error:"error"},l.sendReportByUrl=function(e,t,n){S.send(e,t,n)},l.sendLoggerReport=function(t){var n={ver:e.ver,env:u,publisher_id:e._publisher,source:ae.getAnalyticsSource(),user_id:se.getUserId(),session_id:se.getId(),url:l.urls.getLocationUrl(),level:t.level||s.reports.Levels.Info,category:t.category||"general",message:"string"==typeof t?t:t.message};t.stack&&(n.stack=t.stack);var i=JSON.stringify(n);S.sendLog(i),l.log("Send report: "+i)},l.sendUserAgentLoggerReport=function(e){S.sendLog(e)},l.sendErrorReport=function(e){if(he.getIsEnableErrorReport()){var t={};"string"==typeof e?t.message=e||"empty":t.message=e.message||"empty",e.stack&&(t.stack=e.stack),t.level=s.reports.Levels.Error,l.sendLoggerReport(t)}}}();var _=function(){function e(e,i){var r=n(e.split("."),4),o=n(i.split("."),4);return t(r,o)}function t(e,t){if(e.length!==t.length)return null;for(var n=0;n<t.length;n++){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return 0}function n(e,t){for(var n=t?t:3,i=e.map(function(e){return parseInt(e,10)}),r=n-i.length,o=r;o>0;o--)i.push(0);return i}return{compare:t,convertVersionToNumbers:n,compareStr:e}};!function(){l.urls={},l.urls.removeTrailingSlash=function(e){return e&&e.length>0&&"/"==e.charAt(e.length-1)?e.substring(0,e.length-1):e},l.urls.getStructuredRawByUrl=function(){var e=document.createElement("a");return function(t,n){e.href=t;var i="",r=n||s.publisher&&s.publisher.utils&&s.publisher.utils.URL_STRUCT||[a.UrlStructure.Origin,a.UrlStructure.PathName];if(0===r.length)return t;for(var o=0;o<r.length;o++)i+=r[o]!==a.UrlStructure.Origin||e.origin?r[o]!==a.UrlStructure.PathName||"/"===e[r[o]].charAt(0)?e[r[o]]:"/"+e[r[o]]:window.location.origin;return i}}(),l.urls.defaultParser=function(e){if(e&&(0===e.indexOf("http")||0===e.indexOf("/"))){var t=l.urls.getStructuredRawByUrl(e,[a.UrlStructure.PathName]);return l.urls.removeTrailingSlash(t)}return null},l.urls.getCanonicalURL=function(e){for(var t,n,i=s.publisher.getParsers&&s.publisher.getParsers()||[l.urls.defaultParser],r=0;r<i.length&&(n=i[r],!(t=n(e)));r++);return t||e},l.urls.getCurrentCanonicalURL=function(){return l.urls.getCanonicalURL(l.urls.getLocationUrl())},l.urls.getRawByUrl=function(e){var t=document.createElement("a");return t.href=e,t.href},l.urls.parseQueryString=function(e){var t={};return e.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,n,i,r){t[n]=r}),t},l.urls.isUrlHomePage=function(){return"/"==location.pathname},l.urls.getLocationUrl=function(){return window.self===window.top?window.location.href:document.referrer}}(),function(){l.cleanWindowInstance=function(){var e=document.createElement("iframe");return e.style.display="none",document.head.appendChild(e),e.contentWindow}()}(),function(){var t=function(){function t(e){h=e}function n(){for(var e=0,t=arguments.length;e<t;e++)if(l.isArray(arguments[e]))for(var i=0,t=arguments[e].length;i<t;i++)n(arguments[e][i]);else 500===g.length&&g.shift(),g.push(arguments[0])}function i(){if(n(arguments[0]),e.debug===!0){var t=h?" [Test Group]":"";if("string"==typeof arguments[0]&&(arguments[0]=t+" "+(l.getTimeNow()-p)+"ms >> "+arguments[0]),window.self!==window.top&&"string"==typeof arguments[0]){var i=arguments.length>1&&"string"==typeof arguments[1]&&0===arguments[1].indexOf("color:#");arguments[0]=(i?"":"%c ")+"IFrame "+f.id+t+": "+arguments[0];var r=i?arguments[1]:"color:#"+f.color+";",o="undefined"!=typeof arguments[1]&&"string"!=typeof arguments[1]?arguments[1]:"";l.consoleNative.log(arguments[0],r,o)}else l.consoleNative.log.apply(console,arguments)}}function r(){e.debug===!0&&l.consoleNative.log.apply(console,arguments)}function a(){var e=Array.prototype.slice.call(arguments),t=e.join(" ");t="%c  *** "+t;var n="color:#FFAD33;font-weight: bold;font-size:13px";l.log(t,n)}function s(){var e=Array.prototype.slice.call(arguments),t=e.join(" ");t="%c  *** "+t;var n="color:#FF0000;font-weight: bold;font-size:14px";l.log(t,n)}function c(e,t,n){d.addEventListener(e,t,n)}function u(){return g}var d=new o,h=null,g=[],f={id:Math.floor(1e3*Math.random()),color:function(){function e(){return Math.floor((Math.ceil(256*Math.random())+(/^((?!chrome|android|crios).)*(safari|iphone|ipad)/i.test(navigator.userAgent)?0:255))/2)}return e().toString(16)+e().toString(16)+e().toString(16)}()};return{log:i,logObject:r,logWarning:a,logError:s,setTestGroup:t,addEventListener:c,getBuffer:u}};s.utils=s.utils||{},s.utils.logger=new t,e.logger=s.utils.logger}(),l.log=s.utils.logger.log,l.logObject=s.utils.logger.logObject,l.logWarning=s.utils.logger.logWarning,l.logError=s.utils.logger.logError,l.setTestGroup=s.utils.logger.setTestGroup,l.consoleNative=l.cleanWindowInstance.console,function(){!function(){window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""))}(),function(){Object.values||(Object.values=function(e){for(var t=Object.keys(e),n=t.length,i=new Array(n);n--;)i[n]=t[n];return i})}()}(),function(){function t(){if(n)try{n()}catch(t){}var i=e.debugParams[m.PREVENT_PAGE_LOAD]||"";if(h.dispatchEvent(a.Events.WINDOW_DISPOSE),""!==i)return i}var n=window.onbeforeunload;window.onbeforeunload=t}(),l.globalTasks={},l.globalTasks.listenToWindowErrors=function(){window.addEventListener&&window.addEventListener("error",function(e){e.error&&l.reportErrorIfNeeded(e.error)})},l.isDebugEnabled=function(){return l.debugParamsOverrides(),e.debug},l.isNative=function(e){return/\{\s*\[native code]\s*}/.test(""+e)},l.reportErrorIfNeeded=function(t){var n=/(mi-[\d.]*\.js)/i;if(t&&t.stack&&n.test(t.stack)){l.log("Error found!");var i={ver:e.ver,flavor:e.flavor.name,message:t.message,stack:t.stack};l.sendErrorReport(i)}},l.sendBeaconNative=function(){return navigator.sendBeacon||l.cleanWindowInstance.navigator.sendBeacon?l.isNative(navigator.sendBeacon)?navigator.sendBeacon:l.isNative(l.cleanWindowInstance.navigator.sendBeacon)?l.cleanWindowInstance.navigator.sendBeacon:null:null}(),l.generateUID=function(){function e(){return Math.floor((1+Math.random())*l.getTimeNow()).toString(16).substring(1)}return e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()},l.timestampDiffInSec=function(e,t){return Math.floor((e-t)/1e3)},l.b64EncodeUnicode=function(e){function t(e){function t(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t}var n,i,r,o,a,s,l,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",d=0;for(e=t(e);d<e.length;)n=e.charCodeAt(d++),i=e.charCodeAt(d++),r=e.charCodeAt(d++),o=n>>2,a=(3&n)<<4|i>>4,s=(15&i)<<2|r>>6,l=63&r,isNaN(i)?s=l=64:isNaN(r)&&(l=64),u=u+c.charAt(o)+c.charAt(a)+c.charAt(s)+c.charAt(l);return u}return(window.btoa||t)(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}))},l.timeRounder=function(e){return Math.round(10*e)/10},l.getComputedStyle=function(e){return window.getComputedStyle(e)},l.extendObject=function(e){e=e||{};for(var t=1;t<arguments.length;t++){var n=arguments[t];if(n)for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])}return e},l.setMediaElementSize=function(e,t,n){t=t||e.videoWidth||e.naturalWidth,n=n||e.videoHeight||e.naturalHeight,e.setAttribute("data-media_dimensions",t+","+n)},l.extractElementSize=function(e){var t=e.getBoundingClientRect(),n=parseFloat(t.width),i=parseFloat(t.height);return{width:n,height:i,error:""}},l.getMediaElementSize=function(e){var t=e.getAttribute("data-media_dimensions");return t?(t=t.split(","),t.length<0&&(t[0]*=1,t[1]*=1),t):null},l.ElementObjectFit=function(){function e(e){var t="0% 0%";e.style.transformOrigin=t,e.style.webkitTransformOrigin=t,e.style.msTransformOrigin=t,e.style.mozTransformOrigin=t,e.style.oTransformOrigin=t,e.style.maxWidth="none",e.style.maxHeight="none";var n=e.parentNode,i=e.style.borderRadius;0!=i&&(n.style.borderRadius=i,n.style.overflow="hidden")}function t(t,n){if(t.parentNode){var i=l.getMediaElementSize(t);if(i){var r,o=l.getComputedStyle(n);if(("100%"!==o.width||"100%"!==o.height)&&"auto"!==o.width&&"auto"!==o.height){var a,s=i[0],c=i[1],u=parseFloat(o.width),d=parseFloat(o.height),p=d/c;s*p<u&&(p=u/s),a=(s*p-u)/2,p=Math.ceil(10*p)/10,r="scale("+p+")",e(t),t.style.transform=r,t.style.msTransform=r,t.style.mozTransform=r,t.style.webkitTransform=r,t.style.oTransform=r,t.style.width="auto",t.style.height="auto";var h="rtl"===o.direction;h?t.style.right="-"+a+"px":t.style.left="-"+a+"px"}}}}function n(t){t.parentNode&&(e(t),t.style.width="100%",t.style.height="100%")}function i(e){if(!ae.isObjectFitSupported()){if(!a){var s=new MutationObserver(function(){i(e)});s.observe(e.originalElement,{attributes:!0})}var c;if(e.styleOverrides=e.styleOverrides||{},e.isFullSize=l.parseBool(e.isFullSize,!1),e.styleOverrides[o])return void t(e.mediaElement,e.originalElement,e.styleOverrides[o]);c=e.styleOverrides[r]?e.styleOverrides[r]||e.mediaElement.style.objectFit:e.mediaElement.style.objectFit||"cover","cover"===c&&(e.isFullSize?n(e.mediaElement):t(e.mediaElement,e.originalElement))}}var r="object-fit",o="object-fit-polyfill",a=!1;return{set:i}}(),l.getProtocol=function(){var e="https:"===document.location.protocol?"https":"http";return function(){return e}}(),l.setUrlProtocol=function(){return function(e){return 0===e.indexOf("http")?e:l.getProtocol()+"://"+e}}(),l.hasPromiseSupport=function(){var e="function"==typeof Promise;return function(){return e}}(),l.isPromise=function(e){return e&&l.hasPromiseSupport()&&e instanceof Promise},l.appendDebugMffHashData=function(){var t=document.createElement("a");return function(n){return e.debugMff?(t.href=n,t.hash?n:n+"#"+e.debugMff):n}}(),l.appendDebugToolsQueryData=function(){
var t=document.createElement("a");return function(n){var i=l.getAllDebugParamsString();return t.href=n,i&&(t.search+=(t.search?"&":"")+i),e.debugMff&&(t.hash+=e.debugMff),t.href}}(),l.getAllDebugParamsString=function(){for(var t=Object.keys(m),n="",i=0;i<t.length;i++){var r=t[i],o=e.debugParams[m[r]];o&&(n&&(n+="&"),n+="qadt"+m[r]+"="+o)}return n},l.debugParamsOverrides=function(t){if(t||!(Object.keys(e.debugParams).length>0)){var n=l.parseUrlDebugParams();e.debugParams=n,"undefined"!=typeof n[m.ENABLE_DEBUG]&&(e.debug="true"==n[m.ENABLE_DEBUG]),l.parseScriptDomain()}},l.parseUrlDebugParams=function(){var e=document.createElement("a"),t={};return e.href=l.urls.getLocationUrl(),t[E.QUERY_PARAMS_SOURCE]="",n(t,"?",e.search),n(t,"#",e.hash),t},l.parseScriptDomain=function(){var t="snippet.minute.ly",n="d2d4r7w8.map2.ssl.hwcdn.net",i=l.getScriptHostname();e.debugParams[E.IS_PROCUTION]=i===t||i===n,e.debugParams[E.IS_PROCUTION]&&(i=""),e.debugParams[E.SCRIPT_HOSTNAME]=i},l.getScriptHostname=function(){var e="";if(document.currentScript){var t=document.createElement("a");t.href=document.currentScript.src,e=t.hostname}return function(){return e}}(),l.CustomEvent=function(e,t){t=t||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n},l.validateScraperURL=function(){if(he.isScraperEnable())if(ae.isScraperEnabled())if(l.isPageAllowedByMeta()){if(l.isCurrentUrlFilterValid(he.getFilterScraper()))return!0;l.log("** Scraper blocked by Filter URL. **")}else l.log("** Scraper disabled by meta tags. **");else l.log("** Scraper disabled on IE and Edge. **");else l.log("** Scraper disabled by configuration for this source **");return le.getPlayerContentDelayed().disable(),!1},l.isPlacementEnabled=function(t){return"undefined"!=typeof e.debugParams[m.ACTIVE_ALL]||l.isCurrentUrlFilterValid(he.getFilterPlacements(t))},l.validateScraperReferrerURL=function(){if("undefined"!=typeof e.debugParams[m.IGNORE_REFERRERS])return!0;var t=""!==document.referrer&&0===window.location.href.indexOf(document.referrer);return t},l.isCurrentUrlFilterValid=function(e){return l.isUrlFilterValid(l.urls.getLocationUrl(),e)},l.isUrlFilterValid=function(e,t){return!!l.isUrlMatchPattern(e,t.white)||0===t.white.length&&!l.isUrlMatchPattern(e,t.black)},l.isCurrentUrlExcluded=function(e){if(0===e.length)return!1;var t=l.urls.getLocationUrl();return!!l.isUrlMatchPattern(t,e)},l.isUrlMatchPattern=function(e,t){for(var n,i=0;i<t.length;i++)if(n=new RegExp(t[i],"i"),null!==e.match(n))return!0;return!1},l["extends"]=function(e,t){e.__superCtor__=t,e.__super__=t.prototype,e.prototype=Object.create(t.prototype),e.prototype.constructor=e},l.overrideObjectItems=function(e,t){for(var n in t)e.hasOwnProperty(n)&&(t[n]=e[n])},l.getlistAsArray=function(e){return"string"!=typeof e?e||[]:""===e?[]:JSON.parse(e)},l.extractImageUrlFromStyle=function(){var e=/^url\("?([^"]+)"?\)$/i;return function(t){return t&&e.test(t)?t.replace(e,"$1"):null}}(),l.isElementHasSize=function(e){if(!e)return!1;var t=l.getComputedStyle(e),n=parseInt(t.width,10),i=parseInt(t.height,10);if(i>10&&n>10||"auto"===t.height&&"auto"===t.width)return!0;var r=e.getBoundingClientRect();return r.width>10&&r.height>10},l.parseBool=function(e,t){return"undefined"==typeof e&&"undefined"!=typeof t?t:"true"===e||e===!0},l.parsePercentValue=function(e){if(void 0===e||e===!1||"false"===e)return!1;if(e===!0||"true"===e)return!0;var t=parseInt(e,10),n=100*Math.random();return n>t},l.generateUnique=function(){return"xxxxxxxxxxxx-xxxx-4xxx-yxxxxxx-xxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})},l.generateShortUnique=function(){return"mxxxxx".replace(/[x]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})},l.getRequestAnimationFrame=function(e){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)};return e&&t(e),t},l.poll=function(e,t,n){var i=setInterval(function(){e()&&(clearInterval(i),t())},n)},l.isElementLazyLoad=function(e){if("IMG"!==e.tagName)return!1;var t=e.getAttribute("srcset"),n=e.getAttribute("src");return!n&&!t||(!(!(n&&n.indexOf("base64")>-1)||t)||("IMG"!==e.tagName?!l.extractImageUrlFromStyle(e.style.backgroundImage):0==e.offsetHeight))},l.contains=function(e,t){return e.indexOf(t)!==-1},l.listenOnce=function(e,t,n){function i(){e.removeEventListener(t,i),n.apply(null,arguments)}e.addEventListener(t,i)},l.isMidnightPassed=function(e){function t(e){return new Date(e+n)}var n=6e4*l.getDateNow().getTimezoneOffset(),i=new Date(e).getTime(),r=l.getDateNow().getTime(),o=t(i),a=t(r),s=a.getYear(),c=o.getYear(),u=a.getMonth(),d=o.getMonth(),p=a.getDate(),h=o.getDate();return s>c||u>d||p>h},l.calcDateNextMidnightUTC=function(){var e=new Date;return e.setHours(0,0,0,0),e.setDate(e.getDate()+1),e.setTime(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0)),e},l.calcDatePlusMinutesUTC=function(e){var t=new Date;return t.setMinutes(t.getMinutes()+(e||5)),t},l.isElementToReplaceValid=function(e,t){if(!e)return!1;if(s.utils.ApvElementUtils.getIsElementReplaced(e)||s.utils.ApvElementUtils.getIsElementWatched(e))return!1;var n=l.extractElementSize(t);if(n.width<=he.getMinimumWidth())return!1;var i=t.clientWidth,r=t.clientHeight;return!(i/r<he.getValidRatio())},l.windowDispatchEvent=function(e){var t=null;try{t=new Event(e)}catch(n){t=document.createEvent("Event");var i=!1,r=!1;t.initEvent(e,i,r)}window.dispatchEvent(t)},l.isIFrame=function(){return window.self!==window.top},l.isInt=function(e){return e%1===0},l.isProdEnv=function(){return"production"===u},l.isPageAllowedByMeta=function(){var e=he.getAllowedMeta();if(0===e.length)return!0;for(var t=0;t<e.length;t++)for(var n=e[t],i=0;i<n.content.length;i++){var r=n.content[i];if(document.querySelector("meta[name='"+n.name+"'][content='"+r+"']")||s.publisher.publisherShouldScrap&&s.publisher.publisherShouldScrap(r))return!0}return!1},l.getOrigin=function(e){if("string"==typeof e){var t=e;e=document.createElement("a"),e.href=t}if(!e.origin){var n=e.port&&parseInt(e.port);e.origin=e.protocol+"//"+e.hostname+(n&&80!==n&&443!==n?":"+e.port:"")}return e.origin},l.isSupportIntersectionObserver=function(){var e=window.IntersectionObserver&&l.isNative(window.IntersectionObserver);return function(){return e}}(),l.getDayUTCCookie=function(e){e||(e=30);var t=new Date;return t.setTime(t.getTime()+24*e*60*60*1e3),t.toUTCString()},l.addWinEventListener=function(e,t,n,i){t.addEventListener?t.addEventListener(e,n.bind(i),!1):t.attachEvent&&t.attachEvent(e,n.bind(i))},l.removeWinEventListener=function(e,t,n,i){t.addEventListener?t.removeEventListener(e,n,!1):t.attachEvent&&t.detachEvent(e,n)},l.closest=function(e,t){var n;["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(e){return"function"==typeof document.body[e]&&(n=e,!0)});for(var i;e;){if(i=e.parentElement,i&&i[n](t))return i;e=i}return null},l.hasOwnProperty=Object.prototype.hasOwnProperty,l.isObjEmpty=function(e){if(null==e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;for(var t in e)if(l.hasOwnProperty.call(e,t))return!1;return!0},l.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},function(){function e(t,n){e.__superCtor__.call(this),this.apvData=t,this.link=n,this._mobileContextMenuTimeoutCode=0,this._mobileTouchStartTime=0,this._mobileTouchEndTimeoutCode=0,ae.isMobile()?this.attachMobileEvents():this.attachDesktopEvents()}var t=700,n=1500;l["extends"](e,o),e.prototype.attachMobileEvents=function(){var e=this,t=function(){e.handleLinkTouchStart(e.apvData)},n=function(){e.handleLinkTouchEnd(e.apvData)};this.link.addEventListener("touchstart",t),this.link.addEventListener("touchend",n),this.apvData.onDisposed().addOnce(function(){e.link.removeEventListener("touchstart",t),e.link.removeEventListener("touchend",n)})},e.prototype.attachDesktopEvents=function(){var e=this,t=function(){e.contextMenuHandleOpen(e.apvData)};this.link.addEventListener?(this.link.addEventListener("contextmenu",t),this.apvData.onDisposed().addOnce(function(){e.link.removeEventListener("contextmenu",t)})):(this.link.attachEvent("oncontextmenu",t),this.apvData.onDisposed().addOnce(function(){e.link.detachEvent("oncontextmenu",t)}))},e.prototype.handleLinkTouchStart=function(){var e=this;this._mobileContextMenuTimeoutCode=setTimeout(function(){e.contextMenuHandleOpen()},t),this._mobileTouchEndTimeoutCode=setTimeout(function(){e.handleTouchEndTimeout()},n),this._mobileTouchStartTime=l.getTimeNow()},e.prototype.handleLinkTouchEnd=function(){if(0!==this._mobileTouchEndTimeoutCode&&(clearTimeout(this._mobileTouchEndTimeoutCode),this._mobileTouchEndTimeoutCode=0),0!==this._mobileContextMenuTimeoutCode){clearTimeout(this._mobileContextMenuTimeoutCode),this._mobileContextMenuTimeoutCode=0;var e=l.getTimeNow()-this._mobileTouchStartTime;e<t&&this.dispatchEvent("contextMenuOpen",this.apvData)}},e.prototype.handleTouchEndTimeout=function(){this._mobileTouchEndTimeoutCode=0,this.handleLinkTouchEnd(this.apvData)},e.prototype.contextMenuHandleOpen=function(){this.dispatchEvent("contextMenuHandleOpen",this.apvData)},s.utils.ContextMenuObserver=e}(),function(){function e(e,t){function n(){v.addEventListener(h,r,!0),ae.isMobile()&&v.addEventListener("touchstart",s,!0),ae.isIE()||ae.isEdge()?v.addEventListener(a.Events.MOUSE_UP,i,!0):v.addEventListener(a.Events.AUXCLICK_EVENT,r,!0)}function i(e){1===e.button&&(f.dispatchEvent(h),t&&(t(),d()))}function r(e){e.type===a.Events.AUXCLICK_EVENT&&e.button>=2||(f.dispatchEvent(h),t&&(t(),d()))}function s(){v&&(m=!1,v.addEventListener("touchmove",l,!0),v.addEventListener("touchend",c,!0),p=setTimeout(u,g))}function l(){m=!0}function c(e){m===!1&&r(e)}function u(){v&&(v.removeEventListener("touchmove",l,!0),v.removeEventListener("touchend",c,!0))}function d(){f.removeAllEventListener(),clearTimeout(p),v&&(v.removeEventListener(h,r,!0),v.removeEventListener(a.Events.AUXCLICK_EVENT,r,!0),v.removeEventListener("touchstart",s,!0),u(),v=null)}var p,h="click",g=350,f=new o,v=e,m=!1;return n(),{addEventListener:f.addEventListener.bind(f),removeEventListener:f.removeEventListener.bind(f),addEventListenerOnce:f.addEventListenerOnce.bind(f),dispose:d}}s.utils=s.utils||{},s.utils.MouseClickEventObserver=e}(),function(){function e(e){function t(){return A}function n(){if(!g){var e=void 0;g=new l.cleanWindowInstance.XMLHttpRequest,v===c?f+="_.gif?"+y:(v=u,f+="_.gif",e=y);try{g.open(v,f,!0)}catch(t){return}m&&g.setRequestHeader(r,m),g.onload=i,g.onerror=h,g.ontimeout=p,g.timeout=E,g.send(e)}}function i(){g.status>=200&&g.status<300?_.dispatch():S.dispatch("XHR_Complete:"+g.status)}function p(){S.dispatch("timeout")}function h(){S.dispatch("error:"+g.status)}var g,f=e.url||"",v=e.method||c,m=v===c?o:a,E=e.timeout||5e3,y=e.data,_=new s.utils.Signal,S=new s.utils.Signal,A="XHR"+d++;return{getID:t,load:n,onComplete:_,onError:S,Methods:{GET:c,POST:u}}}function t(t,n){var i=new e(t),r=function(e){p[i.getID()]=void 0,i.onComplete.removeAll(),i.onError.removeAll(),n(e)};return p[i.getID()]=i,i.onComplete.addOnce(r),i.onError.addOnce(r),i.load(),i}function n(e,n){return e.method=c,t(e,n)}function i(e,n){return e.method=u,t(e,n)}var r="Content-Type",o="image/gif",a="application/text",c="get",u="post",d=0;s.utils=s.utils||{},s.utils.ajax=s.utils.ajax||{},s.utils.ajax.XHRRequest=e;var p={};s.utils.ajax.sendGetRequest=n,s.utils.ajax.sendPostRequest=i}();var S=function(){function e(e){n(a.Urls.Logger,e,a.ReportMethods.POST)}function t(e){n(a.Urls.Error,e,a.ReportMethods.POST)}function n(e,t,n){if(!n&&M)return void p(e+"_.gif?"+t);n=n||he.getReportMethod()||a.ReportMethods.POST;var o=s.utils.ajax;switch(n){case a.ReportMethods.GIF:r(e,t);break;case a.ReportMethods.GET:o.sendGetRequest({url:e,data:t},i);break;case a.ReportMethods.POST:he.getBeaconReportMethod()?l.sendBeaconNative.call(navigator,e+"_.gif",t):o.sendPostRequest({url:e,data:t},i)}}function i(e){}function r(e,t){var n=new Image;n.onload=function(){o(this)},n.onerror=function(){l.sendErrorReport("EmitterErrorContent:NoTrace"),o(this)},n.src=e+"_.gif?"+t,document.body.appendChild(n)}function o(e){try{document.body.removeChild(e)}catch(t){}}function c(){var e=M.getItem(D);e=e?JSON.parse(e):[],U=e}function u(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];t.push({owner:i.owner,url:i.url,state:i.state,time:i.time,retry:i.retry})}return t}function d(){clonedList=u(U),M.setItem(D,JSON.stringify(clonedList)),U=null}function p(e){var t={owner:V,url:e,image:null,state:P,time:0,retry:-1};c(),h(t),U.push(t),d()}function h(e){e.image=g(e),e.time=l.getTimeNow(),e.retry+=1,e.state=w,document.body.appendChild(e.image)}function g(e){var t=new Image;return t.onload=function(){f(e)},t.onerror=function(){v(e)},t.src=e.url,t}function f(e){c(),E(e),d()}function v(e){if(l.sendErrorReport("EmitterErrorContent:"+JSON.stringify(e)),e.retry===N)return c(),E(e),void d();var t=e.retry*k;setTimeout(function(){c(),m(e),d()},t)}function m(e){_(e),y(e),h(e),U.push(e)}function E(e){_(e),y(e)}function y(e){for(var t=-1,n=0;n<U.length;n++)e.url===U[n].url&&(t=n);t>-1&&U.splice(t,1)}function _(e){try{document.body.removeChild(e.image)}catch(t){}}function S(){c(),A(),d()}function A(){for(var e,t=0;t<U.length;t++)e=U[t],I(e)&&b(e)}function I(e){if(e.guid===V)return!0;var t=l.getTimeNow()-e.time;return t>O&&(e.guid=V,e.retry=-1,!0)}function b(e){var t=!1;switch(e.state){case P:case C:t=!0;break;case T:E(e);break;case w:var n=l.getTimeNow()-e.time;n>L&&(t=!0)}t&&m(e)}var D="_minRTrs",P=0,w=1,C=2,T=3,L=2e4,O=35e3,R=5e3,k=5e3,N=20,V=l.generateUnique(),M=null,U=null,F=null;return M&&(F=new s.utils.Timer(R,S),F.start()),{send:n,sendLog:e,sendError:t}}(),A=function(){function e(e,t){var n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),o=i.right>n.right,a=i.left<n.left,s=i.top>=n.bottom,l=i.bottom<=n.top,c={state:r.FULLY_VISIBLE,percentage:1};return s||l?(c.percentage=0,c.state=r.HIDDEN,c):(a?c.percentage=(i.right-n.left)/i.width:o&&(c.percentage=(i.width-(i.right-n.right))/i.width),c.percentage>0&&c.percentage<1?c.state=r.ANALYTICS_VISIBLE:c.percentage<=0?c.state=r.HIDDEN:c.state=r.FULLY_VISIBLE,c.percentage=c.percentage<0?0:100*c.percentage,c)}function t(t,n){var i,a=100*o(t);if(i=0===a?r.HIDDEN:100===a?r.FULLY_VISIBLE:r.ANALYTICS_VISIBLE,n!==window&&i!==r.HIDDEN&&n){var s=e(t,n);return s.percentage<a?s:{state:i,percentage:a}}return{state:i,percentage:a}}function n(e,n){var i=t(e,n).state;return i!==r.HIDDEN}function i(e,n){return t(e,n).percentage}var r={HIDDEN:0,ANALYTICS_VISIBLE:1,FULLY_VISIBLE:2},o=function(){function e(e){return e&&1===e.nodeType||!1}function t(e){var t=e||window;return{height:t.innerHeight,width:t.innerWidth}}function n(e,t){return(t||window).getComputedStyle(e,null)}function i(e,t){return e.getPropertyValue(t)}function r(t,o){o||(o=n(t));var a=i(o,"display");if("none"===a)return!1;var s=t.parentNode;return!e(s)||r(s)}function o(e,t){if(e===(t||window).document)return!0;if(!e||!e.parentNode)return!1;var o=n(e,t),a=i(o,"visibility");return"hidden"!==a&&"collapse"!==a&&r(e,o)}function a(e,t){return!(!e||e.width<=0||e.height<=0)&&(e.bottom>0&&e.right>0&&e.top<t.height&&e.left<t.width)}return function(e,n){if(!e)return 0;var i=e.getBoundingClientRect(),r=t(n);if(!a(i,r)||!o(e,n))return 0;var s=0,l=0;return i.top>=0?s=Math.min(i.height,r.height-i.top):i.bottom>0&&(s=Math.min(r.height,i.bottom)),i.left>=0?l=Math.min(i.width,r.width-i.left):i.right>0&&(l=Math.min(r.width,i.right)),s*l/(i.height*i.width)}}();return{isElementVisible:n,getViewportState:t,getElementVisiblePercents:i,state:r}}(),I=function(e){function t(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function n(e){return!isNaN(parseFloat(e))&&isFinite(e)}function i(e){return"true"===e||"false"===e||n(e)?JSON.parse(e):e}function r(n){function o(e,r,a){var s;if("undefined"!=typeof document){if(arguments.length>1){if(a=t({path:"/"},o.defaults,a),"number"==typeof a.expires){var c=l.getDateNow();c.setMilliseconds(c.getMilliseconds()+864e5*a.expires),a.expires=c.toUTCString()}else"function"==typeof a.expires.toUTCString&&(a.expires=a.expires.toUTCString());try{s=JSON.stringify(r),/^[\{\[]/.test(s)&&(r=s)}catch(u){}return e=encodeURIComponent(String(e)),e=e.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),e=e.replace(/[\(\)]/g,escape),document.cookie=[e,"=",r,a.expires&&"; expires="+a.expires,a.path&&"; path="+a.path,a.domain&&"; domain="+a.domain,a.secure?"; secure":""].join("")}e||(s={});for(var d=document.cookie?document.cookie.split("; "):[],p=/(%[0-9A-Z]{2})+/g,h=0;h<d.length;h++){var g=d[h].split("="),f=g.slice(1).join("=");'"'===f.charAt(0)&&(f=f.slice(1,-1));try{var v=g[0].replace(p,decodeURIComponent);if(f=n.read?n.read(f,v):n(f,v)||f.replace(p,decodeURIComponent),e===v){s=i(f);break}e||(s[v]=f)}catch(u){}}return s}}return o.setItem=function(t,n,i){i||(i=l.getDayUTCCookie(365)),o(t,n,{domain:e,expires:i})},o.getItem=function(e){return o(e)},o.getJSON=function(){return o.apply({json:!0},[].slice.call(arguments))},o.defaults={},o.removeItem=function(n,i){o(n,"",t(i,{domain:e,expires:-1}))},o.withConverter=r,o.isCookiesEnable=function(){var e=!1;try{o.setItem("_minTest","exist",1),e=!!o.getItem("_minTest"),o.removeItem("_minTest","true")}catch(t){return!1}return e}(),o}return r(function(){})},b=function(e){function t(){return e.isCookiesEnable?(g||l.log("no cookie domain was set, using default"),e):(l.logWarning("cookies are disabled"),null)}return{getLocalStorageInstance:t}},D=function(e,t){function n(e){return _[e]||f(e)}function i(e,t){"undefined"!=typeof e&&o(e,t)}function r(t){if(t===y)return null;var n=new Date(e.getTimeNow()+m).toUTCString();return e.isMidnightPassed(n)&&(n=e.calcDateNextMidnightUTC()),n}function o(e,n){_[e]=n,"undefined"==typeof n&&(n=""),t.setItem(e,n,r(e))}function s(){h.addEventListener(a.Events.CLIENT_INIT_ANALYTICS,function(){g()}),window.addEventListener("click",function(){g()},!1),window.addEventListener(a.Events.AUXCLICK_EVENT,function(e){e.type===a.Events.AUXCLICK_EVENT&&e.button>=2||g()},!1),h.addEventListener(a.Events.IMPRESSION,function(){g()})}function l(){t&&(c(),s(),_=v())}function c(){for(var e=["","1","2","3","4","5","6","7","8","9"],n=0;n<e.length;n++)t.removeItem("minSessionToken"+e[n])}function u(){Object.keys(_).forEach(function(e){t.removeItem(e)}),_={}}function d(){return n(E)}function p(){return n(y)}function g(){Object.keys(_).forEach(function(e){var t=f(e);"undefined"!=typeof t&&null!==t&&o(e,_[e])})}function f(e){return _[e]=t.getItem(e),_[e]}function v(){var n=_,i=t.getItem(y);i||(i=e.generateUID(),o(y,i)),n[y]=i;var r=t.getItem(E);return r||(r=e.generateUID(),o(E,r)),n[E]=r,n}var m=18e5,E="minSID",y="minUID",_={};return{get:n,set:i,reset:u,init:l,getId:d,getUserId:p}},P=function(){function e(){var e=new Date(l.getTimeNow()+a.SESSION_TTL).toUTCString();return l.isMidnightPassed(e)&&(e=l.calcDateNextMidnightUTC()),e}function t(e){for(var t in r)if(r.hasOwnProperty(t))for(var n=r[t].keys,i=0;i<n.length;i++)if(n[i]===e)return t;return null}function n(t){switch(t){case"session":return e();case"daily":return l.calcDateNextMidnightUTC();default:return t}}var i=null,r={},o=function(e){function i(i,o){var a=t(i);if(!a)return void e.setItem(i,o);var s=r[a]||{},l=n(s.expiration),c=JSON.parse(e.getItem(a)||null)||{};c[i]=o,e.setItem(a,JSON.stringify(c),l)}function o(n){var i=t(n);if(!i)return e.getItem(n);var r=JSON.parse(e.getItem(i)||null)||{};return n in r?r[n]:null}function a(n){var i=t(n);if(!i)return void e.removeItem(n);var o=r[i]||{},a=o.expiration,s=JSON.parse(e.getItem(i)||null)||{};delete s[n],l.isEmpty(s)?e.removeItem(i):e.setItem(i,JSON.stringify(s),a)}function s(e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])}return{setItem:i,getItem:o,removeItem:a,setConfig:s}};return{getInstance:function(e){if(!i){var t=e.getLocalStorageInstance();i=o(t)}return i}}}(),w=function(){var e="min",t=function(t){return e+t},n=function(e){this.localStorage=e};return n.prototype.getItem=function(e){var n=this.localStorage.getItem(t(e));return null!=n&&(n=JSON.parse(n)),n},n.prototype.setItem=function(e,n){return this.localStorage.setItem(t(e),JSON.stringify(n))},n.prototype.removeItem=function(e){return this.localStorage.removeItem(t(e))},n}();!function(){var e={};s.utils=s.utils||{},s.utils.ApvElementUtils=e,e.setElementAsProcessed=function(e){e.setAttribute("data-apv_processed","true")},e.getIsElementProcessed=function(e){return"true"===e.getAttribute("data-apv_processed")},e.setElementAsReplaced=function(e){e.setAttribute("data-apv_replaced","true")},e.getIsElementReplaced=function(e){return"true"===e.getAttribute("data-apv_replaced")},e.setElementAsWatched=function(e){e.setAttribute("data-apv_watched","true")},e.getIsElementWatched=function(e){return"true"===e.getAttribute("data-apv_watched")},e.removeIsElementWatched=function(e){return e.removeAttribute("data-apv_watched")}}();var C=function(e,t,n){function i(e,t){try{var n=JSON.parse(e);if(n.origin===d)return n.event=t,n}catch(i){}return{type:h.INVALID}}function r(e,t){var n=i(e.data,e);n.type===h.DATA_RESPONSE&&t(n)}function o(e){t.addEventListener("message",function(t){var n=i(t.data,t);n.type===h.MINUTE_REQUEST_FROM_IFRAME&&e(n)})}function a(e,n){t.addEventListener("message",function(t){var r=i(t.data,t);r.subtype===e&&n(r)})}function s(e,t){e.addEventListener("message",function(e){r(e,t)})}function l(e,t,n){e.addEventListener("message",function(e){var r=i(e.data,e);r.subtype===t&&n(r)})}function c(n,i){var r={origin:d,type:h.MINUTE_REQUEST_FROM_IFRAME,window_origin:t.location.origin};r.subtype=n,e.extendObject(r,i||{}),t.parent.postMessage(JSON.stringify(r),"*")}function u(n,i,r){var o={origin:d,type:h.DATA_RESPONSE,isTestGroup:p,window_origin:t.location.origin,href:t.location.href};o.subtype=i,e.extendObject(o,r||{}),n.postMessage(JSON.stringify(o),"*")}var d="minute",p=null,h={DATA_REQUEST:"minuteDataRequest",DATA_RESPONSE:"minuteDataResponse",INVALID:"invalid",MINUTE_REQUEST_FROM_IFRAME:"minuteRequestFromIFrame"};return{addPostMessageListener:s,addParentListener:o,sendToParent:c,addPostMessageListenerBySubtype:l,addParentListenerBySubtype:a,sendToIFrame:u}},T=function(e,t,n){function i(e){var t,n,i=e.compatibility;switch(typeof i){case"undefined":return;case"string":i=JSON.parse(i)}U?(t=i.mobile||{},n=i.os||{},Y.overrideObjectItems(n,z)):t=i.desktop||{},Y.overrideObjectItems(t,H)}function r(){if(null!==x)return W;var e=G.match(/android\s*(\d+\.?\d*\.?\d*)/i);return e&&2===e.length?(x=!0,W=n.convertVersionToNumbers(e[1].split("."))):(x=!1,W=null),W}function o(e,t,n,i){var r=null;if(n&&e.match(n))return r;i=i||2;var o=e.match(t);return o&&(r=parseInt(o[i],10)),r}function s(e){return{firefox:function(){return o(e,/mozilla\/[\w\.]+.+rv\:.+gecko\/\d+.+(firefox)\/([\w\.]+)/i,j)},edge:function(){return o(e,/(edge)\/((\d+)?[\w\.]+)/i,j)},chrome:function(){return o(e,/(chrome)\/v?([\w\.]+)/i,j)},msie:function(){var t=o(e,/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i),n=o(e,/(?:ms|\()(ie)\s([\w\.]+)/i);return t||n},safari:function(){return o(e,/version\/([\w\.]+).+?(mobile\s?safari|safari)/i,j,1)},crios:function(){return o(e,/(CriOS)\/v?([\w\.]+)/i,j,2)}}}function l(){var e,t=/(?:iPhone|iPod|iPad)/i;return t.test(G)?(e=G.match(/OS (\d+)_(\d+)_?(\d+)?/i),e?n.convertVersionToNumbers(e.slice(1,3)):null):null}function c(){var e,t;if(!U)return!1;if(e=r())return t=K.chrome(),F=t>=H.chrome||n.compare(e,z.android)>=0?t:0,V="chrome",B=H.chrome,!0;if(e=l()){var i=n.compare(e,z.ios)>=0;if(i){var o=K.crios();return o?(F=o,B=H.crios,V="crios"):(F=e[0],V="safari",B=H.safari),!0}}return!1}function u(){var e;for(var t in H)if(K[t]){if(e=K[t]())return F=e,V=t,B=H[t],!0}else Y.log("Can't find vendor '"+t+"' version function in comparability");return!1}function d(){"boolean"!=typeof U&&(U=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(G)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(G.substr(0,4)))}function p(e){i(e);var t=c();t||u()}function h(){if(F<B)return!1;if(U){var e=r();if(e)return n.compare(e,z.android)>=0;if(e=l())return n.compare(e,z.ios)>=0}return!0}function g(){return/^((?!chrome|android|crios).)*(safari|iphone|ipad)/i.test(G)}function f(){return q}function v(){return J}function m(){return Z}function E(){return X}function y(){if("undefined"!=typeof M)return M;var e={firefox:36,safari:7.1,chrome:31,crios:99};return M=!!e[V]&&F>=e[V]}function _(){return!q&&!Z}function S(e){if(!e||!e.desktop)return!0;var t;for(var n in e.desktop)if(K[n]&&(t=K[n]()))return t>=e.desktop[n];return!0}function A(){return U}function I(){return!U}function b(){return A()?null===l()?0:l()[0]:0}function D(){if(!A())return 0;var e=l();return null===e?0:parseFloat(e[0]+"."+e[1])}function P(){return A()&&!!l()&&g()}function w(){return!!K.chrome()}function C(){return w()?K.chrome():null}function T(){return!!r()}function L(){var e=r();return e?e[0]:0}function R(){return"iPad"===t.platform}function k(){return Q.WEB_VIEW}function N(){return this.isDesktop()?a.Emitter.ANALYTICS_SOURCE_WEB_DESKTOP:a.Emitter.ANALYTICS_SOURCE_WEB_MOBILE}var V,M,U,F=0,B=99,x=null,W=null,H={firefox:47,msie:11,edge:14,chrome:53,safari:9,crios:99},z={android:[4,4,2],ios:[10,3,3]},Y=e,G=(t.userAgent||"").toLowerCase(),j=/opr\/|opera|Yandex|SeaMonkey|Maxthon|Avant|Deepnet|Comodo_Dragon|Dooble|Palemoon|Flock|facebookexternalhit|Facebot/i;d();var K=s(G),q=!!K.msie(),J=K.edge(),Z=!!J,X=!!K.firefox(),Q=new O(t.userAgent);return{init:p,isBrowserSupported:h,isSafari:g,isIE:f,isEdge:m,getEdgeVersion:v,isFF:E,isObjectFitSupported:y,isScraperEnabled:_,checkPlacement:S,isMobile:A,isDesktop:I,getiOSVersion:b,getiOSFullVersion:D,isChrome:w,getChromeVersion:C,isAndroid:T,getAndroidMajorVersion:L,isiPad:R,isIosSafari:P,getAnalyticsSource:N,isWebView:k}},L=function(e,t,n){function i(){var i=null;return i=s.publisher.Compatibility?new s.publisher.Compatibility(e,t,n):new T(e,t,n)}return{create:i}},O=function(){function e(n,i){return e.DISABLE_CACHE?t(n,i||{}):(e.cache||(e.cache=t(n,i||{})),e.cache)}function t(e,t){t=t||{};var c=global.navigator||{},u=e||c.userAgent||"",d=v(u),p=i(u),g=r(u,p),f=o(u),m=a(u,f),E=s(f,parseFloat(g)),y=l(u,p,g,t,d),_=n(c),S=!!d||(/Android|iOS/.test(p)||/Windows Phone/.test(u)),A="iOS"===p,I="Android"===p,b=h(u,p,f,m,t),D=/^(iPhone 6s|iPhone 7)/.test(y)||parseFloat(g)>=10&&/^iPad Pro/.test(y),P=/native/.test(Object.keys+""),w=/native/.test(String.raw+""),C={OS:p,OS_VERSION:g,PC:!S,MOBILE:S,BROWSER:f,BASE_BROWSER:E,BROWSER_VERSION:m,USER_AGENT:u,LANGUAGE:_,WEB_VIEW:b,DEVICE:y,TOUCH_3D:D,CARRIER:d,FEATURE_PHONE:!!d,ES5:P,ES6:w,ES2015:w,iOS:A,Mac:"Mac"===p,macOS:"Mac"===p,Android:I,Windows:"Windows"===p,IE:"IE"===f,Edge:"Edge"===f,Firefox:"Firefox"===f,Chrome:"Chrome"===f,Safari:"Safari"===f,Silk:"Silk"===f,AOSP:"AOSP"===f,WebKit:"WebKit"===E,Chromium:"Chromium"===E,iPod:A&&/iPod/.test(u),iPad:A&&/iPad/.test(u),iPhone:A&&/iPhone/.test(u),Kindle:"Silk"===f,has:function(e){return"undefined"!=typeof this[e]},get:function(e){return this[e]}};return C}function n(e){var t=e.language||"en";return e.languages&&Array.isArray(e.languages)&&(t=e.languages[0]||t),t.split("-")[0]}function i(e){switch(!0){case/Android/.test(e):return"Android";case/iPhone|iPad|iPod/.test(e):return"iOS";case/Windows/.test(e):return"Windows";case/Mac OS X/.test(e):return"Mac";case/CrOS/.test(e):return"Chrome OS";case/Firefox/.test(e):return"Firefox OS"}return""}function r(e,t){switch(t){case"Android":return d(e,"Android");case"iOS":return d(e,/OS /);case"Windows":return d(e,/Phone/.test(e)?/Windows Phone (?:OS )?/:/Windows NT/);case"Mac":return d(e,/Mac OS X /)}return"0.0.0"}function o(e){var t=/Android/.test(e);switch(!0){case/CriOS/.test(e):return"Chrome for iOS";case/Edge/.test(e):return"Edge";case t&&/Silk\//.test(e):return"Silk";case/Chrome/.test(e):return"Chrome";case/Firefox/.test(e):return"Firefox";case t:return"AOSP";case/MSIE|Trident/.test(e):return"IE";case/Safari\//.test(e):return"Safari";case/AppleWebKit/.test(e):return"WebKit"}return""}function a(e,t){switch(t){case"Chrome for iOS":return d(e,"CriOS/");case"Edge":return d(e,"Edge/");case"Chrome":return d(e,"Chrome/");case"Firefox":return d(e,"Firefox/");case"Silk":return d(e,"Silk/");case"AOSP":return d(e,"Version/");case"IE":return/IEMobile/.test(e)?d(e,"IEMobile/"):/MSIE/.test(e)?d(e,"MSIE "):d(e,"rv:");case"Safari":return d(e,"Version/");case"WebKit":return d(e,"WebKit/")}return"0.0.0"}function s(e,t){return"Silk"===e&&t>=4.4?"Chromium":E[e]||""}function l(e,t,n,i,r){var o=global.screen||{},a=o.width||0,s=o.height||0,l=i.DISPLAY_DPR||global.devicePixelRatio||1,d=i.DISPLAY_LONG||Math.max(a,s),p=i.DISPLAY_SHORT||Math.min(a,s),h=l>=2,g=Math.max(d,p);switch(t){case"Android":return c(e,h);case"iOS":return u(e,h,g,n)}return r?m(e,r):""}function c(e,t){if(/Firefox/.test(e))return"";try{var n=e.split("Build/")[0].split(";").slice(-1).join().trim().replace(/^SonyEricsson/,"").replace(/^Sony/,"").replace(/ 4G$/,"");return"Nexus 7"===n?t?"Nexus 7 2nd":"Nexus 7":n}catch(i){}return""}function u(e,t,n,i){var r="",o="",a=/543/.test(r),s=/554/.test(r),l=/A7 /.test(r),c=/A8X/.test(r),u=/A8 /.test(r),d=/A9X/.test(r),p=/A9 /.test(r),h=/Metal/.test(r),g=/Software/.test(o);return/iPhone/.test(e)?g?"iPhone Simulator":t?n<=480?a||i>=8?"iPhone 4s":"iPhone 4":n<=568?h?"iPhone 7":p?"iPhone SE":u?"iPhone 6":l?"iPhone 5s":a?"iPhone 5":"iPhone x":n<=667?h?"iPhone 7":p?"iPhone 6s":u?"iPhone 6":"iPhone x":n<=736?h?"iPhone 7 Plus":p?"iPhone 6s Plus":u?"iPhone 6 Plus":"iPhone x":"iPhone x":"iPhone 3GS":/iPad/.test(e)?g?"iPad Simulator":t?a?"iPad 3":s?"iPad 4":l?"iPad mini 2":c?"iPad Air 2":u?"iPad mini 4":d?n<=1024?"iPad Pro 9.7":"iPad Pro":p?"iPad 5":"iPad x":"iPad 2":/iPod/.test(e)?g?"iPod Simulator":n<=480?t?"iPod touch 4":"iPod touch 3":u?"iPod touch 6":"iPod touch 5":"iPhone x"}function d(e,t){try{return p(e.split(t)[1].trim().split(/[^\w\.]/)[0])}catch(n){}return"0.0.0"}function p(e){var t=e.split(/[\._]/);return(parseInt(t[0],10)||0)+"."+(parseInt(t[1],10)||0)+"."+(parseInt(t[2],10)||0);
}function h(e,t,n,i,r){switch(t+n){case"iOSSafari":return!1;case"iOSWebKit":return g(r);case"AndroidAOSP":return!1;case"AndroidChrome":return parseFloat(i)>=42?/; wv/.test(e):!!/\d{2}\.0\.0/.test(i)||f(r)}return!1}function g(e){var t=global.document||{};return"WEB_VIEW"in e?e.WEB_VIEW:!("fullscreenEnabled"in t||"webkitFullscreenEnabled"in t)}function f(e){return"WEB_VIEW"in e?e.WEB_VIEW:!("requestFileSystem"in global||"webkitRequestFileSystem"in global)}function v(e){switch(!0){case/DoCoMo/.test(e):return"DOCOMO";case/KDDI/.test(e):return"KDDI";case/SoftBank|Vodafone/.test(e):return"SOFTBANK"}return""}function m(e,t){switch(t){case"DOCOMO":return e.split("DoCoMo/2.0 ")[1].split("(")[0];case"KDDI":return e.split("KDDI-")[1].split(" ")[0];case"SOFTBANK":return/^Vodafone/.test(e)?e.split("/")[2].slice(1):e.split("/")[2]}return""}window.global=window;var E={Chrome:"Chromium",Firefox:"Firefox",IE:"IE",Edge:"Edge",AOSP:"WebKit",Safari:"WebKit",WebKit:"WebKit","Chrome for iOS":"WebKit",Silk:"WebKit"};return e.DISABLE_CACHE=!1,e.cache=null,e.parse=t,e.repository="https://github.com/uupaa/UserAgent.js",t}(),R=function(e,t,n){function i(e,n,i,r){Fe=e.config,Be=e.system,Fe=t.extentObject(xe,Fe),Ge=i,We=r,He=n,o()}function r(){Fe.optimizely=Fe.optimizely?Fe.optimizely:{enable:!1,impr:!1,vv:!0,filter:{black:[],white:[]}},Fe.optimizely.enable=t.parseBool(Fe.optimizely.enable),Fe.optimizely.impressionFlag=t.parseBool(Fe.optimizely.impr),Fe.optimizely.vvFlag=t.parseBool(Fe.optimizely.vv),Fe.optimizely.filter=Fe.optimizely.filter?Fe.optimizely.filter:{},Fe.optimizely.filter.black=Fe.optimizely.filter&&Fe.optimizely.filter.black?Fe.optimizely.filter.black:[],Fe.optimizely.filter.white=Fe.optimizely.filter&&Fe.optimizely.filter.white?Fe.optimizely.filter.white:[]}function o(){"undefined"!=typeof Fe.allowedAnalytics&&(Ye=100*Math.random()<parseInt(Fe.allowedAnalytics)),Fe.urlCanonical&&t.logWarning("Deprecated!!! urlCanonical please move url struct to gulptime"),r(),Fe.minimumWidth=parseInt(Fe.minimumWidth||"70",10),Fe.validRatio=Fe.validRatio||.9,Fe.enableApvLoadReport=t.parseBool(Fe.enableApvLoadReport,!1),Fe.renderModulus=parseInt(Fe.renderModulus||"10"),Fe.maniakRefs?t.isArray(Fe.maniakRefs)||(Fe.maniakRefs=[Fe.maniakRefs]):Fe.maniakRefs=[],Fe.enableApvBlobByBrowser=Fe.enableApvBlobByBrowser||{},Fe.enableApvBlobByBrowser.firefox=t.parseBool(Fe.enableApvBlobByBrowser.firefox,!1),Fe.enableApvBlobByBrowser.msie=t.parseBool(Fe.enableApvBlobByBrowser.msie,!1),Fe.enableApvBlobByBrowser.edge=t.parseBool(Fe.enableApvBlobByBrowser.edge,!1),Fe.enableApvBlobByBrowser.chrome=t.parseBool(Fe.enableApvBlobByBrowser.chrome,!1),Fe.enableApvBlobByBrowser.safari=t.parseBool(Fe.enableApvBlobByBrowser.safari,!1),Fe.isLazyEnabled=t.parseBool(Fe.isLazyEnabled,!0),l(),d(),S(),p(),f(),g(),v(),m(),E(),y(),_(),s(),A()}function s(){return"undefined"==typeof Fe.segmentOptions?(Fe.segmentOptions={},void(Fe.segmentOptions.enabled=!1)):(Fe.segmentOptions.pub_name=Fe.segmentOptions.pub_name||window.location.host,t.parseBool(Fe.segmentOptions.test,!1)?t.parseBool(Fe.segmentOptions.test)&&(Fe.segmentOptions.test="TEST - "):Fe.segmentOptions.test="",Fe.segmentOptions.exp_name=Fe.segmentOptions.test+(Fe.segmentOptions.exp_name||"Minute - "+Fe.segmentOptions.pub_name),Fe.segmentOptions.vv_title=Fe.segmentOptions.vv_title||"Experiment Action Taken",Fe.segmentOptions.apv_user=Fe.segmentOptions.apv_user||"Experiment Viewed",Fe.segmentOptions.mobile=Fe.segmentOptions.mobile||{},Fe.segmentOptions.desktop=Fe.segmentOptions.desktop||{},void(He.isMobile()?(Fe.segmentOptions.enabled=t.parseBool(Fe.segmentOptions.mobile.enabled,!1),Fe.segmentOptions.reporthadImpOnly=t.parseBool(Fe.segmentOptions.mobile.reporthadImpOnly,!1)):(Fe.segmentOptions.enabled=t.parseBool(Fe.segmentOptions.desktop.enabled,!1),Fe.segmentOptions.reporthadImpOnly=t.parseBool(Fe.segmentOptions.desktop.reporthadImpOnly,!1))))}function l(){var e,n=Fe.inArticlePlacer||{};Fe.inArticlePlacer=n,e=ae.isMobile()?n.mobile=n.mobile||{}:n.desktop=n.desktop||{},t.extendObject(e,n),n.active=t.parseBool(e.active,!1),n.viewportMask=e.viewportMask||n.viewportMask,n.showLogo=t.parseBool(e.showLogo,!0),n.logoPosition=e.logoPosition||"bottom-left",n.watchBanner=t.parseBool(e.watchBanner,!1),n.objectFitFullSize=t.parseBool(e.objectFitFullSize,!0),n.watchFullLanguage=e.watchFullLanguage||"en"}function c(){return je||(je=Fe.inArticlePlacer&&Fe.inArticlePlacer.viewportMask?document.querySelector(Fe.inArticlePlacer.viewportMask):window),je}function u(e){je=e}function d(){Fe.errorReport=t.parsePercentValue(Fe.errorReport)}function p(){Fe.window=Fe.window||{},t.isArray(Fe.window)?h():(Fe.window.intervals=Fe.window.intervals||{},Ue=Fe.window.loadTimeout?parseInt(Fe.window.loadTimeout,10):0,Fe.window.topWindowReferrer=Fe.window.topWindowReferrer||!1)}function h(){for(var e=null,t=0;t<Fe.window.length;t++){var n=Fe.window[t],i=n.hasOwnProperty(a.WindowKeys.COMPATIBILITY);if(e||i){if(i&&He.checkPlacement(n[a.WindowKeys.COMPATIBILITY])){e=n;break}}else e=n}e&&(Fe.window=e)}function g(){Fe.filters&&(Fe.filter=Fe.filters),Fe.filter&&(He.isMobile()?(Fe.filter.mobile&&(Fe.filter=Fe.filter.mobile),Fe.filter.iPad&&He.isiPad()&&(Fe.filter=Fe.filter.iPad)):Fe.filter.desktop&&!He.isMobile()&&(Fe.filter=Fe.filter.desktop)),Fe.filter=Fe.filter||{},Fe.filter.scraper=Fe.filter.scraper||{},Fe.filter.scraper.white=Fe.filter.scraper.white||[],Fe.filter.scraper.black=Fe.filter.scraper.black||[],Fe.filter.placements=Fe.filter.placements||{},Fe.filter.placements.white=Fe.filter.placements.white||[],Fe.filter.placements.black=Fe.filter.placements.black||[],Fe.filter.inArticle=Fe.filter.inArticle||{},Fe.filter.inArticle.white=Fe.filter.inArticle.white||[],Fe.filter.inArticle.black=Fe.filter.inArticle.black||[],Fe.filter.blocking=Fe.filter.blocking||{},Fe.filter.blocking.white=Fe.filter.blocking.white||[],Fe.filter.blocking.black=Fe.filter.blocking.black||[],Fe.filter.exclude=Fe.filter.exclude||[]}function f(){Be.rezVideo||(Be.rezVideo={s:100,m:200,l:300})}function v(){Fe.scraper=Fe.scraper||{},Fe.scraper.checkInterval=parseInt(Fe.scraper.checkInterval||"3000"),Fe.scraper.eventsInterval=parseInt(Fe.scraper.eventsInterval||"250"),Fe.scraper.enableMobileReport=t.parseBool(Fe.scraper.enableMobileReport,!1),Fe.scraper.enableDesktopReport=t.parseBool(Fe.scraper.enableDesktopReport,!0),Fe.scraper.enableEventCollection=t.parseBool(Fe.scraper.enableEventCollection,!1),Fe.scraper.type2=t.parseBool(Fe.scraper.type2,!1)||!t.isProdEnv(),Fe.scraper.IAContainers=Fe.scraper.IAContainers||"emptySelector",Fe.scraper.players?t.isArray||(Fe.scraper.players=[Fe.scraper.players]):Fe.scraper.players=[],Fe.scraper.debug=Fe.scraper.debug||{},Fe.scraper.debug.immediateScraper=t.parseBool(e.debug,!t.isProdEnv()),Fe.scraper.allowedMeta=Fe.scraper.allowedMeta||[];for(var n=0;n<Fe.scraper.allowedMeta.length;n++){var i=Fe.scraper.allowedMeta[n];"string"==typeof i.content&&t.logWarning(i.content+" should be set as array")}}function m(){Fe.viewportAnalytics=Fe.viewportAnalytics||{},Fe.viewportAnalytics.percentage=parseInt(Fe.viewportAnalytics.percentage||"50",10)}function E(){Fe.viewportPercentage=parseInt(Fe.viewportPercentage||"1",10)}function y(){Fe.effects=Fe.effects||{},Fe.effects.apvTransitionVideo=Fe.effects.apvTransitionVideo||"opacity 0.5s ease-out"}function _(){Fe.reportMethod=a.ReportMethods.POST,Fe.beaconReportMethod=!!t.sendBeaconNative,Fe.canReportImmediately=Fe.beaconReportMethod&&!He.isEdge()}function S(){Fe.blockingDistance=Fe.blockingDistance||{};var e="undefined"!=typeof We;e?Fe.blockingDistance.active=We:Fe.blockingDistance.active=t.parseBool(Fe.blockingDistance.active,!0),Fe.blockingDistance.debug="production"!==Ge||t.parseBool(We),Fe.blockingDistance.viewportMaskEchoTime=Fe.blockingDistance.viewportMaskEchoTime||0,Fe.blockingDistance.viewportMaskEchoRepeat=Fe.blockingDistance.viewportMaskEchoRepeat||0,Fe.blockingDistance.epsilonPercentage?Fe.blockingDistance.epsilonPercentage=parseInt(Fe.blockingDistance.epsilonPercentage):Fe.blockingDistance.epsilonPercentage=10,Fe.blockingDistance.radiusMultiplier=parseFloat(Fe.blockingDistance.radiusMultiplier)||1.3,Fe.blockingDistance.staticBlockersSelector=Fe.blockingDistance.staticBlockersSelector||"emptyElement",Fe.blockingDistance.radius=parseFloat(Fe.blockingDistance.radius)||600}function A(){Fe.minuteEventListener=Fe.minuteEventListener||{mobile:{},desktop:{}},He.isMobile()?(Fe.minuteEventListener.reportCompatibilityOnly=t.parseBool(Fe.minuteEventListener.mobile.reportCompatibilityOnly,!0),Fe.minuteEventListener.VVCounterLimit=Fe.minuteEventListener.mobile.VVCounterLimit||99999,Fe.minuteEventListener.VVCounterTestLimit=Fe.minuteEventListener.mobile.VVCounterTestLimit||99999,Fe.minuteEventListener.active=t.parseBool(Fe.minuteEventListener.mobile.active,!1)):(Fe.minuteEventListener.reportCompatibilityOnly=t.parseBool(Fe.minuteEventListener.desktop.reportCompatibilityOnly,!0),Fe.minuteEventListener.VVCounterLimit=Fe.minuteEventListener.desktop.VVCounterLimit||99999,Fe.minuteEventListener.VVCounterTestLimit=Fe.minuteEventListener.desktop.VVCounterTestLimit||99999,Fe.minuteEventListener.active=t.parseBool(Fe.minuteEventListener.desktop.active,!1))}function I(){return ze}function b(){return"number"!=typeof ze&&(ze=ze.replace("MIN-","")),parseInt(ze)}function D(){return Fe.filter.scraper}function P(e){return e==a.Emitter.PRODUCT_IN_ARTICLE?Fe.filter.inArticle:Fe.filter.placements}function w(){return Fe.filter.exclude}function C(){return Fe.window.intervals}function T(){return Ue}function L(){return Fe.window.topWindowReferrer}function O(){return Be.rezVideo}function R(){return Fe.scraper.checkInterval}function k(){return ae.isMobile()?Fe.scraper.enableMobileReport:Fe.scraper.enableDesktopReport}function N(){return Fe.scraper.enableEventCollection}function V(){return Fe.scraper.eventsInterval}function M(){return Fe.scraper.debug}function U(){return Fe.scraper.type2}function F(){return Fe.scraper.IAContainers}function B(e){var n=Fe.scraper.players,i={};t.extendObject(i,{id:e});for(var r=0;r<n.length;r++)n[r].id!==e&&"undefined"!=typeof n[r].id||t.extendObject(i,JSON.parse(JSON.stringify(n[r])));return i}function x(){return Fe.viewportAnalytics.percentage}function W(){return Ke!==-1?Ke:Ke=parseInt(Fe.viewportAnalytics.timeSpan||"1",10)}function H(){return Fe.viewportPercentage}function z(){return Fe.blockingDistance.debug}function Y(){return Fe.blockingDistance.radiusMultiplier}function G(){return Fe.blockingDistance.staticBlockersSelector}function j(){return Ye}function K(){return Fe.optimizely}function q(){var e=t.isCurrentUrlFilterValid(Fe.filter.blocking),n=Fe.blockingDistance.active&&e;return n&&(e?t.log("Blocking Distance filter passed. Blocking Distance is ON"):t.log("Blocking Distance: Page doesn't comply with blocking distance filter")),n}function J(){return Fe.blockingDistance.epsilonPercentage}function Z(){return void 0!==e.test?parseInt(e.test):parseInt(Fe.testGroupSize||"10")}function X(){return Fe.effects.apvTransitionVideo}function Q(){return Fe.reportMethod}function $(){return Fe.beaconReportMethod}function ee(){return Fe.canReportImmediately}function te(){return Fe.placements||{}}function ne(){return Fe.tooltip||"Optimized by minute.ly"}function ie(){return Be.baseVideoUrl||""}function re(){return Fe.errorReport}function oe(){return Fe.inArticlePlacer.active}function se(){return Fe.inArticlePlacer.watchBanner}function le(){return Fe.inArticlePlacer.objectFitFullSize}function ce(){return Fe.inArticlePlacer.showLogo}function ue(){return Fe.inArticlePlacer.logoPosition}function de(){return Fe.maxApvsPerPage?parseInt(Fe.maxApvsPerPage):99999}function pe(){return Fe.minimumWidth}function he(){return Fe.validRatio}function ge(){return Fe.logoPosition}function fe(){return Fe.segmentOptions.enabled}function ve(){return Fe.segmentOptions}function me(){return Fe.segmentOptions.reporthadImpOnly}function Ee(){return Fe.blockingDistance.viewportMaskEchoTime}function ye(){return Fe.blockingDistance.viewportMaskEchoRepeat}function _e(){return Fe.scraper.allowedMeta}function Se(){return Fe.minuteEventListener.reportCompatibilityOnly}function Ae(){return Fe.minuteEventListener.VVCounterLimit}function Ie(){return Fe.minuteEventListener.VVCounterTestLimit}function be(){return Fe.minuteEventListener.active}function De(){return Fe.enableApvLoadReport}function Pe(){return Fe.renderModulus}function we(){return Fe.maniakRefs}function Ce(){return Fe.isLazyEnabled}function Te(){return He.isSafari()&&Fe.enableApvBlobByBrowser.safari||He.isFF()&&Fe.enableApvBlobByBrowser.firefox||He.isIE()&&Fe.enableApvBlobByBrowser.msie||He.isEdge()&&Fe.enableApvBlobByBrowser.edge||He.isChrome()&&Fe.enableApvBlobByBrowser.chrome}function Le(){return t.parseBool(Fe.checkForMissingDataActive,!0)}function Oe(){return t.parseBool(Fe.applyZIndexReorder,!0)}function Re(){return Fe.inArticlePlacer.watchFullLanguage}function ke(){return t.parseBool(Fe.isViewabilityIncDocHidden,!1)&&He.isMobile()}function Ne(){return t.parseBool(Fe.showLogo,!0)}function Ve(){return Fe.nflFrameDataRegex||"^(?:persistent-video-player|video-player|playaction-\\d+-)$"}function Me(){return Fe.blockingDistance.radius}var Ue,Fe={},Be={},xe={},We=null,He=null,ze=e._publisher,Ye=!0,Ge=null,je=null,Ke=-1;return{init:i,getPublisherId:I,getPublisherIdNumber:b,getWindowLoadTimeout:T,getFilterScraper:D,getFilterPlacements:P,getFilterExclude:w,getWindowIntervals:C,getIsTopWindowReferrerEnabled:L,getRezVideo:O,getScraperInterval:R,isScraperEnable:k,getScraperEventsInterval:V,getScraperDebug:M,getScraperPlayerById:B,getViewportAnalyticsPercentage:x,getViewportAnalyticsTimeSpan:W,getViewportPercentage:H,isPlacementsDebugEnabled:z,isScraperEnableEventCollection:N,getViewportMaskEchoTime:Ee,getViewportMaskEchoRepeat:ye,getIsAnalyticsEnabled:j,getOptimizely:K,isBlockingDistanceEnabled:q,getBlockingDistanceRadiusMultiplier:Y,getStaticBlockerSelector:G,getEpsilonPercentage:J,getTestGroupSize:Z,getEffectApvTransitionVideo:X,getReportMethod:Q,getBeaconReportMethod:$,getCanReportImmediately:ee,getTooltip:ne,getBaseVideoUrl:ie,getIsEnableErrorReport:re,getRelativePlacements:te,getMaxApvsPerPage:de,getMinimumWidth:pe,getValidRatio:he,getLogoPosition:ge,getAllowedMeta:_e,getScraperType2:U,getIAContainers:F,getRenderModulus:Pe,getManiakRefs:we,isLazyEnabled:Ce,isCheckForMissingDataActive:Le,shouldApplyZIndexReorder:Oe,isViewabilityIncDocHidden:ke,getShowLogo:Ne,isInArticlePlacerActive:oe,getInArticleViewportMask:c,setInArticleViewportMask:u,getInArticleShowLogo:ce,getInArticleLogoPosition:ue,isInArticleWatchBanner:se,isInArticleObjectFitFullSize:le,getWatchFullLanguage:Re,getReportCompatibilityOnly:Se,getVVCounterLimit:Ae,getVVCounterTestLimit:Ie,isMinuteEventListenerActive:be,isSegmentEnable:fe,getSegmentOptions:ve,getReportHadImpOnly:me,getIsApvLoadReportEnabled:De,getIsApvBlobEnabled:Te,getNflFrameDataRegex:Ve,getBlockingDistanceRadius:Me}},k=function(e,t,n,i){function r(e){var t=0;return 1==e&&(t=2),n.isMobile()&&t++,t}function o(e,t){return""+e.hltId+"_"+t}function a(e,n){var i=s(),r=o(e,n);if(!(i.indexOf(r)>-1)){for(;i.length>200;)i.shift();i.push(r),t.setItem(b,i.toString())}}function s(){var e=t.getItem(b);return e?e=e.split(","):[]}function l(e,t){for(var n=s(),i=0;i<n.length;i++)for(var r=n[i],a=0;a<e.length;a++){var l=o(e[a],t);if(l==r)return e[a]}return null}function c(t,n){for(var i=null,o=r(n),a=0;a<t.length;a++){var s=t[a];s.weights[o]&&(i&&e.logError("more than one hlt is set to product"),i=s)}return i}function u(e,t){var n=c(e,t);a(n,t)}function d(t,n){for(var i=0,r=0;r<t.length;r++){var o=t[r];i+=o.weights[A[I[n]]]}for(var a=Math.random(),s=0,l=0;l<t.length;l++){var o=t[l];if(s+=o.weights[A[I[n]]],a<s/i)return o}e.logWarning("shouldnt get here")}function p(e,t){switch(e.length){case 0:return null;case 1:return e[0]}var n=l(e,t);return n||(n=d(e,t)),n}function h(e,t){return e&&(e.weights=[0,0,0,0],e.weights[A[t]]=1),e}function g(e){return e.weights=e.weights.split(","),e.weights=e.weights.map(Number),e}function f(t){for(var n=[],i={},r=0;r<I.length;r++)i[I[r]]=[];for(var o=0;o<t.length;o++){var a=t[o];a=g(a);for(var s=0;s<I.length;s++){var l=A[I[s]];a.weights[l]>0&&i[I[s]].push(a)}}for(var r=0;r<I.length;r++){var c=p(i[I[r]],r);if(c){var u=e.cloneObject(c);u=h(u,I[r]),v(n,u)&&e.logError("shouldnt choose two of the exact same"),n.push(u)}}return n}function v(e,t){for(var n=Object.keys(t),i=0;i<e.length;i++){var r=!1,o=e[i];if(n.length===Object.keys(o).length){for(var a=0;a<n.length;a++){if(e[i][n[a]]!==t[n[a]]){r=!1;break}r=!0}if(r)return!0}}return!1}function m(e){return D?Math.floor(100*Math.random())+1:e}function E(t){if(0==t.length)return t;for(var n=0;n<t.length;n++){var i=t[n];i.rank&&(e.isArray(i.rank)?e.logWarning("BlockingD: should not run twice on rank param..."):i.rank=i.rank.split(","),i.rank=parseFloat(i.rank[A.REGULAR]),i.rank=m(i.rank))}return t}function y(t){var n=[];switch(t.length){case 0:e.logWarning("maybe should return empty object"),n=[];break;case 1:var i=g(t[0]);n=[i];break;default:n=f(t)}return n=E(n)}function _(t,n){for(var i=r(n),o=!1,a=0;a<t.length;a++){var s=t[a];if(s.weights[i]>0){if(0==!!s.vidUrl)continue;o&&e.logError("shouldnt be more than one highlight per product at this stage"),o=!0}}return o}function S(){D=Math.floor(100*Math.random())<i.getEpsilonPercentage(),D&&e.logWarning("BlockingD: This page is now Epsilon")}var A={};A.REGULAR=n.isDesktop()?0:1,A.IN_ARTICLE=n.isDesktop()?2:3;var I=Object.keys(A),b="ViewedHlts",D=!1;return{init:S,initActiveHighlights:y,setHighlightViewed:u,getHltByProduct:c,hasAPVByProduct:_}},N=function(e,t){function n(n){function i(){if(h=parseInt(_.id),y=_.articleUrl,f=e.parseBool(_.doesCollect),g=parseInt(_.minVidId),v=_.videoRatio?parseFloat(_.videoRatio):1.78,m=_.highlights,E=_.vidId,m&&e.isArray(m))for(var t=0;t<m.length;t++)m[t].vidUrl=S+m[t].vidUrl}function r(){return h}function o(e){return ve.hasAPVByProduct(m,e)}function a(){return y}function s(){return f}function l(){return E}function c(){return g}function u(){return m}function d(){return v}function p(){return!(!m.hltId||!m.vidUrl)}var h,g,f,v,m,E,y,_=e.cloneObject(n),S=t.getBaseVideoUrl();return i(),{getArticleId:r,getArticleUrl:a,getDoesCollect:s,getPublisherVideoId:l,getVideoDBId:c,getHighlights:u,getVideoRatio:d,hasAPVByProduct:o,isApvEnabled:p}}function i(e){return new n(e)}function r(e,t){return new n({id:Math.floor(1e5*Math.random()),doesCollect:!1,minVidId:Math.floor(1e5*Math.random()),vidId:t||Math.floor(1e6*Math.random()).toString(),highlights:[{hltId:Math.floor(1e4*Math.random()),vidUrl:"qa3-apv-static.snackly.co/videos/v-2bf2ee5b-7913-4553-23122-abae-63d202e97d48-s10.0-16.0",weights:"1, 1, 1, 1"}],articleUrl:e||"/2017/07/31/analyst-downgrades-facebook-predicts-nearly-20-percent-drop.html"},(!0))}return{create:i,createMock:r}},V=function(t,n,i,r,o){function s(e){var n=null;return function(){return null===n&&(n=e()),t.getOrigin(n)}}function l(e,t){return t+"_"+e}function c(e,t,n){e[t]?e[t].push(n):e[t]=[n]}function u(e){for(var n,i=0;i<e.length;i++)if(n=e[i],d(n)&&n.highlights&&0!=n.highlights.length&&(n.highlights=o.initActiveHighlights(n.highlights),0!==n.highlights.length)){var a=r.create(n);w.push(a);var s=l(a.getPublisherVideoId(),a.getArticleUrl());T[s]?t.logWarning("didn't add duplicate unifiedKey"):(c(C,a.getArticleUrl(),a),c(T,a.getArticleUrl(),a),c(T,s,a))}}function d(e){var i=L()+e.articleUrl;return!!e.articleUrl&&!!i&&"/"!==i&&t.isUrlFilterValid(i,n.getFilterScraper())}function p(n){D=n.videos||[],I=e.debugParams[m.ACTIVE_ALL]||e.debugParams[m.MINUTE_UI_TEST],t.log("VideoManager total original video count: "+D.length),u(D),t.log("VideoManager total videos for IA: "+Object.keys(T).length+" and Regulars: "+Object.keys(C).length)}function g(e){if(!v()){var n=e.videos||[];D=D.concat(n),t.log("VideoManager append total original video count: "+D.length),u(n,!0),t.log("VideoManager total valid video count: "+w.length),h.dispatchEvent(a.Events.VIDEOS_UPDATE)}}function f(){return P!==b}function v(){return I}function E(){return w.length}function y(e){return!!e&&(!!v()||!!T[e])}function _(e){if(e){var n=C[e];if(n||e!=t.urls.getCanonicalURL(e)&&t.logError("Please contact Daniel, weird behaviour"),n&&0!=n.length){if(1===n.length)return n[0];for(var i=void 0,r=0;r<n.length;r++){var o=n[r];if(o.hasAPVByProduct(a.Emitter.PRODUCT_APV)){if(i){t.logError("more than one video is set as featured/regular for url: "+e);break}i=o}}return i}}}function S(e,n){n=n||t.urls.getCurrentCanonicalURL();var i=l(e,n),r=T[i];return r&&0!==r.length?(r.length>1&&t.logError("Not suppose to get multiple publisher video id in the same Article Url."),r[0]):null}function A(e){return r.create({id:0,videoId:e,articleUrl:t.urls.getCurrentCanonicalURL(),doesCollect:!1,highlights:[]},!0)}var I,b=-2,D=[],P=b,w=[],C={},T={},L=s(t.urls.getLocationUrl);return{init:p,isDebug:f,appendVideos:g,isActiveAll:v,getArticlesListLength:E,getRegularArticleDataByURL:_,generateArticleData:A,hasInArticleArticleDataForUrl:y,getInArticleArticleData:S}},M=function(){function e(e){function t(){c.selectors=c.selectors||{}}function n(){return c.selectors.preview}function i(){return c.selectors.size||""}function r(){return c.selectors.anchor}function o(){return c.selectors.container}function a(){return c.selectors.viewportMask}function s(){return c.selectors.viewportObserver}function l(){return c.name}var c=e;return t(),{getPreviewSelector:n,getSizeSelector:i,getAnchorSelector:r,getContainerSelector:o,getName:l,getViewportMaskSelector:a,getViewportObserverSelector:s}}function t(t){return new e(t)}return{create:t}},U=function(e,t){function n(t){if(a=t.getRelativePlacements()||[],0===a.length)return void r.log("Configuration has NO PLACEMENTS!");for(var n=0;n<a.length;n++){var i=a[n];if(!i.selectors)return e.log("no selectors where set"),void(i.selectors={});i.selectors.preview=i.selectors.preview||"img",i.selectors.anchor=i.selectors.anchor||"a",i.selectors.click=i.selectors.click||"",s.push(o.create(i))}}function i(){return s}var r=e,o=t,a=[],s=[];return{init:n,getAllPlacements:i}},F=function(){function t(){r(),o(),c(),u(),g(),n()}function n(){window.addEventListener("visibilitychange",function(){p(a.Events.DomWindow.VISIBILITY_CHANGE)})}function i(e,t){var n=new s.utils.Debounce(t,p,null,e);n.enableFilter(),d(a.config.WindowIntervals.ECHO_TIME)&&n.setEcho(d(a.config.WindowIntervals.ECHO_TIME),d(a.config.WindowIntervals.ECHO_REPEAT)),window.addEventListener(e,function(e){n.start()},!0)}function r(){var e=new s.utils.Debounce(E,p,null,a.Events.DomWindow.SCROLL);e.enableFilter();var t;ae.isMobile()&&ae.isSafari()&&(t=new s.utils.Debounce(1e3,p,null,a.Events.DomWindow.SAFARI_FOCUS),t.enableFilter()),window.addEventListener(a.Events.DomWindow.FOCUS,function(n){e.start(),t&&t.start()})}function o(){var e=function(){h.dispatchEvent(a.Events.DomWindow.BLUR)};window.addEventListener?window.addEventListener(a.Events.DomWindow.BLUR,e,!1):window.attachEvent&&window.attachEvent(a.Events.DomWindow.BLUR,e)}function c(){v=d(a.config.WindowIntervals.RESIZE)||v,i(a.Events.DomWindow.RESIZE,v)}function u(){f=d(a.config.WindowIntervals.SCROLL)||f,e.debugParams[m.DEBUG_VISIBILITY]&&l.log("DEBUG_VISIBILITY: scroll is calculated relative to window"),i(a.Events.DomWindow.SCROLL,f)}function d(e){var t=he.getWindowIntervals()[e];return t?parseInt(t,10):null}function p(e,t){h.dispatchEvent(e,!!t)}function g(){(ae.isMobile||ae.isiPad())&&"undefined"!=typeof window.onorientationchange&&window.addEventListener(a.Events.DomWindow.ORIENTATION_CHANGE,function(){setTimeout(function(){p(a.Events.DomWindow.ORIENTATION_CHANGE,!0)},1e3)})}var f=100,v=50,E=50;return{init:t}}(),B=function(e,t){function n(){if(o.get("minFromCamp"))return void(a=!0);var e=document.referrer;if(!e)return void(a=!1);for(var t=document.createElement("a"),n=0;n<r.getManiakRefs().length;n++){var i=r.getManiakRefs()[n];if(t.href=e,t.host&&t.host.indexOf(i)>-1){o.set("minFromCamp",!0),a=!0;break}}}function i(){return a}var r=e,o=t,a=!1;return{init:n,isReferrerManiak:i}},x=function(t){function n(e,t){t||(t={});var n=t.callbackName||"void",i=t.onSuccess||d,r=t.onTimeout||d,o=window.setTimeout(function(){window[n]=d,r()},u);window[n]=function(e){window.clearTimeout(o),i(e),window[n]=function(){}};var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=e,document.getElementsByTagName("head")[0].appendChild(a)}function i(e){return("jsc"+l.b64EncodeUnicode(e||"JsonMinuteReadyNoURL")).replace(/=/g,"")}function r(e){return encodeURIComponent(l.b64EncodeUnicode(e))}function o(e){e.onSuccess=e.onSuccess||s,e.onTimeout=e.onTimeout||d;var t=f,o=e.pageUrl||l.urls.getCurrentCanonicalURL(),a=i(o),c={config:!1};t=t.replace(p,r(o)),t=t.replace(h,r(JSON.stringify(c))),t+="callback="+a,v.indexOf(o)>-1||(v.push(o),n(t,{callbackName:a,onTimeout:e.onTimeout,onSuccess:e.onSuccess}))}function s(e){me.appendVideos(e)}function c(e){e.onSuccess=e.onSuccess||d,e.onTimeout=e.onTimeout||d;var t=f,o=i(),a={fallback:!0,config:!1};t=t.replace(p,g),t=t.replace(h,r(JSON.stringify(a))),t+="callback="+o,n(t,{callbackName:o,onTimeout:e.onTimeout,onSuccess:e.onSuccess})}var u=t.isMobile()?1e4:5e3,d=function(){},p="[article_url]",h="[params]",g="_",f=e._publisherDebugUrl||a.Urls.Configuration+"api/v3/web/configuration/"+e._publisher+"/"+p+"/"+h+".json?",v=[];return{loadNextArticle:o,loadVideosFallback:c}},W=function(){function e(e){var t={};for(var i in e){var r="undefined"!=typeof n[i];if(r){var o=n[i];t[o]=e[i]}else t[i]=e[i]}return t}function t(e){var t={};for(var n in e){var i="undefined"!=typeof r[n];if(i){var o=r[n];t[o]=e[n]}else t[n]=e[n]}return t}var n={id:"a",highlight_id:"b",comp:"c",publisher:"d",hadImpression:"e",hadImpressionSession:"f",url:"g",script_time:"h",config_time:"i",event_time_from_genesis:"j",event_time_from_minute_genesis:"k",test_mode:"l",playMode:"m",sub_test_group:"n",source:"o",type:"p",placementFunction:"q",uniq:"r",product:"s",placement:"t"},i=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t},r=i(n);return{compress:e,extract:t}},H=function(e,t,n,i,r,o){function a(){return Math.floor(100*Math.random()+1)<=y}function s(){if(1==t.__minNoTestMode)return v=!1,ne.setItem(g,!1),void e.logWarning("Owl no test mode!");var i="undefined"!=typeof o;if(i){if("clear"!==o)return v="true"==o,n.set(g,!0),void e.log("Force test group: "+v);e.log("Force RESET test group"),n.reset()}else;v=l(a,g),m||(e.log("** Is Test Group: "+v),m=!0)}function l(e,t){var i=n.get(t);return void 0===i&&(i=e(),n.set(t,i)),i}function c(e,t){y=e,E=f.READY,s()}function u(){return E===f.READY}function d(){return v}function p(){return v===!0?"1":"0"}function h(){v=null,m=!1,E=f.NONE,y=null,n.reset()}var g="_minTestModeEnabled",f={NONE:0,PENDING:1,READY:2},v=null,m=!1,E=f.NONE,y=null;return{init:c,isReady:u,isTestGroup:d,getGroupCode:p,reset:h}},z=function(e,t,n,i,r,o,a){function s(){return Math.floor(100*Math.random()+1)<=_}function l(){if(1==t.__minNoTestMode)return m=!1,a.setItem(f,!1),void e.logWarning("Owl no test mode!");var n="undefined"!=typeof o;if(n){if("clear"!==o)return m="true"==o,a.setItem(f,!0),void e.log("Force test group: "+m);e.log("Force RESET test group"),a.removeItem(f)}else;m=c(),E||(e.log("** Is Test Group: "+m),E=!0)}function c(){var t=a.getItem(f);return"undefined"!=typeof t&&null!==t||(t=s(),a.setItem(f,t,e.calcDateNextMidnightUTC())),t}function u(e,t){_=e,y=v.READY,l()}function d(){return y===v.READY}function p(){return m}function h(){return m===!0?"1":"0"}function g(){m=null,E=!1,y=v.NONE,_=null,se.reset()}var f="testMode",v={NONE:0,PENDING:1,READY:2},m=null,E=!1,y=v.NONE,_=null;return{init:u,isReady:d,isTestGroup:p,getGroupCode:h,reset:g}},Y={SESSION:"session",DAILY:"daily"},G=function(e,t,n,i,r,o,a,s){function l(l){return l===Y.DAILY?new z(e,t,i,r,o,a,s):l===Y.SESSION?new H(e,t,n,r,o,a):void 0}return{create:l}},j=function(e,t){function n(){return{time:e.getTimeNow(),list:[]}}function i(){d=n(),o()}function r(){var n;d.time=e.getTimeNow(),n=JSON.stringify(d),n=n.replace(/"/g,""),t.setItem(u,n)}function o(){var e=t.getItem(u);d=e&&c.test(e)?a(e):d||n()}function a(e){var t,n=e.replace("time:",'"time":').replace("list:",'"list":');return n.indexOf("[]")===-1&&(n=n.replace("[",'["').replace("]",'"]'),t=n.split("["),t[1]=t[1].replace(/,/g,'","'),n=t.join("[")),JSON.parse(n)}function s(t){function n(){return o(),d.list.indexOf(a)>-1}function i(){d.time=e.getTimeNow(),d.list.indexOf(a)>-1&&e.logError("Duplicated key in Usher! _key: "+a),d.list.push(a),r()}var a=t;return{isSent:n,setAnalyticState:i}}function l(e,t,n,i,r){var o=e.toString()+t+n+(i?"t":"f")+r;return new s(o)}var c=/{(time):\d+,(list):\[([\d\w,]*)+]}/,u="sessionUniqs",d={};return{get:l,init:i}},K=function(t,n,i,r,o,s){function l(e){g=n.isTestGroup(),h=i.isMobile(),f=r.getIsAnalyticsEnabled(),m=e}function c(e,n){(f||n)&&(o.send(a.Emitter.ANALYTICS_EVENT,e),o.send(a.Emitter.VIEWPORT,t.cloneObject(e)))}function u(e,t,n){var i=s.get(e.getArticleId(),t.placementFunction,a.Emitter.CLICK_TYPE_NONE,g,n);i.isSent()||(c(t),i.setAnalyticState())}function d(e){var n={test_mode:g,playMode:2,source:i.getAnalyticsSource()};return t.extendObject(n,e)}function p(n,r,o){var a=o&&o.getBelongToUrl()||t.urls.getCurrentCanonicalURL(),s={id:n.getArticleId(),highlight_id:o.getHighlightId(),comp:i.isBrowserSupported()?1:0,publisher:e._publisher,hadImpression:m.hadImpression(n.getPublisherVideoId()),hadImpressionSession:m.hadImpressionSession(),url:a,script_time:v.getScriptTime(),config_time:v.getConfigTime(),event_time_from_genesis:v.getTimeFromGenesis(),event_time_from_minute_genesis:v.getTimeFromMinuteGenesis()};return t.extendObject(s,d(r))}var h,g=null,f=!1,m=null;return{init:l,pushAnalytics:c,sendSessionImpression:u,getAnalyticPayload:d,getAnalyticPayloadWithArticleData:p}},q=function(){function e(e){var t=e.getArticleData();t&&(r(t.getArticleId()),g(t,{type:a.Emitter.ANALYTICS_CLICK_EVENT,uniq:!1,placementFunction:a.Placements.HOVER_IMPRESSION,product:e.getProduct(),placement:e.getName()},!1,e),h.dispatchEvent(a.Events.REGULAR_CLICK,e))}function t(t,n){if(!(n.hasDisposed()||E.indexOf(t)>-1)){var i=new s.utils.MouseClickEventObserver(t,function(){e(n)});n.onDisposed().addOnce(function(){setTimeout(i.dispose.bind(i),2e3)}),o(n,t),E.push(t)}}function n(e){for(var n=l.cloneArray(e.getClickElements()),i=0;i<n.length;i++){var r=n[i];t(r,e)}t(e.getContainerElement(),e)}function i(e){e.getManualClick()&&t(e.getManualClick(),e)}function r(e){m>0&&(clearTimeout(m),m=0,ye.removeLogDelayById(e))}function o(e,t){var n=new s.utils.ContextMenuObserver(e,t);n.addEventListener("contextMenuOpen",f),n.addEventListener("contextMenuHandleOpen",u)}function c(e){r(e),m=setTimeout(function(){r(e)},v)}function u(e){var t=e.data,n=t.getArticleData();c(n.getArticleId());var i=t.getProduct(),r=Ae.getAnalyticPayloadWithArticleData(n,{type:a.Emitter.CONTEXT_MENU_OPEN_EVENT,placementFunction:a.Placements.HOVER_IMPRESSION,uniq:!1,product:i},t);ye.logDelay(r)}function d(t){t.hasDisposed()||t.getDomAdapter().addEventListener(a.Events.APV_LOGO_CLICK,function(n){e(t)})}function p(){var e=me.getRegularArticleDataByURL(l.urls.getCurrentCanonicalURL());e&&ye.sendLogDelayById(e.getArticleId())}function g(e,t,n,i){var r=t.product||0,o=r===a.Emitter.PRODUCT_IN_ARTICLE;if(i||(i=be.getApvDataByKeyProduct(e.getPublisherVideoId(),r)),(o||n||he.getCanReportImmediately())&&h.dispatchEvent(a.Events.INARTICLE_CLICK,i),be.getShouldSendClickEvent(i)){var s=Ae.getAnalyticPayloadWithArticleData(e,t,i);ye.log(s)}be.setClickAlreadySent(i)}function f(e){var t=e.data;ye.removeLogDelayById(t.getArticleData().getArticleId())}var v=6e4,m=0,E=[];return{addLinkSelector:n,addLogoClickListener:d,sendDelayedClicks:p,addManualAnchor:i,sendClick:g}}(),J=function(){function t(t){var n={id:e._publisher,user_agent:navigator.userAgent,uniq:t,test_mode:pe.isTestGroup(),url:l.urls.getCurrentCanonicalURL(),referrer:document.referrer.substr(0,200),source:ae.getAnalyticsSource(),
comp:ae.isBrowserSupported(),stor:!!te.getLocalStorageInstance(),script_time:v.getScriptTime(),config_time:v.getConfigTime(),event_time_from_genesis:v.getTimeFromGenesis(),event_time_from_minute_genesis:v.getTimeFromMinuteGenesis()};le.send(a.Emitter.URL_REPORT,l.cloneObject(n)),t&&(n.uniq=!1,le.send(a.Emitter.URL_REPORT,n)),h.dispatchEvent(a.Events.CLIENT_INIT_ANALYTICS)}function n(){i=!1,se.get(r)||(se.set(r,!0),i=!0),t(i)}var i,r="minSessionSent";return{sendUrlReport:n}}(),Z=function(t,n,i,r,o,s,l,c,u){function d(){var r={id:e._publisher,user_agent:navigator.userAgent,test_mode:n.isTestGroup(),url:t.urls.getCurrentCanonicalURL(),referrer:document.referrer.substr(0,200),source:i.getAnalyticsSource(),comp:i.isBrowserSupported(),stor:!0,script_time:s.getScriptTime(),config_time:s.getConfigTime(),event_time_from_genesis:s.getTimeFromGenesis(),event_time_from_minute_genesis:s.getTimeFromMinuteGenesis(),daily_user:l.getUserId()};le.send(a.Emitter.DAILY_USER,r)}function p(){var e=!!r.getItem(a.StorageSubKeys.dailyUser);e||(d(),r.setItem(a.StorageSubKeys.dailyUser,!0,t.calcDateNextMidnightUTC()),h.dispatchEvent(a.Events.DAILY_USER))}return{start:p}};!function(){function e(){this._observedElements=[]}var t;s.analytics=s.analytics||{};var n={INIT:0,IN_VIEWPORT:1,OUT_VIEWPORT:2,DONE:3};s.analytics.ViewportAnalyticsService=e,e.prototype.init=function(){var e=this;t=he.getViewportAnalyticsPercentage(),h.addEventListener(a.Events.DomWindow.RESIZE,function(){e._debounceStartAll()}),h.addEventListener(a.Events.DomWindow.SCROLL,function(){e._debounceStartAll()}),e._debounceStartAll()},e.prototype.register=function(e){e.getDomAdapter().addEventListener(a.Events.Element.READY,this.addObservedElement,this),e.getDomAdapter().addEventListener(a.Events.Element.MUTANT,this.notifyVisibleFromMutant,this),e.onDisposed().addOnce(this.unregister,this)},e.prototype.unregister=function(e){e.getDomAdapter().removeEventListener(a.Events.Element.READY,this.addObservedElement,this),e.getDomAdapter().removeEventListener(a.Events.Element.ANALYTICS_VISIBLE,this.handleDomAdapterViewportEvent,this),e.getDomAdapter().removeEventListener(a.Events.Element.MUTANT,this.notifyVisibleFromMutant,this),this.removeSubjectByApvData(e)},e.prototype.addObservedElement=function(e){var t=e.data,i=pe.isTestGroup()?t.apvData.getElementToReplace():t.apvData.getApvPlayer().getApvElement(),r={};r.id=t.apvData.getUniqId(),r.articleData=t.apvData.getArticleData(),r.elem=i,r.product=t.apvData.getProduct(),r.apvData=t.apvData,r.viewportMaskElement=t.apvData.getViewportMaskElement(),r.state=n.INIT;for(var o=!1,l=0;l<this._observedElements.length;l++)if(this._observedElements[l].id===t.apvData.getUniqId()){this._observedElements[l]=r,o=!0;break}o||this._observedElements.push(r),this.attachClickListeners(r.apvData),r.debounce=new s.utils.Debounce(he.getViewportAnalyticsTimeSpan(),this._handleObservedElementDebounce,this,r),r.debounce.enableFilter(),r.apvData.getDomAdapter().addEventListener(a.Events.Element.ANALYTICS_VISIBLE,this.handleDomAdapterViewportEvent.bind(this))},e.prototype.removeSubjectByApvData=function(e){for(var t=0;t<this._observedElements.length;t++){var n=this._observedElements[t];if(e.getUniqId()===n.id){n.apvData=null,n.articleData=null,n.viewportMaskElement=null,n.elem=null,n.debounce.kill(),n.debounce=null,this._observedElements.splice(t,1);break}}},e.prototype.handleDomAdapterViewportEvent=function(e){var t=e.data.apvData,n=e.data.percentsVisible>=he.getViewportAnalyticsPercentage();this.notifyVisible(t,n)},e.prototype._debounceStartAll=function(){for(var e=0;e<this._observedElements.length;e++){var t=this._observedElements[e];t.debounce.start()}},e.prototype.notifyVisible=function(e,t){for(var n=0;n<this._observedElements.length;n++){var i=this._observedElements[n];if(i.apvData===e)return i.isVisible=t,void i.debounce.start()}},e.prototype.notifyVisibleFromMutant=function(e){var t=this;setTimeout(function(){t.notifyVisible(e.data.apvData)},e.data.timeout)},e.prototype._handleObservedElementDebounce=function(e){this.doUpdate(e)&&he.getViewportAnalyticsTimeSpan()>=0&&setTimeout(this.doUpdate.bind(this,e,!0),he.getViewportAnalyticsTimeSpan())},e.prototype.doUpdate=function(e,t){var i,r=!document.hasFocus()&&document.hidden&&he.isViewabilityIncDocHidden();return i=!(!l.isIFrame()&&!document.hasFocus()||r)&&e.isVisible,(!e.apvData||!e.apvData.hasDisposed())&&(i?this._handleVisible(e,!!t):e.state=n.OUT_VIEWPORT,i)},e.prototype._handleVisible=function(e,t){switch(e.state){case n.IN_VIEWPORT:t&&(this._inViewport(e),e.state=n.DONE);break;case n.INIT:case n.OUT_VIEWPORT:e.state=n.IN_VIEWPORT}},e.prototype._inViewport=function(e){e.apvData&&e.apvData.getShouldSendImpression()&&this.sendImpression(e)},e.prototype.sendImpression=function(e){this.setHadImpressionSession(),e.apvData.setImpressionHasSent();var t=Ae.getAnalyticPayloadWithArticleData(e.articleData,{type:a.Emitter.ANALYTICS_IMPRESSION_EVENT,placementFunction:a.Placements.VIEWPORT_IMPRESSION,uniq:!1,product:e.apvData.getProduct(),placement:e.apvData.getName(),script_time:v.getScriptTime(),config_time:v.getConfigTime()},e.apvData);Ae.pushAnalytics(t),be.setImpressionSent(e.apvData),this.sendSessionImpression(e),ve.setHighlightViewed(e.apvData.getHighlights(),e.apvData.getProduct()),h.dispatchEvent(a.Events.IMPRESSION)},e.prototype.sendSessionImpression=function(e){var t=e.apvData.getProduct(),n=Ae.getAnalyticPayloadWithArticleData(e.articleData,{type:a.Emitter.ANALYTICS_IMPRESSION_EVENT,placementFunction:a.Placements.VIEWPORT_IMPRESSION,uniq:!0,product:t,placement:e.apvData.getName(),script_time:v.getScriptTime(),config_time:v.getConfigTime()},e.apvData);Ae.sendSessionImpression(e.articleData,n,t)},e.prototype.attachClickListeners=function(e){if(!be.getIsClickRegistered(e)){switch(e.getProduct()){case a.Emitter.PRODUCT_APV:q.addLogoClickListener(e)}q.addManualAnchor(e),q.addLinkSelector(e),be.setIsClickRegistered(e,!0)}},e.prototype.hadImpression=function(e){for(var t=0;t<this._observedElements.length;t++){var n=this._observedElements[t],i=n.articleData.getPublisherVideoId()===e;if(i&&n.apvData.getDidImpressionSent()&&n.apvData.getProduct()===a.Emitter.PRODUCT_IN_ARTICLE)return!0}return!1},e.prototype.hadImpressionSession=function(){return l.parseBool(ne.getItem(a.StorageSubKeys.hadImp))},e.prototype.setHadImpressionSession=function(){ne.setItem(a.StorageSubKeys.hadImp,!0)}}();var X=function(){function e(){return JSON.parse(localStorage.getItem(a)||"{}")}function t(e,t){d[e]=t;var n=JSON.stringify(d);localStorage.setItem(a,n)}function n(e,t,n,i){var r=t.exec(e);if(o.isArray(r)){var a=r[1],s=r[2];if(a.indexOf(n)>-1){var l=a.substring(n.length);i(l,s||void 0)}}}function i(e,t){return new p(e,t)}var r=null,o=null,a="__mff__",s="+mff",l="-mff",c=/[^#]*#(\+\w+)=(.*)/g,u=/[^#]*#(-\w+)/g,d={},p=function(i,a){o=i,a&&(r="string"==typeof a?a:o.appendDebugMffHashData(a.href),d=e(),n(r,c,s,function(e,n){t(e,n)}),n(r,u,l,function(e){t(e,void 0)}))};return p.prototype.get=function(e){return d[e]},p.prototype.CONSTS={DISABLE_VERSION:"disableVersion",FORCE_ENABLE:"forceEnable",REPORT_CONSOLE_LOGGER:"reportConsoleLogger"},{create:i}}();!function(){s.publisher.utils=s.publisher.utils||{};var e=s.publisher.utils;e.getIAContainers=function(){for(var e=document.querySelectorAll(".ndms_video_player"),t=[],n=0;n<e.length;n++)e[n].offsetParent&&t.push(e[n]);return t}}(),function(){function e(){function e(e){var t=e.getSubType?e.getSubType():s.scrap.player.SubTypes.DEFAULT;o[e.getType()]=o[e.getType()]||{},o[e.getType()][t]=e}function t(e){var t=Object.values(s.scrap.PlayersNameEnum);if(t.indexOf(e.getName())!=-1){var n=e.getSubType?e.getSubType():s.scrap.player.SubTypes.DEFAULT;o[e.getType()]=o[e.getType()]||{},o[e.getType()][n]=e}}function n(e,t){return o[e]&&o[e][t||s.scrap.player.SubTypes.DEFAULT]}function i(){return o}function r(){return Object.keys(o)}var o={};return{addItem:e,addDetector:t,getItem:n,getAllItemTypes:r,getAllRegisterdItem:i}}s.scrap=s.scrap||{},s.scrap.utils=s.scrap.utils||{},s.scrap.player=s.scrap.player||{},s.scrap.detector=s.scrap.detector||{},s.scrap.driver=s.scrap.driver||{},s.scrap.picker=s.scrap.picker||{},s.scrap.plugin=s.scrap.plugin||{},s.scrap.utils.defineError=function(e,t,n){n=n?" "+n:"",l.logError("Scraper "+(e?"'"+e.getName()+"' ":"")+"'"+t+"' Not Defined."+n)},s.scrap.PlayersNameEnum=JSON.parse('{"STREAMSRC":"VideoJSStreamSrc"}'),s.scrap.PlayerEnum={DEFAULT:0,Flowplayer:1,OOYALA:2,YOUTUBE:6,Jwplayer:8,VideoJSIFrame:12,VideoJS:13,Edge:17,ThePlatformFoxSports:26,ThePlatformBravo:29,NFL:32,ThePlatformCnbc:33,CINCOPA:34,VjsNew:36,Channel10:37,MLB:39,CBSsports:40,DEFAULT_99:99};var t=s.scrap.ScrapPlugin={VIDEO_VIEW:1,VISUAL_CLICKS:3,PLAYER_CONTENT_CHANGED:5,OPTIMIZELY:6,PLAYER_FOUND:7,PLACEHOLDER_FOUND:8,PLAYER_VIDEO_CHANGED:9};s.scrap.ScrapPluginAll=[t.VIDEO_VIEW,t.VISUAL_CLICKS,t.PLAYER_FOUND,t.PLACEHOLDER_FOUND,t.PLAYER_VIDEO_CHANGED],s.scrap.player.SubTypes={DEFAULT:"default"},s.scrap.driver={},s.scrap.driver.PlayerAction={NONE:"none",PLAYING:"playing",PAUSED:"paused",BUFFERING:"buffering",ERROR:"error",ENDED:"ended",SEEK_START:"seekStart",SEEK_END:"seekEnd",VOLUME_CHANGE:"volume",MUTE_CHANGE:"mute",FULLSCREEN:"fullscreen",NEW_VIDEO:"newVideo",REPLAY:"replay",FOCUS:"focus"},s.scrap.utils={},s.scrap.utils.roundValue=function(e){return Math.round(1e3*e)/1e3},s.scrap.consts={VOLUME_EMPTY:-2,TIME_EMPTY:-1},s.scrap.factory=function(){var t=new e,n=new e,i=new e,r=new e;return{addPlugin:i.addItem,getPlugin:i.getItem,addDetector:t.addDetector,getDetector:t.getItem,getAllRegisterdDetectors:t.getAllRegisterdItem,addDriver:n.addItem,getDriver:n.getItem,addPicker:r.addItem,getPicker:r.getItem,getAllRegisterdPickers:r.getAllRegisterdItem}}()}(),function(){function e(){}var t=s.scrap.utils.defineError;e.shouldRun=function(){return!0},e.prototype.getType=function(){t(null,"getType")},e.prototype.setPlayerCollection=function(e){},e.prototype.addDriver=function(e){},s.scrap.plugin.Base=e}(),function(){function e(){e.__superCtor__.call(this),this._driverList=[],this._isEnabled=!0}l["extends"](e,s.scrap.plugin.Base),e.getType=function(){return s.scrap.ScrapPlugin.OPTIMIZELY},e.getName=function(){return"Optimizely"},e.prototype.getType=function(){return e.getType()},e.prototype.addDriver=function(e){this._isEnabled&&(this._driverList.push(e),e.onVideoView().add(this.handleVideoView,this))},e.prototype.handleVideoView=function(e){function t(){h.dispatchEvent(a.Events.FIRST_VIDEO_VIEW),n._isEnabled=!1,n._driverList.forEach(function(e){e.onVideoView().remove(n.handleVideoView,n)})}var n=this;he.getOptimizely().vvFlag?t():e.hadImpression&&t()},s.scrap.plugin.Optimizely=e,s.scrap.factory.addPlugin(e)}(),function(){function e(){this._playerOnHold={},h.addEventListener(a.Events.VIDEOS_UPDATE,this.handleVideosUpdate.bind(this))}l["extends"](e,s.scrap.plugin.Base),e.getType=function(){return s.scrap.ScrapPlugin.PLACEHOLDER_FOUND},e.getName=function(){return"PlaceholderFound"},e.prototype.getType=function(){return e.getType()},e.prototype.setPlayerCollection=function(e){e.onPlayerPlaceholderFound().add(this.handleDetector_PlayerPlaceholderFound,this)},e.prototype.handleVideosUpdate=function(){for(var e=Object.keys(this._playerOnHold),t=0;t<e.length;t++){var n=e[t],i=this._playerOnHold[n];i&&me.hasInArticleArticleDataForUrl(i.url)&&(this.sendEvent(i),this._playerOnHold[n]=null)}},e.prototype.handleDetector_PlayerPlaceholderFound=function(e){var t=me.getInArticleArticleData(e.videoId,e.url);t?this.sendEvent(e):(l.log("Player Placeholder found - WAITING for ArticleData:"),l.logObject(e),this._playerOnHold[e.videoId]=e)},e.prototype.sendEvent=function(e){var t=me.getInArticleArticleData(e.videoId,e.url);return t?(l.log("Player Placeholder Found - READY:"),l.logObject(e),void h.dispatchEvent(a.Events.PLAYER_PLACEHOLDER_FOUND,{container:e.element,playerJS:e.playerJS,videoId:e.videoId,articleUrl:e.url,articleData:t})):(l.log("Player Placeholder Found - does NOT have correct Video ID:"),void l.logObject(e))},s.scrap.plugin.PlaceholderFound=e,s.scrap.factory.addPlugin(e)}(),function(){function e(){this._playerOnHold={},h.addEventListener(a.Events.VIDEOS_UPDATE,this.handleVideosUpdate.bind(this))}l["extends"](e,s.scrap.plugin.Base),e.getType=function(){return s.scrap.ScrapPlugin.PLAYER_FOUND},e.getName=function(){return"PlayerFound"},e.prototype.getType=function(){return e.getType()},e.prototype.setPlayerCollection=function(e){e.onPlayerInstanceFound().add(this.handleDetector_PlayerInstanceFound,this)},e.prototype.handleVideosUpdate=function(){for(var e=Object.keys(this._playerOnHold),t=0;t<e.length;t++){var n=e[t],i=this._playerOnHold[n];i&&me.hasInArticleArticleDataForUrl(i.url)&&(this.sendEvent(i),this._playerOnHold[n]=null)}},e.prototype.handleDetector_PlayerInstanceFound=function(e){var t=me.getInArticleArticleData(e.videoId,e.data.url);t?this.sendEvent(e):(l.log("Player Found - WAITING for articleData:"),l.logObject(e),this._playerOnHold[e.playerId]=e)},e.prototype.sendEvent=function(e){var t=me.getInArticleArticleData(e.videoId,e.url);return t?(l.log("Player Found - READY:"),l.logObject(e),void h.dispatchEvent(a.Events.PLAYER_FOUND,{container:e.playerPlaceholder,playerJS:e.playerJS,videoId:e.videoId,articleUrl:e.url,autoplay:e.isPlayerStarted,articleData:t})):(l.log("Player Found - does NOT have correct Video ID:"),void l.logObject(e))},s.scrap.plugin.PlayerFound=e,s.scrap.factory.addPlugin(e)}(),function(){function e(){}l["extends"](e,s.scrap.plugin.Base),e.getType=function(){return s.scrap.ScrapPlugin.PLAYER_VIDEO_CHANGED},e.getName=function(){return"PlayerVideoChanged"},e.prototype.getType=function(){return e.getType()},e.prototype.addDriver=function(e){e.onPlayerVideoChanged().add(this.handleDriver_PlayerVideoChanged,this)},e.prototype.handleDriver_PlayerVideoChanged=function(e){h.dispatchEvent(a.Events.PLAYER_VIDEO_CHANGED,{container:e.scrapData.playerPlaceholder,playerJS:e.scrapData.playerJS,articleUrl:e.scrapData.url,videoId:e.scrapData.videoId,newVideoId:e.videoId})},s.scrap.plugin.PlayerVideoChanged=e,s.scrap.factory.addPlugin(e)}(),function(){function t(){t.__superCtor__.call(this),this._driverList=[]}l["extends"](t,s.scrap.plugin.Base),t.getType=function(){return s.scrap.ScrapPlugin.VIDEO_VIEW},t.getName=function(){return"VideoViews"},t.prototype.getType=function(){return t.getType()},t.prototype.addDriver=function(e){this._driverList.push(e),e.onVideoView().add(this.handleVideoView,this)},t.prototype.handleVideoView=function(t){h.dispatchEvent(a.Events.PLAYER_PLAYING,{videoId:t.videoId,counter:t.counter});var n={url:t.url,vid:t.videoId,test_mode:pe.getGroupCode(),comp:ae.isBrowserSupported()?1:0,source:ae.getAnalyticsSource(),publisher:e._publisher,hadImpression:t.hadImpression,hadImpressionSession:De.hadImpressionSession(),counter:t.counter,script_time:v.getScriptTime(),config_time:v.getConfigTime()};le.send(a.Emitter.VIDEO_VIEWS,n)},s.scrap.plugin.VideoViews=t,s.scrap.factory.addPlugin(t)}(),function(){function e(){this._onPlayerInstanceFound=new s.utils.Signal,this._onPlayerFeaturedInstanceFound=new s.utils.Signal,this._onPlayerPlaceholderFound=new s.utils.Signal,this._onContainerPlaceholderList=new s.utils.Signal,this._detectorList=[],this._pickerList=[],this._counter=0,this._scraperTimer=null}s.scrap.DetectorsCollector=e,e.prototype.onPlayerInstanceFound=function(){return this._onPlayerInstanceFound},e.prototype.onPlayerFeaturedInstanceFound=function(){return this._onPlayerFeaturedInstanceFound},e.prototype.onContainerPlaceholderList=function(){return this._onContainerPlaceholderList},e.prototype.onPlayerPlaceholderFound=function(){return this._onPlayerPlaceholderFound},e.prototype.init=function(){this.initPlayers(),this.initPicker(),this.startTimer(),this.detectNewPlayers()},e.prototype.initPlayers=function(){for(var e,t,n=s.scrap.factory.getAllRegisterdDetectors(),i=Object.keys(n),r=0;r<i.length;r++)e=s.scrap.factory.getDetector(i[r]),t=new e,t.onPlayerInstanceFound().add(this.handleDetector_PlayerInstanceFound,this),t.onPlayerPlaceholderFound().add(this.handleDetector_PlayerPlaceholderFound,this),t.onContainerPlaceholderList().add(this.handleDetector_ContainerPlaceholderList,this),this._detectorList.push(t);0===this._detectorList.length&&l.log("No scrapers found to initialize.")},e.prototype.initPicker=function(){if(l.validateScraperURL()){for(var e,t=s.scrap.factory.getAllRegisterdPickers(),n=Object.keys(t),i=0;i<n.length;i++)e=s.scrap.factory.getPicker(n[i]),this.createPicker(e);0===this._pickerList.length&&(this.createPicker(s.scrap.picker.Base),l.log("No picker found to initialize - using Base"))}},e.prototype.addDriver=function(e){for(var t=0;t<this._pickerList.length;t++){var n=this._pickerList[t];n.addDriver(e)}e.onDisposed().addOnce(this.handleDriver_Disposed,this)},e.prototype.createPicker=function(e){var t=new e;t.setPlayerCollection(this),t.onPlayerFeaturedInstanceFound().add(this.handlePicker_PlayerFeaturedInstanceFound,this),this._pickerList.push(t)},e.prototype.handleDetector_PlayerInstanceFound=function(e){e.index=this._counter,this._onPlayerInstanceFound.dispatch(e),this._counter++},e.prototype.handleDetector_PlayerPlaceholderFound=function(e){this._onPlayerPlaceholderFound.dispatch(e)},e.prototype.handlePicker_PlayerFeaturedInstanceFound=function(e){this._onPlayerFeaturedInstanceFound.dispatch(e)},e.prototype.handleDetector_ContainerPlaceholderList=function(e){this._onContainerPlaceholderList.dispatch(e)},e.prototype.handleDriver_Disposed=function(e){for(var t=0;t<this._detectorList.length;t++){var n=this._detectorList[t];n.playerDisposed(e.getID())}},e.prototype.startTimer=function(){this._scraperTimer=new s.utils.Timer(he.getScraperInterval(),this.detectNewPlayers,this),this._scraperTimer.setCounterLimit(),this._scraperTimer.start()},e.prototype.detectNewPlayers=function(){for(var e=0;e<this._detectorList.length;e++){var t=this._detectorList[e];t.detectNewPlayers()}}}(),function(){function e(e){this._detectorCollection=e,this._pluginHash=[],this._init()}s.scrap.PluginsCollector=e,e.prototype.addDriver=function(e){for(var t=0;t<this._pluginHash.length;t++){var n=this._pluginHash[t];n.addDriver(e)}},e.prototype._init=function(){for(var e=0;e<s.scrap.ScrapPluginAll.length;e++){var t=s.scrap.factory.getPlugin(s.scrap.ScrapPluginAll[e]);if(t)if(!t.shouldRun||t.shouldRun()){var n=new t;n.setPlayerCollection(this._detectorCollection),this._pluginHash.push(n)}else l.log("Plugin "+(t.getName()||t.getType())+" is not running.")}}}(),function(){function e(){e.__superCtor__.call(this),this._driverHash={},this._detectorCollection=new s.scrap.DetectorsCollector,this._detectorCollection.onPlayerInstanceFound().add(this.handleDetector_PlayerInstanceFound,this),this._detectorCollection.init(),this._pluginsCollection=new s.scrap.PluginsCollector(this._detectorCollection),s.scrap.startUrlTracker(this._detectorCollection)}l["extends"](e,o),e.prototype.handleDetector_PlayerInstanceFound=function(e){this._driverHash[e.playerId]||this.createScrapDriver(e)},e.prototype.handleDriver_Disposed=function(e){this._driverHash[e.getID()]=void 0},e.prototype.createScrapDriver=function(e){var t=s.scrap.factory.getDriver(e.driverType,e.driverSubType);if(!t)return void l.log("No driver exist for player Type: "+e.driverType+", SubType: "+(e.driverSubType||s.scrap.player.SubTypes.DEFAULT));var n=me.getInArticleArticleData(e.videoId,e.url),i=new t;i.setArticleData(n),i.setScrapData(e),this._pluginsCollection.addDriver(i),this._driverHash[e.playerId]=i,i.onDisposed().addOnce(this.handleDriver_Disposed,this),this._detectorCollection.addDriver(i),i.init()},s.scrap.ScraperService=e}(),function(){function e(e){this._sessionId=l.generateUID(),this._apvId=e.getArticleId(),this._minVidId=e.getVideoDBId(),this._queue=[],this._interactionId=0,this._debounce=new s.utils.Debounce(t,this.sendInteraction,this)}var t=2e3;s.scrap.InteractionCollector=e,e.prototype.log=function(e){this._queue.push(e),this._debounce.start()},e.prototype.sendInteraction=function(){0!==this._queue.length&&(le.send(a.Emitter.STATS_EVENT,{session_id:this._sessionId,interaction_id:this._interactionId,apv_id:this._apvId,min_vid_id:this._minVidId,events:this._queue}),l.log("*** Player Interaction: "+JSON.stringify(this._queue)),this._queue=[],this._interactionId++)}}(),function(){function e(e){this._collector=new s.scrap.InteractionCollector(e)}var t=s.scrap.utils.roundValue;s.scrap.EventsDataCollector=e,e.prototype.init=function(e,n,i,r){var o={};o.clientTimestamp=e,o.initVol=t(n),o.isMute=i?1:0,o.isAutoPlay=r?1:0,this._collector.log({init:o})},e.prototype.pause=function(e){var n={};n.second=t(e),this._collector.log({pause:n})},e.prototype.pauseDuration=function(e,n){var i={};i.second=t(e),i.duration=t(n),this._collector.log({pauseDuration:i})},e.prototype.play=function(e){var n={};n.second=t(e),this._collector.log({play:n})},e.prototype.watched=function(e,n){var i={};n>1&&(i.second=t(e),i.duration=t(n),this._collector.log({watched:i}))},e.prototype.startBuffering=function(e){var n={};n.second=t(e),this._collector.log({buffer:n})},e.prototype.bufferDuration=function(e,n){var i={};i.second=t(e),i.duration=t(n),this._collector.log({bufferDuration:i})},e.prototype.seek=function(e,n){var i={};i.from=t(e),i.to=t(n),this._collector.log({seek:i})},e.prototype.fullscreen=function(e,n){var i={};i.second=t(e),i.status=n?1:0,this._collector.log({fullscreen:i})},e.prototype.mute=function(e,n){var i={};i.second=t(e),i.status=n?1:0,this._collector.log({mute:i})},e.prototype.volume=function(e,n,i){var r={};r.second=t(e),r.from=t(n),r.delta=t(i),this._collector.log({vol:r})},e.prototype.focus=function(e,n,i){var r={};r.second=t(e),r.status=n?1:0,r.isPlay=i?1:0,this._collector.log({focus:r})},e.prototype.replay=function(){this._collector.log({replay:{}})},e.prototype.ended=function(){this._collector.log({ended:{}})}}(),function(){function e(){return{status:a.NONE,volume:-1,isMuted:!1,playheadTime:-1,isFullscreen:!1,isFocused:!0}}function t(e){this._driver=e,this._eventCollector=new s.scrap.EventsDataCollector(e.getArticleData()),this._onEnd=new s.utils.Signal,this._isLastPlayed=!1,this._seekStart=r,this._viewsCounter=0,this._initDriverData=null}s.scrap=s.scrap||{};var n=500,i=5,r=-1,o=2,a=s.scrap.driver.PlayerAction;s.scrap.EventsAnalyser=t,t.prototype.onEnd=function(){return this._onEnd},t.prototype.init=function(){return this._driver.getPlayerStatus()===a.ERROR?void this._onEnd.dispatch():(this._stateCurrent=e(),this._stateLast=e(),this._stateSent=e(),this._stateCurrent.status=this._driver.getPlayerStatus(),this._stateSent.status=this._stateLast.status=this._stateCurrent.status,this._stateCurrent.playheadTime=this._driver.getPlayheadTime(),this._stateLast.playheadTime=this._stateCurrent.playheadTime,this._stateSent.playheadTime=s.scrap.consts.TIME_EMPTY,this._stateCurrent.isMuted=this._driver.getIsMuted(),this._stateSent.isMuted=this._stateCurrent.isMuted,this._stateCurrent.volume=this._driver.getVolume(),this._stateSent.volume=this._stateCurrent.volume,this._stateCurrent.isFocused=this._driver.getIsFocused(),this._stateSent.isFocused=this._stateCurrent.isFocused,this._volumeDebounce=s.utils.Debounce(n,this.handleVolumeUpdate,this),this._volumeTimeChanged=0,this._lastWatchReportTime=0,this._pauseStartDateTime=0,this._pauseStartPlayheadTime=0,this._bufferingStartDateTime=0,this._bufferingStartPlayheadTime=0,this._initDriverData=[l.getTimeNow(),this._stateCurrent.volume,this._stateCurrent.isMuted,this._driver.getIsAutoStart()],this._driver.onPlayerAction().add(this.handlePlayerAction,this),void this._driver.onPlayerProgress().add(this.handlePlayerProgress,this))},t.prototype.dispose=function(){this._driver.onPlayerAction().remove(this.handlePlayerAction,this),this._driver.onPlayerProgress().remove(this.handlePlayerProgress,this),this._eventCollector=null,this._driver=null,this._onEnd.removeAll(),this._onEnd=null},t.prototype.handlePlayerAction=function(e,t){switch(e){case a.PLAYING:case a.BUFFERING:case a.PAUSED:case a.ENDED:this.sendEventCollectorInitData(),this._stateCurrent.status=e,this._process_Replay(),this._process_Watching(),this._process_Paused(),this._process_Buffer(),this._process_Ended(),this._process_LastPlayed(),this._stateLast.status!==this._stateCurrent.status&&(this._stateLast.status=this._stateCurrent.status);break;case a.ERROR:this._stateCurrent.status=a.ERROR,this._process_Error();break;case a.SEEK_START:this._process_SeekStart(t);break;case a.SEEK_END:this._process_SeekEnd(t),this._process_Buffer_Complete();break;case a.VOLUME_CHANGE:this.handlePlayerAction_VolumeChanged(t);break;case a.MUTE_CHANGE:this.handlePlayerAction_MuteChanged(t);break;case a.FULLSCREEN:this._process_FullScreen(t);break;case a.NEW_VIDEO:this._viewsCounter+=1;break;case a.FOCUS:this._process_Focus(t)}(e===a.ENDED||this._viewsCounter>1)&&this._onEnd.dispatch()},t.prototype.handlePlayerProgress=function(e){this._stateCurrent.playheadTime=e,this._process_Watching(),this.sendEventCollectorInitData()},t.prototype.handlePlayerAction_VolumeChanged=function(e){this._stateCurrent.volume=e,this._volumeTimeChanged=this._volumeTimeChanged||this._stateCurrent.playheadTime,this._volumeDebounce.start()},t.prototype.handlePlayerAction_MuteChanged=function(e){this._stateCurrent.isMuted=e,this._volumeTimeChanged=this._volumeTimeChanged||this._stateCurrent.playheadTime,this._volumeDebounce.start()},t.prototype.handleVolumeUpdate=function(){this._stateCurrent.volume!==this._stateSent.volume&&(this._eventCollector.volume(this._volumeTimeChanged,this._stateSent.volume,this._stateCurrent.volume-this._stateSent.volume),this._stateSent.volume=this._stateCurrent.volume),this._stateCurrent.isMuted!==this._stateSent.isMuted&&(this._eventCollector.mute(this._volumeTimeChanged,this._stateCurrent.isMuted),this._stateSent.isMuted=this._stateCurrent.isMuted),this._volumeTimeChanged=0},t.prototype._process_LastPlayed=function(){switch(this._stateCurrent.status){case a.PLAYING:this._isLastPlayed=!0;break;case a.ENDED:case a.PAUSED:this._isLastPlayed=!1}},t.prototype._process_Watching=function(){var e=Math.abs(this._stateCurrent.playheadTime-this._lastWatchReportTime);(e>i||this._stateCurrent.status===a.ENDED)&&this._sendWatchReport()},t.prototype._process_Paused=function(){if(this._isLastPlayed&&this._stateCurrent.status===a.PAUSED)return this._eventCollector.pause(this._stateCurrent.playheadTime),this._sendWatchReport(),this._stateLast.status=a.PAUSED,this._pauseStartDateTime=l.getTimeNow(),this._pauseStartPlayheadTime=this._stateCurrent.playheadTime,void(this._stateSent.status=this._stateLast.status=this._stateCurrent.status);if((this._stateCurrent.status===a.PLAYING||this._stateCurrent.status===a.ENDED)&&!this._isLastPlayed&&this._pauseStartDateTime>0){var e=l.timestampDiffInSec(l.getTimeNow(),this._pauseStartDateTime);this._pauseStartDateTime=0,e>0&&this._eventCollector.pauseDuration(this._pauseStartPlayheadTime,e)}},t.prototype._process_Buffer=function(){return this._stateLast.status!==a.BUFFERING&&this._stateCurrent.status===a.BUFFERING?(this._sendWatchReport(),this._stateSent.status=this._stateLast.status=this._stateCurrent.status,this._bufferingStartDateTime=l.getTimeNow(),void(this._bufferingStartPlayheadTime=this._stateCurrent.playheadTime)):void(this._stateCurrent.status!==a.BUFFERING&&this._process_Buffer_Complete())},t.prototype._process_Buffer_Complete=function(){if(!(this._bufferingStartDateTime<=0)){var e=l.timestampDiffInSec(l.getTimeNow(),this._bufferingStartDateTime);e>1&&(this._eventCollector.startBuffering(this._bufferingStartPlayheadTime),this._eventCollector.bufferDuration(this._bufferingStartPlayheadTime,e)),this._stateSent.status=this._stateLast.status=this._stateCurrent.status,this._bufferingStartDateTime=0}},t.prototype._process_Ended=function(){this._stateCurrent.status===a.ENDED&&(this._sendWatchReport(),this._eventCollector.ended(),this._stateSent.status=this._stateLast.status=this._stateCurrent.status)},t.prototype._process_Replay=function(){this._stateLast.status===a.ENDED&&this._stateCurrent.status!==a.ENDED&&(this._eventCollector.replay(),this._stateSent.status=this._stateLast.status=this._stateCurrent.status,this._lastWatchReportTime=0,this._stateCurrent.playheadTime=0)},t.prototype._process_Error=function(){this._onEnd.dispatch()},t.prototype._process_SeekStart=function(e){this._seekStart=e},t.prototype._process_SeekEnd=function(e){if(this._seekStart!==r){var t=Math.abs(e-this._seekStart);if(t<o)return void(this._seekStart=r);this._eventCollector.seek(this._seekStart,e),this._eventCollector.watched(this._lastWatchReportTime,Math.abs(this._seekStart-this._lastWatchReportTime)),this._stateLast.playheadTime=this._stateCurrent.playheadTime=this._lastWatchReportTime=e,this._seekStart=r}},t.prototype._process_FullScreen=function(e){this._stateCurrent.isFullscreen=e,this._stateSent.isFullscreen!==e&&(this._eventCollector.fullscreen(this._stateCurrent.playheadTime,e),this._stateSent.isFullscreen=e)},t.prototype._process_Focus=function(e){if(this._stateCurrent.isFocused=e,this._stateCurrent.status!==a.NONE&&this._stateLast.isFocused!==e){var t=this._stateCurrent.status!==a.ENDED;t&&!this._stateLast.isFullscreen&&this._eventCollector.focus(this._stateCurrent.playheadTime,e,this._stateCurrent.status===a.PLAYING),this._stateLast.isFocused=e}},t.prototype.sendEventCollectorInitData=function(){this._initDriverData&&(this._eventCollector.init.apply(this._eventCollector,this._initDriverData),this._initDriverData=null)},t.prototype._sendWatchReport=function(){this._eventCollector.watched(this._lastWatchReportTime,Math.abs(this._stateCurrent.playheadTime-this._lastWatchReportTime)),this._stateLast.playheadTime=this._lastWatchReportTime=this._stateCurrent.playheadTime}}(),function(){function e(){this._state=0,this._onPlayerInstanceFound=new s.utils.Signal,this._onPlayerPlaceholderFound=new s.utils.Signal,this._onContainerPlaceholderList=new s.utils.Signal,this._configPlayer=he.getScraperPlayerById(this.getType()),this._foundList={},this._validateImplementation(),this._validatePlayerConfig(),this._setStateIdle()}var t=s.publisher.utils,n=/[^\d\w\s\-?!\u0590-\u05fe\.,]/g,i=s.scrap.player.EState={IDLE:1,SEARCHING:2,FOUND:3},r=s.scrap.utils.defineError;e.prototype.getType=function(){r(null,"getType")},e.prototype._validateImplementation=function(){this.getType()},e.prototype._validatePlayerConfig=function(){},e.prototype.onPlayerInstanceFound=function(){return this._onPlayerInstanceFound},e.prototype.onPlayerPlaceholderFound=function(){return this._onPlayerPlaceholderFound},e.prototype.onContainerPlaceholderList=function(){return this._onContainerPlaceholderList},e.prototype.detectNewPlayers=function(e){this.isIdle()&&(this._state=i.SEARCHING,setTimeout(this._detectNewPlayers.bind(this),e?e:0))},e.prototype.playerDisposed=function(e){this._hasPlayerInstanceFound(e)&&(this._foundList[e]=!1)},e.prototype._detectNewPlayers=function(){},e.prototype._collectScraperData=function(e,t){var i={},r={};i.data=r,r.duration=0,r.version="NoName",r.video_id=this._getVideoId(e,t),r.stream=this._getVideoStream(e,t),r.url=this._getPlayerUrl(e,t),r.raw_url=this._getPlayerUrlRaw(e,t),r.title=(this._getVideoTitle(e,t)||"").replace(n,""),r.raw_title=l.b64EncodeUnicode(this._getVideoTitle(e,t)||""),r.publisher=he.getPublisherId(),r.player_id=this.getScraperPlayerId()||parseInt(this._configPlayer.scraperId||this.getType());var o=this.getVideoTags(e,t);return"string"!=typeof o&&(o=JSON.stringify(o)),r.tags=o,i.index=-1,i.driverType=this.getType(),i.driverSubType=this._getPlayerSubType(e,t),i.videoId=r.video_id,i.playerId=this._getPlayerId(e,t)||i.videoId,i.url=r.url,i.playerJS=e,i.playerHtmlElement=t,i.playerConfig=this._configPlayer,i.isLive=this._getIsLive(e,t),i.isAutoPlay=this._getIsAutoPlay(e,t),i.isPlayerStarted=i.isAutoPlay||this._getIsPlayerStarted(e,t),i.playerPlaceholder=this._getPlayerPlaceholder(e,t),i.playerHtmlContainer=this._getPlayerContainer(e,t),i.isFeatured=this._getIsFeatured(e,t),i.clone=this.cloneScrapData,
i},e.prototype.cloneScrapData=function(e){var t={};return t.data=l.cloneObject(e.data),t.index=e.index,t.driverType=e.driverType,t.driverSubType=e.driverSubType,t.videoId=e.videoId,t.playerId=e.playerId,t.url=e.url,t.playerJS=e.playerJS,t.playerHtmlElement=e.playerHtmlElement,t.playerConfig=e.playerConfig,t.isLive=e.isLive,t.isAutoPlay=e.isAutoPlay,t.isPlayerStarted=e.isPlayerStarted,t.playerPlaceholder=e.playerPlaceholder,t.isFeatured=e.isFeatured,t.clone=this.cloneScrapData,t},e.prototype._collectPlaceholderPlayerData=function(e){var t={};return t.playerType=this.getType(),t.id=l.generateUID(),t.playerConfig=this._configPlayer,t.element=e,t.url="",t.videoId="",t},e.prototype._setStateIdle=function(){this._state=i.IDLE},e.prototype._setStateFound=function(){this._state=i.FOUND},e.prototype.isIdle=function(){return this._state===i.IDLE},e.prototype._sendPlayerInstanceFound=function(e){this._onPlayerInstanceFound.dispatch(e)},e.prototype._sendContainerPlaceholderList=function(e){this._onContainerPlaceholderList.dispatch(e)},e.prototype._sendPlayerPlaceholderFound=function(e){this._onPlayerPlaceholderFound.dispatch(e)},e.prototype._addPlayerInstanceFound=function(e){return this._foundList[e]=!0},e.prototype._hasPlayerInstanceFound=function(e){return this._foundList.hasOwnProperty(e)},e.prototype._getVideoId=function(e,t){r(this,"_getVideoId")},e.prototype._getVideoStream=function(e,t){r(this,"_getVideoStream")},e.prototype._getVideoTitle=function(e,n){return t&&t.getVideoTitle?t.getVideoTitle(e):document.title},e.prototype.getScraperPlayerId=function(){return null},e.prototype._getIsLive=function(e,t){return!1},e.prototype._getIsAutoPlay=function(e,t){return null},e.prototype._getIsFeatured=function(e,t){},e.prototype._getIsPlayerStarted=function(e,t){return!1},e.prototype._getPlayerId=function(e,t){return""},e.prototype._getPlayerSubType=function(e,t){return this._configPlayer.subType&&s.scrap.player.SubTypes[this._configPlayer.subType]||""},e.prototype._getPlayerUrl=function(e,t){return l.urls.getCurrentCanonicalURL()},e.prototype._getPlayerUrlRaw=function(e,t){return l.urls.getStructuredRawByUrl(l.urls.getLocationUrl())},e.prototype._getPlayerPlaceholder=function(e,t){return null},e.prototype._getPlayerContainer=function(e,t){return t},e.prototype.getVideoTags=function(e,n){if(t&&t.getTags)return t.getTags(e)},s.scrap.detector.Base=e}(),function(){function e(){this._articleData=null,this._scrapData=null,this._onDisposed=new s.utils.Signal,this._onPlayerAction=new s.utils.Signal,this._onPlayerProgress=new s.utils.Signal,this._onVideoView=new s.utils.Signal,this._onError=new s.utils.Signal,this._onPlayerInstanceFound=new s.utils.Signal,this._onPlayerVideoChanged=new s.utils.Signal,this._analyser=null,this._progressTimer=null,this._viewsCounter=0,this._hadImpression=null,this._handleFocusInEvent=null,this._handleFocusOutEvent=null,this._doesCollect=null}var t=s.scrap.utils.defineError,n=s.scrap.driver.PlayerAction,i=!1;e.prototype.getID=function(){return this._scrapData.playerId},e.prototype.getType=function(){t(null,"getType")},e.prototype.getSubType=function(){return s.scrap.player.SubTypes.DEFAULT},e.prototype.getName=function(){t(null,"getName")},e.prototype.setArticleData=function(e){this._articleData=e},e.prototype.getArticleData=function(){return this._articleData},e.prototype.setScrapData=function(e){this._scrapData=e},e.prototype.checkVideoView=function(){t(null,"checkVideoView")},e.prototype.onPlayerAction=function(){return this._onPlayerAction},e.prototype.onDisposed=function(){return this._onDisposed},e.prototype.onPlayerProgress=function(){return this._onPlayerProgress},e.prototype.onVideoView=function(){return this._onVideoView},e.prototype.onError=function(){return this._onError},e.prototype.onPlayerInstanceFound=function(){return this._onPlayerInstanceFound},e.prototype.onPlayerVideoChanged=function(){return this._onPlayerVideoChanged},e.prototype.resetViewsCounter=function(){this._viewsCounter=0},e.prototype.sendPlayerActionEvent=function(e,t){this._onPlayerAction.dispatch(e,t)},e.prototype.sendPlayerProgressEvent=function(e){this._onPlayerProgress.dispatch(e)},e.prototype.reportVideoView=function(){this.sendPlayerActionEvent(n.NEW_VIDEO);var e=this.getCurrentVideoId(),t=be.getApvDataByVideoIdHrefAndProduct(e,l.urls.getCurrentCanonicalURL(),a.Emitter.PRODUCT_IN_ARTICLE);null===this._hadImpression&&(this._hadImpression=!(!t||!t.getDidImpressionSent()));var i={driverType:this.getType(),counter:this._viewsCounter,url:this.getCurrentUrl(),videoId:e,hadImpression:this._hadImpression,playerId:this._scrapData.playerId};this._viewsCounter+=1,this._onVideoView.dispatch(i)},e.prototype.reportError=function(){this.sendPlayerActionEvent(n.ERROR);var e={driverType:this.getType(),url:this.getCurrentUrl(),videoId:this.getCurrentVideoId(),playerId:this._scrapData.playerId};this._onError.dispatch(e)},e.prototype.sendPlayerInstanceFound=function(e){this._onPlayerInstanceFound.dispatch(e||this._scrapData)},e.prototype.reportPlayerVideoChanged=function(e){this._onPlayerVideoChanged.dispatch({scrapData:this._scrapData,videoId:e})},e.prototype.init=function(){this._articleData=this._articleData||me.generateArticleData(this._scrapData.id),this._canCollectEvents()?(this._analyser=new s.scrap.EventsAnalyser(this),this._analyser.onEnd().add(this.handleAnalyserEnded,this),this._analyser.init(),this.startListenWindowFocusEvent(),this.sendCurrentFocusState(),i=!0):l.log("Will not collect video events: "+this._articleData.getArticleId()),this.trackDisposableDomElement()},e.prototype._canCollectEvents=function(){return null!==this._doesCollect?this._doesCollect:(this._doesCollect=!i&&he.isScraperEnableEventCollection()&&l.parseBool(this._scrapData.playerConfig.enableEventCollection,!0)&&this._articleData.getDoesCollect()&&!ae.isIE()&&!ae.isEdge()&&!ae.isMobile(),this._doesCollect)},e.prototype.trackDisposableDomElement=function(){var e=this._getDisposableDomElement();e&&(this._domTracker=new s.utils.DomElementTracker(e),this._domTracker.setTrackingOptions({parentElement:this._getDisposableDomElementParent()}),this._domTracker.onRemovedFromDom.add(this.dispose,this),this._domTracker.start())},e.prototype._getDisposableDomElement=function(){return null},e.prototype._getDisposableDomElementParent=function(){return null},e.prototype.dispose=function(){this._onDisposed.dispatch(this),this._analyser&&(this._analyser.dispose(),this._analyser=null),this._articleData=null,this._scrapData=null,this._onPlayerAction.removeAll(),this._onPlayerAction=null,this._onPlayerProgress.removeAll(),this._onPlayerProgress=null,this._onVideoView.removeAll(),this._onVideoView=null,this._onDisposed.removeAll(),this._onDisposed=null,this.stopProgressTimer(),this._progressTimer=null,this._domTracker&&(this._domTracker.dispose(),this._domTracker=null),this.stopListenWindowFocusEvent()},e.prototype.getPlayerStatus=function(){l.logWarning('_defineError(this, "getPlayerStatus")')},e.prototype.getPlayheadTime=function(){t(this,"getPlayheadTime")},e.prototype.getIsMuted=function(){t(this,"getIsMuted")},e.prototype.getVolume=function(){t(this,"getVolume")},e.prototype.getIsFullscreen=function(){t(this,"getIsFullscreen")},e.prototype.getIsFocused=function(){return document.hasFocus()},e.prototype.getIsAutoStart=function(){return!ae.isMobile()},e.prototype.getCurrentVideoId=function(){t(this,"getCurrentVideoId")},e.prototype.getCurrentUrl=function(){return this._scrapData.data.url},e.prototype.startProgressTimer=function(){this._progressTimer||(this._progressTimer=new s.utils.Timer(he.getScraperEventsInterval(),this.handleProgressTimerEvent,this)),this._progressTimer.start(),this.handleProgressTimerEvent()},e.prototype.stopProgressTimer=function(){this._progressTimer&&this._progressTimer.stop()},e.prototype.handleProgressTimerEvent=function(){t(this,"handleProgressTimerEvent","You use progress timer without override this function.")},e.prototype.startListenWindowFocusEvent=function(){this._handleFocusInEvent||(this._handleFocusInEvent=this.handleFocusInEvent.bind(this),this._handleFocusOutEvent=this.handleFocusOutEvent.bind(this),window.addEventListener?(window.addEventListener("focus",this._handleFocusInEvent,!1),window.addEventListener("blur",this._handleFocusOutEvent,!1)):window.attachEvent&&(window.attachEvent("focus",this._handleFocusInEvent),window.attachEvent("blur",this._handleFocusOutEvent)))},e.prototype.stopListenWindowFocusEvent=function(){this._handleFocusInEvent&&(window.removeEventListener?(window.removeEventListener("focus",this._handleFocusInEvent,!1),window.removeEventListener("blur",this._handleFocusOutEvent,!1)):window.detachEvent&&(window.detachEvent("focus",this._handleFocusInEvent),window.detachEvent("blur",this._handleFocusOutEvent)),this._handleFocusInEvent=null,this._handleFocusOutEvent=null)},e.prototype.handleFocusInEvent=function(e){this.sendPlayerActionEvent(n.FOCUS,!0)},e.prototype.handleFocusOutEvent=function(e){this.sendPlayerActionEvent(n.FOCUS,!1)},e.prototype.sendCurrentFocusState=function(){this.sendPlayerActionEvent(n.FOCUS,document.hasFocus())},e.prototype.handleAnalyserEnded=function(){this._analyser.dispose(),this._analyser=null},s.scrap.driver.Base=e}(),function(){function t(){this._onPlayerFeaturedInstanceFound=new s.utils.Signal,this._currentScraperData=null,this._placeholderFoundList=[],this._topMostPlaceholder=null,this._alreadySentFeatured=!1}var n=s.publisher.utils;t.prototype.setPlayerCollection=function(e){e.onPlayerInstanceFound().add(this.handleDetector_PlayerInstanceFound,this,1)},t.prototype.addDriver=function(e){e.onPlayerInstanceFound().add(this.handleDriver_PlayerInstanceFound,this)},t.prototype.onPlayerFeaturedInstanceFound=function(){return this._onPlayerFeaturedInstanceFound},t.prototype.isScrapDataValid=function(e){return!!e&&(""===e.url||l.urls.isUrlHomePage()?(l.log("Scrap cancel: I think I am on homepage..."),!1):e.isLive?(l.log("Scrap canceled: Live player instance."),!1):e.data.video_id&&e.data.stream?!(n.shouldScrap&&!n.shouldScrap(e))||(l.log("Scrap canceled: due to publisher utils"),!1):(l.log("Scrap canceled: Missing data. video_id: '"+e.data.video_id+"', stream: '"+e.data.stream+"'"),!1))},t.prototype.setFeatureFlag=function(e){this._alreadySentFeatured?e.data.featured=!1:("undefined"!=typeof e.isFeatured?e.data.featured=e.isFeatured:(this.setTopMostContainer(),e.data.featured=!!this._topMostPlaceholder.contains(e.playerPlaceholder)),e.data.featured&&(this._alreadySentFeatured=!0))},t.prototype.handleDetector_PlayerInstanceFound=function(e){this.isScrapDataValid(e)&&(this.setFeatureFlag(e),this._currentScraperData=e,this.sendPlayerFeaturedInstanceFound())},t.prototype.handleDriver_PlayerInstanceFound=function(e){this.handleDetector_PlayerInstanceFound(e)},t.prototype.getAllPlayersContainer=function(){if(n.getIAContainers)return n.getIAContainers();for(var e=document.querySelectorAll(he.getIAContainers()),t=[],i=0;i<e.length;i++){var r=e[i];r.offsetParent&&t.push(r)}return t},t.prototype._setPlayersPlaceholderList=function(){for(var e=this.getAllPlayersContainer(),t=0;t<e.length;t++){var n=e[t];this._placeholderFoundList.indexOf(n)>-1||this._placeholderFoundList.push(n)}},t.prototype.setTopMostContainer=function(){if(this._setPlayersPlaceholderList(),0==this._placeholderFoundList.length)return void l.logWarning("No places were set to the picker to choose from");this._topMostPlaceholder=this._placeholderFoundList[0];for(var e=1;e<this._placeholderFoundList.length;e++){var t=this._placeholderFoundList[e];t.offsetTop<this._topMostPlaceholder.offsetTop&&(this._topMostPlaceholder=t)}},t.prototype.sendPlayerFeaturedInstanceFound=function(){return this.isScrapDataValid(this._currentScraperData)?(this.sendScrapEvent(),this._onPlayerFeaturedInstanceFound.dispatch(this._currentScraperData),void(this._currentScraperData=null)):void(this._currentScraperData=null)},t.prototype.sendScrapEvent=function(){var t=this._currentScraperData.data,n=me.getInArticleArticleData(t.video_id,t.url);t.exist=!!n;var i=he.getScraperDebug().immediateScraper||"undefined"!==e.debugParams[m.IGNORE_REFERRERS]||l.validateScraperReferrerURL(),r=localStorage&&!!localStorage.getItem("_minForcePush");(i&&he.getScraperType2()||r)&&!t.exist&&le.send(a.Emitter.NEW_VIDEO_EVENT,t),le.send(a.Emitter.NEW_SCRAPE_EVENT,t)},s.scrap.picker.Base=t}(),function(){s.scrap.startUrlTracker=function(e){}}(),function(){var e=s.scrap.utils[s.scrap.PlayersNameEnum.VideoJS]={};e._getVideoId=function(e){var t=e.player_.el_.dataset.videoId;if(!t||t.indexOf("ref:")>-1){for(var n=document.querySelectorAll(".video-player"),i=0;i<n.length;i++){var r=n[i];if(r.contains(e.player_.el_))return JSON.parse(r.querySelector("script.ui-video-data").innerHTML).asset_metadata.items.brightcoveid}return l.logWarning("VideoJS can't find Video ID."),null}return t}}(),function(){function e(){e.__superCtor__.call(this)}s.publisher.utils;l["extends"](e,s.scrap.detector.Base),e.getType=function(){return s.scrap.PlayerEnum.VideoJS},e.prototype.getType=function(){return e.getType()},e.getName=function(){return s.scrap.PlayersNameEnum.VideoJS},e.prototype._detectNewPlayers=function(){e.__super__._detectNewPlayers.call(this);var t=this._getPlayers();return t.hasFound?(this._collectScraperDataList(t),void this._setStateIdle()):void this._setStateIdle()},e.prototype._getPlayers=function(){var e={players:{},hasFound:!1};if("undefined"==typeof videojs||"function"!=typeof videojs.getPlayers)return e;var t=videojs.getPlayers(),n=Object.keys(t||{});if(0===n.length)return e;for(var i=0;i<n.length;i++){var r=n[i],o=t[r];this._hasPlayerInstanceFound(r)||(e.players[r]=o,e.hasFound=!0)}return e},e.prototype.hasVideoIdAndStream=function(e,t){return!(!this._getVideoId(e,t)||!this._getVideoStream(e,t))},e.prototype._collectScraperDataList=function(e){for(var t=Object.keys(e.players),n=0;n<t.length;n++){var i=t[n],r=e.players[i];if(r){var o=r.contentEl();if(this.hasVideoIdAndStream(r,o)){this._addPlayerInstanceFound(i);var a=this._collectScraperData(r,o);this._sendPlayerInstanceFound(a)}}}},e.prototype._getVideoId=function(e,t){return t.dataset.videoId},e.prototype._getVideoStream=function(e,t){return this._getVideoId(e,t)},e.prototype._getIsLive=function(e){var t="vjs-live";return e.el_.className.indexOf(t)>-1&&e.duration()===1/0},e.prototype._getPlayerId=function(e,t){return this._getVideoId(e,t)},e.prototype._getIsAutoPlay=function(e,t){return e.autoplay()},e.prototype._getIsPlayerStarted=function(e,t){return t.className.indexOf("vjs-has-started")>-1},e.prototype._getPlayerPlaceholder=function(e,t){return t},s.scrap.detector.VideoJS=e,s.scrap.factory.addDetector(e)}(),function(){function e(){e.__superCtor__.call(this),this._watchPlayerList={}}l["extends"](e,s.scrap.detector.VideoJS),e.getType=function(){return s.scrap.PlayerEnum.VideoJS},e.prototype.getScraperPlayerId=function(){return s.scrap.PlayerEnum.DEFAULT_99},e.getName=function(){return s.scrap.PlayersNameEnum.STREAMSRC},e.prototype._getVideoStream=function(e,t){if(e.mediainfo&&e.mediainfo.sources){for(var n=0;n<e.mediainfo.sources.length;n++){var i=e.mediainfo.sources[n];if(i.src&&(i.src.indexOf(".m3u8")||i.src.indexOf(".mp4")))return i.src}return null}},s.scrap.detector.VideoJSStreamSrc=e,s.scrap.factory.addDetector(e)}(),function(){function e(e){return e.stopImmediatePropagation(),!1}function t(){t.__superCtor__.call(this),this.ATTR_MEDIA_SIZE="data-media_file_size",this.mediaHeightIndex="",this._apvElement=null,this._rezVideo=null,this.alreadyPlayed=!1}s.apv=s.apv||{},s.apv.players=s.apv.players||{};var n=["mp4"];l["extends"](t,o),s.apv.players.ApvPlayerBase=t,t.States={STATE_HAVE_NOTHING:0,STATE_HAVE_METADATA:1,STATE_HAVE_CURRENT_DATA:2,STATE_HAVE_FUTURE_DATA:3,STATE_HAVE_ENOUGH_DATA:4},t.prototype.init=function(e){this._apvData=e,h.addEventListener(a.Events.DomWindow.RESIZE,this.handleResizeEvent,this),this.mediaHeightIndex=this.getNearestSize(this._apvData.getElementSize()),this._apvElement=document.createElement("video"),this._apvElement.className="minute_apv",this._apvElement.setAttribute("minVideoID",this._apvData.getArticleData().getArticleId()),this._apvElement.setAttribute("muted",""),this._apvElement.muted=!0,this._apvElement.volume=0,this._apvElement.setAttribute("playsinline",""),this._apvElement.setAttribute("webkit-playsinline",""),this.setLoopPlay(),this._apvElement.style.transition=he.getEffectApvTransitionVideo(),this.attachVideoEvents(),he.getIsApvBlobEnabled()?this.loadSourceAsBlob():this.buildVideoSources()},t.prototype.attachVideoEvents=function(){function t(){o>0&&(clearTimeout(o),o=0)}function n(){i.hasStartPlaying()?l.getRequestAnimationFrame(n):i.dispatchEvent(a.Events.Players.LOADED)}var i=this,r=!1,o=0;this._handleVideoEvent_LoadedMetadata=function(e){r=!0,t(),i.dispatchEvent("loadedmetadata"),i.handleMediaMetadataLoaded()},this._handleVideoEvent_Play=function(t){return i.handleVideoEvent_Play(t),e(t)},this._handleVideoEvent_Error=function(t){return i.handleVideoEvent_Error(t),e(t)},this._handleVideoEvent_Ended=function(t){return i.handleVideoEvent_Ended(),e(t)},this._handleCanPlayThrough=function(){i._apvElement&&i._apvElement.removeEventListener("canplaythrough",i._handleCanPlayThrough),i._handleCanPlayThrough=null,n()},this._apvElement.addEventListener("loadedmetadata",this._handleVideoEvent_LoadedMetadata),this._apvElement.addEventListener("play",this._handleVideoEvent_Play),this._apvElement.addEventListener("error",this._handleVideoEvent_Error),this._apvElement.addEventListener("ended",this._handleVideoEvent_Ended),this._apvElement.addEventListener("canplaythrough",this._handleCanPlayThrough),this._apvElement.addEventListener("timeupdate",e),this._apvElement.addEventListener("playing",e),this._apvElement.addEventListener("waiting",e),this._apvElement.addEventListener("load",e),this._apvElement.addEventListener("progress",e),this._apvElement.addEventListener("durationchange",e)},t.prototype.handleResizeEvent=function(){this._apvData&&l.ElementObjectFit.set({mediaElement:this.getApvElement(),originalElement:this._apvData.getElementSize(),isFullSize:he.isInArticleObjectFitFullSize()&&this._apvData.getProduct()===a.Emitter.PRODUCT_IN_ARTICLE})},t.prototype.buildVideoSources=function(){for(var e=0;e<n.length;e++){var t=document.createElement("source");t.src=this.getFullVideoUrl(n[e]),this._apvElement.appendChild(t)}this._apvElement.setAttribute(this.ATTR_MEDIA_SIZE,he.getRezVideo()[this.mediaHeightIndex])},t.prototype.loadSourceAsBlob=function(){var e=new XMLHttpRequest;l.log(this.getFullVideoUrl(n[0])),e.open("GET",this.getFullVideoUrl(n[0]),!0),e.responseType="blob";var t=this;e.onload=function(){if(200===this.status&&t._apvElement){var e=this.response,n=document.createElement("source");n.src=URL.createObjectURL(e),t._apvElement.appendChild(n),t._apvElement.setAttribute(t.ATTR_MEDIA_SIZE,he.getRezVideo()[t.mediaHeightIndex]),t.dispatchEvent(a.Events.Players.LOADED)}},e.onerror=function(){},e.send()},t.prototype.setLoopPlay=function(){try{this._apvElement.setAttribute("loop","")}catch(e){}},t.prototype.setOriginalImage=function(e){this._apvElement&&e&&this.isImageUrl(e)&&this._apvElement.setAttribute("poster",e)},t.prototype.play=function(){(this._apvElement.readyState===t.States.STATE_HAVE_ENOUGH_DATA||this.alreadyPlayed)&&(this.playElement(),this.sendEventPlaying())},t.prototype.playElement=function(){this.alreadyPlayed=!0;var e=this._apvElement.play();l.isPromise(e)&&e["catch"](function(){})},t.prototype.setAutoplay=function(){try{this._apvElement.setAttribute("preload","auto"),this._apvElement.setAttribute("autoplay","")}catch(e){}},t.prototype.pause=function(){this._apvElement.pause()},t.prototype.forcePlay=function(){this.playElement()},t.prototype.isPaused=function(){return this._apvElement.paused},t.prototype.sendEventPlaying=function(){this.dispatchEvent(a.Events.Players.PLAYING),h.dispatchEvent(a.Events.Players.PLAYING)},t.prototype.getApvElement=function(){return this._apvElement},t.prototype.getSizeData=function(){return this._rezVideo?this._rezVideo:(this._rezVideo=l.cloneObject(he.getRezVideo()),this._rezVideo)},t.prototype.getStyle=function(e){return this._apvElement?this._apvElement.style[e]:null},t.prototype.setStyles=function(e){if(this._apvElement)for(var t in e)this._apvElement.style[t]=e[t]},t.prototype.setElementAttribute=function(e,t){this._apvElement&&this._apvElement.setAttribute(e,t)},t.prototype.getNearestSize=function(e){var t,n,i,r="m",o=l.extractElementSize(e),a=this.getSizeData();if(!o.width||!o.height)return a[r]?r:Object.keys(a)[0];if(n=Math.ceil(o.width/o.height*100)/100,t=this._apvData.getArticleData().getVideoRatio(),o.width*=.9,o.height*=.9,!t||t>n){for(i in a)if(a.hasOwnProperty(i)&&a[i]>=o.height)return i}else{var s;for(i in a)if(a.hasOwnProperty(i)&&(s=a[i]*t,s>=o.width))return i}return i||"R"},t.prototype.getFullVideoUrl=function(e,t){var n=this._apvData.getHltAPVUrl()+this.mediaHeightIndex+(t||"")+"."+e;for(var i in a.APV)n=n.replace(a.APV[i].source,a.APV[i].target);return l.setUrlProtocol(n)},t.prototype.handleMediaMetadataLoaded=function(){l.setMediaElementSize(this.getApvElement()),l.ElementObjectFit.set({mediaElement:this.getApvElement(),originalElement:this._apvData.getElementSize(),isFullSize:he.isInArticleObjectFitFullSize()&&this._apvData.getProduct()===a.Emitter.PRODUCT_IN_ARTICLE})},t.prototype.dispose=function(){this._rezVideo=null,this._apvElement.removeEventListener("loadedmetadata",this._handleVideoEvent_LoadedMetadata),this._apvElement.removeEventListener("play",this._handleVideoEvent_Play),this._apvElement.removeEventListener("error",this._handleVideoEvent_Error),this._apvElement.removeEventListener("ended",this._handleVideoEvent_Ended),this._apvElement.removeEventListener("canplaythrough",this._handleCanPlayThrough),this._apvElement.removeEventListener("timeupdate",e),this._apvElement.removeEventListener("playing",e),this._apvElement.removeEventListener("waiting",e),this._apvElement.removeEventListener("load",e),this._apvElement.removeEventListener("progress",e),this._apvElement.removeEventListener("durationchange",e),this._handleVideoEvent_Play=null,this._handleVideoEvent_Error=null,this._handleVideoEvent_Ended=null,this._handleCanPlayThrough=null,this._handleVideoEvent_LoadedMetadata=null,h.removeEventListener(a.Events.DomWindow.RESIZE,this.handleResizeEvent,this),this.removeAllEventListener(),this._apvData=null,this._apvElement&&this._apvElement.parentElement&&this._apvElement.parentElement.removeChild(this._apvElement),this._apvElement=null},t.prototype.hasStartPlaying=function(){return!!this._apvElement&&!this._apvElement.paused&&0!==this._apvElement.currentTime},t.prototype.isImageUrl=function(){var e=document.createElement("a"),t=/\.(?:gif|png|webp|jpg|jpeg)$/i;return function(n){return e.href=n,t.test(e.pathname)}}(),t.prototype.handleVideoEvent_Play=function(e){this.dispatchEvent(a.Events.Players.PLAYING)},t.prototype.handleVideoEvent_Ended=function(){this.dispatchEvent("ended"),l.log("video ended for article "+this._apvData.getArticleData().getArticleUrl())},t.prototype.handleVideoEvent_Error=function(e){this.dispatchEvent("error"),l.log("Browser cannot play video!")}}(),function(){s.apv=s.apv||{},s.apv.logos=s.apv.logos||{};var e=s.apv.logos;e.LogoElmBase=function(){e.LogoElmBase.__superCtor__.call(this)},l["extends"](e.LogoElmBase,o),e.LogoElmBase.prototype.init=function(e){this.isMobile=ae.isMobile(),this.trans="0 , 0",this.buildLogoLinkElement(e)},e.LogoElmBase.prototype.buildLogoLinkElement=function(e){var t=this.createElement();t.className="minute_logo",t.title=t.alt=he.getTooltip(),t.style.cursor="pointer",t.style.width="4%",t.style.paddingTop="4%",ae.isMobile()&&(t.style.minWidth="12px"),t.style.minWidth="16px",t.style.outline="none",t.style.transform="translateZ(1px)",t.style.position="absolute",t.style.pointerEvents="auto",t.style.backgroundColor="transparent",t.style["z-index"]=1,t.style.opacity=.6;for(var n=0==e?he.getLogoPosition():he.getInArticleLogoPosition(),i=a.logoPositions[n||"bottom-left"],r=Object.keys(i),o=0;o<r.length;o++){var s=r[o];t.style[s]=i[s]}t.innerHTML=this.getLogoInnerHtml(),this.minuteLinkElm=t},e.LogoElmBase.prototype.createElement=function(){return document.createElement("span")},e.LogoElmBase.prototype.getLogoElement=function(){return this.minuteLinkElm},e.LogoElmBase.prototype.getLogoInnerHtml=function(){return'<svg version="1.1" id="MinuteLogo" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 46 46" style="display: block; position: absolute; left: 0; top: 0; transform: translate('+this.trans+');" xml:space="preserve"><path style="fill-rule:evenodd;clip-rule:evenodd;fill:#FFFFFF;" d="M42.7,13.4L42.7,13.4l-6.8,3.3c1,2,1.5,4.2,1.5,6.5c0,8-6.5,14.4-14.4,14.4c-8,0-14.4-6.5-14.4-14.4 S15.1,8.8,23.1,8.8c1.3,0,2.5,0.2,3.6,0.5l2-7.4c-2-0.5-3.6-0.7-5.7-0.7h0h0c-3.4,0-6.5,0.7-9.6,2.2C2.5,8.6-2,21.7,3.3,32.6 C8.6,43.5,21.7,48,32.6,42.7C43.5,37.4,48,24.3,42.7,13.4"/><circle style="fill:#2ABFD5;" cx="23" cy="23" r="9"/> </svg>'}}(function(){function t(){t.__superCtor__.call(this),this.minContainer=null,this.blockingState=a.APVStates.Active,this._observerAttrChange=[],this.isIE=ae.isIE(),this.hasDisposed=!1}s.apv=s.apv||{},s.apv.domAdapter=s.apv.domAdapter||{};var n=s.apv.domAdapter,i={"box-shadow":"none",border:0,padding:"(0,0,0,0)",paddingLeft:"0px",paddingRight:"0px",paddinTop:"0px",paddingBottom:"0px",transform:"translate(0px,0px)","box-sizing":"border-box;","float":"none",borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomLeftRadius:0,borderBottomRightRadius:0},r={borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomLeftRadius:0,borderBottomRightRadius:0};n.Base=t,l["extends"](t,o),t.getTypeName=function(){return"Base"},t.prototype.init=function(e){this.apvData=e,this.elementToReplace=this.apvData.getElementToReplace(),this.elementSize=this.apvData.getElementSize(),this.apvPlayer=this.apvData.getApvPlayer(),this.minuteLink=this.apvData.getMinuteLogo(),this.articleData=this.apvData.getArticleData(),l.log("initializing DOM adapter. articleData.getArticleId(): "+this.articleData.getArticleId()),this._initElements(),this.attachWindowEvents(),this.eventsRegister(),this.setElementToObserve(),this.insertContainerToDOM(this.elementToReplace.parentNode),this.startAnimationResize()},t.prototype.eventsRegister=function(){this.apvPlayer.addEventListenerOnce(a.Events.Players.PLAYING,this.showApv,this),h.addEventListener(a.Events.DomWindow.BLUR,this.dispatchViewportEvent,this),h.addEventListener(a.Events.DomWindow.SAFARI_FOCUS,this.handleWindowEvent_SafariFocus,this)},t.prototype._initElements=function(){this.createMinContainer(),this.createVideoElement(),this.createLogoElement(),this.createVideoWrapper(),this.applyZIndexForAbsoluteElements(),this._videoWrapper.appendChild(this.apvPlayer.getApvElement()),he.getShowLogo()&&this._videoWrapper.appendChild(this.minuteLinkElm),this.minContainer.appendChild(this._videoWrapper)},t.prototype.getBorderFix=function(){var e={left:0,top:0,right:0};if((ae.isFF()||ae.isSafari())&&this.elementSize!==this.elementToReplace&&null!==this.elementToReplace.offsetParent){var t=window.getComputedStyle(this.elementToReplace.offsetParent);e.left=parseFloat(t.borderLeftWidth),e.right=parseFloat(t.borderRightWidth),e.top=parseFloat(t.borderTopWidth)}return e},t.prototype.render=function(e){if(null!=this.elementToReplace){var t=this.elementToReplace.offsetParent;if(this.elementSize!==this.elementToReplace&&(t=this.elementSize.offsetParent),t){this.minContainer.style.display="flex";var n=getComputedStyle(this.elementSize),i=this.elementSize.getBoundingClientRect(),r=t.getBoundingClientRect();switch(n.transform.split("(")[0]){case"none":this.minContainer.style.transform="none";break;case"matrix":var o=n.transform.split("(")[1].split(")")[0].split(",").map(parseFloat);this.minContainer.style.transform="scale("+o[0]+","+o[3]+")";break;case"matrix3d":var o=n.transform.split("(")[1].split(")")[0].split(",").map(parseFloat);this.minContainer.style.transform="scale3d("+o[0]+","+o[5]+","+o[10]+")"}this.minContainer.style.width=n.width,this.minContainer.style.height=n.height,this.isIE&&(this.minContainer.style.height=""+(parseInt(n.height)+parseInt(n.paddingTop)+parseInt(n.paddingBottom))+"px");var a=0;t===document.body&&(a=window.pageYOffset+t.getBoundingClientRect().top),this.minContainer.style.top=a+i.top-r.top-parseFloat(e.top)+"px","rtl"==n.direction?this.minContainer.style.right=r.right-i.right+e.right+"px":this.minContainer.style.left=ae.isMobile()?"auto":i.left-r.left-parseFloat(e.left)+"px",this.minuteLinkElm.style.paddingTop=this.minuteLinkElm.offsetWidth+"px"}}},t.prototype.redrawApvOnRequestAnimation=function(e){var t=this,n=-1,i=he.getRenderModulus(),r=function(){if(n+=1,t.minContainer&&!t.hasDisposed&&(l.getRequestAnimationFrame(r),n%i===0))return t.isElementToReplaceVisibleValid()?void t.render(e):void(t.minContainer.style.display="none")};l.getRequestAnimationFrame(r)},t.prototype.startAnimationResize=function(){var e=this.getBorderFix();this._debouncer=new s.utils.Debounce(50,function(){this.render(e)},this),this._debouncer.enableFilter(250),this._debouncer.setEcho(50,10),h.addEventListenerOnce(a.Events.DomWindow.RESIZE,this._debouncer.start,this._debouncer),this.redrawApvOnRequestAnimation(e)},t.prototype._copyStylesFromElement=function(e,t,n){var i=l.getComputedStyle(e);for(var r in n)t.style[r]=i[r]},t.prototype.createMinContainer=function(){this.minContainer=document.createElement("div"),this.minContainer.classList.add("minute-container"),this.minContainer.setAttribute("placement",this.apvData.getName()),this.minContainer.setAttribute("container_minvideoid",this.articleData.getArticleId()),this.minContainer.setAttribute("id",this.apvData.getContainerUnique()),this.minContainer.style.position="absolute",this.minContainer.style.overflow="hidden",this.minContainer.style.display="flex",this.minContainer.style.transition="opacity 0.5s ease-out",this.minContainer.style.opacity=0,this._copyStylesFromElement(this.elementToReplace,this.minContainer,this.getListOfCopyableStyles())},t.prototype.createVideoElement=function(){this.apvPlayer.setOriginalImage(this.getOriginalUrl()[a.OriginalSrc.PATH]);var e=a.values.HUNDRED_PERCENT,t=a.values.HUNDRED_PERCENT;l.isInt(parseFloat(this.minContainer.style.width))||(e="calc("+a.values.HUNDRED_PERCENT+" + 1px)"),l.isInt(parseFloat(this.minContainer.style.height))||(t="calc("+a.values.HUNDRED_PERCENT+" + 1px)"),this.apvPlayer.setStyles({position:a.values.RELATIVE,display:a.values.BLOCK,width:e,height:t,objectFit:"cover"}),this._copyStylesFromElement(this.elementToReplace,this.apvPlayer._apvElement,r)},t.prototype.createVideoWrapper=function(){this._videoWrapper=document.createElement("div"),this._videoWrapper.style.width=a.values.HUNDRED_PERCENT,this._videoWrapper.style.height=a.values.HUNDRED_PERCENT,this._videoWrapper.style.position=a.values.RELATIVE,this._videoWrapper.style.overflow="hidden",this._videoWrapper.style.flex="1",this._videoWrapper.style.display="block"},t.prototype.applyZIndexForAbsoluteElements=function(){if(he.shouldApplyZIndexReorder()){for(var e,t,n=Number.MAX_VALUE,i=document.createTreeWalker(this.elementToReplace.parentElement,NodeFilter.SHOW_ELEMENT,null,!1),r=i.nextNode();r;)t=getComputedStyle(i.currentNode),"none"!==t.display?i.currentNode!==this.elementToReplace?"absolute"!==t.position||parseInt(t.width)<=1?r=i.nextNode():(e=Number(t.zIndex),isNaN(e)&&(e=0),n>e&&(n=e),i.currentNode.style.zIndex=e+1,r=i.nextNode()):((ae.isFF()||ae.isIE()||ae.isEdge())&&t.zIndex<0&&"static"==t.position&&(n=parseInt(t.zIndex)+1),r=i.nextSibling()||i.nextNode()):r=i.nextSibling()||i.nextNode();if(n!==Number.MAX_VALUE)this.minContainer.style.zIndex=n;else{var o=getComputedStyle(this.elementToReplace).zIndex;this.minContainer.style.zIndex=isNaN(o)?0:o}this.minuteLinkElm.style.zIndex=this.minContainer.style.zIndex>=0?this.minContainer.style.zIndex:0}},t.prototype.insertContainerToDOM=function(){
"A"==this.elementToReplace.tagName?this.elementToReplace.insertAdjacentElement("beforeend",this.minContainer):this.elementToReplace.insertAdjacentElement("afterend",this.minContainer),this.dispatchReadyEvent()},t.prototype.getOriginalUrl=function(){var e,t=this.elementToReplace.currentSrc||this.elementToReplace.src||this.elementToReplace.srcset,n=this.elementToReplace.src?"src":"srcset";if(!t){var i=this.elementToReplace.parentElement;"PICTURE"===i.tagName?(e=i.querySelector("source[src], source[srcset]"),t=e.src||e.getAttribute("srcset").split(" ")[0]):(t=getComputedStyle(this.elementToReplace).backgroundImage.replace(/^url\(['"]?(.+?)['"]?\)/,"$1"),n="backgoundImage")}var r={};return r[a.OriginalSrc.PATH]=t,r[a.OriginalSrc.ATTR]=n,r},t.prototype.dispose=function(){if(this.apvData){if(this.removeAllEventListener(),l.isSupportIntersectionObserver()||(h.removeEventListener(a.Events.DomWindow.SCROLL,this.dispatchViewportEvent,this),h.removeEventListener(a.Events.DomWindow.RESIZE,this.handleWindowEvent_Resize,this)),h.removeEventListener(a.Events.DomWindow.VISIBILITY_CHANGE,this.dispatchViewportEvent,this),h.removeEventListener(a.Events.DomWindow.BLUR,this.dispatchViewportEvent,this),h.removeEventListener(a.Events.DomWindow.ORIENTATION_CHANGE,this.dispatchViewportEvent,this),h.removeEventListener(a.Events.DomWindow.SAFARI_FOCUS,this.handleWindowEvent_SafariFocus,this),this.apvPlayer.removeEventListener(a.Events.Players.PLAYING,this.showApv,this),ae.isSafari()||this.apvPlayer.setStyles({opacity:0}),this.apvPlayer.dispose(),this.apvPlayer=null,this._debounceCarousel&&(this._debounceCarousel.kill(),this._debounceCarousel=null),this._debouncer&&(this._debouncer.kill(),this._debouncer=null),this._observerAttrChange&&this._observerAttrChange.length>0)for(var e=0;e<this._observerAttrChange.length;e++){var t=this._observerAttrChange[e];t.disconnect(),t=null}this._observerAttrChange=null,this.elementToReplace=null,this.elementSize=null,this._videoWrapper&&(this._videoWrapper.parentElement&&this._videoWrapper.parentElement.removeChild(this._videoWrapper),this._videoWrapper=null),this.minuteLinkElm&&(this.minuteLinkElm.parentElement&&this.minuteLinkElm.parentElement.removeChild(this.minuteLinkElm),this.minuteLinkElm.removeEventListener("click",this._handleMinuteLinkClick),this.minuteLinkElm=null,this._handleMinuteLinkClick=null),this._intersectionObserver&&(this._intersectionObserver.disconnect(),this._intersectionObserver=null),this.minuteLink=null,this.articleData=null,this.minContainer.apvData=null,this.minContainer=null,this.apvData=null,this.hasDisposed=!0}},t.prototype.setElementToObserve=function(){this.startObserveAttrChange(this.apvData.getViewportObserver())},t.prototype.isElementToReplaceVisibleValid=function(){return this.elementSize!=this.elementToReplace?!!this.elementToReplace&&!!this.elementToReplace.offsetParent||!!this.elementSize&&!!this.elementSize.offsetParent:!!this.elementToReplace&&!!this.elementToReplace.offsetParent},t.prototype.handleWindowEvent_Resize=function(e){var t=e.data;t&&this.dispatchViewportEvent()},t.prototype.setLoopPlay=function(){this.apvPlayer.setElementAttribute("loop","")},t.prototype.showApv=function(){pe.isTestGroup()||(this.minContainer.style.opacity=1)},t.prototype.hideApv=function(){this.minContainer.style.opacity=0},t.prototype.isElementVisible=function(){return A.isElementVisible(this.minContainer,this.apvData.getViewportMaskElement())},t.prototype.getElementVisiblePercents=function(){return A.getElementVisiblePercents(this.elementSize,this.apvData.getViewportMaskElement())},t.prototype.dispatchViewportEvent=function(){if(this.apvData){var e=this.getElementVisiblePercents();this._reportViewportPercentage(e)}},t.prototype._reportViewportPercentage=function(t){var n=t>=he.getViewportPercentage();this._updateVisible(n),e.debugParams[m.DEBUG_VISIBILITY]&&l.log("Regular APV "+this.apvData.getHighlightId()+" visibility: "+t),this.dispatchEvent(a.Events.Element.ANALYTICS_VISIBLE,{apvData:this.apvData,percentsVisible:t})},t.prototype._updateVisible=function(e){return this.dispatchEvent(e?a.Events.Element.VISIBLE:a.Events.Element.NON_VISIBLE,{articleData:this.articleData,apvData:this.apvData}),e},t.prototype.dispatchReadyEvent=function(){this.dispatchEvent(a.Events.Element.READY,{apvData:this.apvData}),l.isSupportIntersectionObserver()?this.initInterObserver():this.dispatchViewportEvent()},t.prototype.initInterObserver=function(){var e=this,t={root:null,threshold:[0,.01,.5,1]};this._intersectionObserver=new IntersectionObserver(function(t){e._reportViewportPercentage(100*t[0].intersectionRatio)},t),this._intersectionObserver.observe(this.apvData._elementSize)},t.prototype.play=function(){this.apvPlayer&&this.apvPlayer.play()},t.prototype.pause=function(){this.apvPlayer&&this.apvPlayer.pause()},t.prototype.attachWindowEvents=function(){l.isSupportIntersectionObserver()||(h.addEventListener(a.Events.DomWindow.SCROLL,this.dispatchViewportEvent,this),h.addEventListener(a.Events.DomWindow.RESIZE,this.handleWindowEvent_Resize,this)),h.addEventListener(a.Events.DomWindow.ORIENTATION_CHANGE,this.dispatchViewportEvent,this),h.addEventListener(a.Events.DomWindow.VISIBILITY_CHANGE,this.dispatchViewportEvent,this)},t.prototype.handleCarouselDebounceCallback=function(){this.dispatchEvent(a.Events.Element.MUTANT,{articleData:this.articleData,apvData:this.apvData})},t.prototype.startObserveAttrChange=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(!n)return;var i={attributes:!0,characterData:!0,childList:!0},r=this;this._debounceCarousel=new s.utils.Debounce(250,this.handleCarouselDebounceCallback,this);var o=he.getViewportMaskEchoTime(),a=he.getViewportMaskEchoRepeat();o&&a&&this._debounceCarousel.setEcho(o,a),this._observerAttrChange;var l=new MutationObserver(function(e){r._debounceCarousel.start()});n&&l.observe(n,i),this._observerAttrChange.push(l)}},t.prototype.createLogoElement=function(){return this.minuteLinkElm=this.minuteLink.getLogoElement(),ae.isMobile()?void(this.minuteLinkElm.style.pointerEvents="none"):(this._handleMinuteLinkClick=this.handleMinuteLinkClick.bind(this),void this.minuteLinkElm.addEventListener("click",this._handleMinuteLinkClick))},t.prototype.handleMinuteLinkClick=function(e){e.preventDefault(),e.stopImmediatePropagation();var t=window.open("http://minute.ly","_blank");return window.open(this.apvData.getRawAnchorValue(),"_self"),t&&t.focus(),this.dispatchEvent(a.Events.APV_LOGO_CLICK,{articleData:this.articleData,apvData:this.apvData}),!1},t.prototype.getBoundingClientRect=function(){return this.minContainer.getBoundingClientRect()},t.prototype.handleWindowEvent_SafariFocus=function(){l.log("hack for fixing render issue on safari mobile such as 4496"),this.minContainer.style.display="none"},t.prototype.getListOfCopyableStyles=function(){return i}}()),function(){function e(){e.__superCtor__.call(this)}s.apv=s.apv||{},s.apv.domAdapter=s.apv.domAdapter||{};var t=s.apv.domAdapter;t.pubDomAdapter=e,l["extends"](e,s.apv.domAdapter.Base),e.getTypeName=function(){return"nascar"},e.prototype._updateVisible=function(t){e.__super__._updateVisible.call(this,t);var n=getComputedStyle(this.apvData.getContainerElement());this.minContainer.style["max-width"]=n.width},e.prototype.render=function(e){if(null!=this.elementToReplace){var t=this.elementToReplace.offsetParent;if(this.elementSize!==this.elementToReplace&&(t=this.elementSize.offsetParent),t){this.minContainer.style.display="flex";var n=getComputedStyle(this.elementSize),i=this.elementSize.getBoundingClientRect(),r=t.getBoundingClientRect();this.minContainer.style.width=n.width,this.minContainer.style.height=n.height,this.isIE&&(this.minContainer.style.height=""+(parseInt(n.height)+parseInt(n.paddingTop)+parseInt(n.paddingBottom))+"px");var o=0;t===document.body&&(o=window.pageYOffset+t.getBoundingClientRect().top);var a=o+i.top-r.top-parseFloat(e.top);if(1==a&&(a=0),this.minContainer.style.top=a+"px","rtl"==n.direction)this.minContainer.style.right=r.right-i.right+e.right+"px";else{var s=ae.isMobile()?"auto":i.left-r.left-parseFloat(e.left);1!=s&&"auto"!=s||(s=0),this.minContainer.style.left=s+"px"}ae.isMobile()&&(s=i.left-r.left-parseFloat(e.left),1!=s&&"auto"!=s||(s=0),this.minContainer.style.left=s+"px",this.minuteLinkElm.style.paddingTop="0%",this.minuteLinkElm.style.padding="0%"),this.minuteLinkElm.style.paddingTop=this.minuteLinkElm.offsetWidth+"px"}}},e.prototype.applyZIndexForAbsoluteElements=function(){this.minuteLinkElm.style.zIndex=0}}(),function(){function e(){e.__superCtor__.call(this),this.apvData=null,this.domAdapter=null,this.apvPlayer=null,this.articleData=null}s.apv=s.apv||{},s.apv.playmodes=s.apv.playmodes||{},s.apv.playmodes.Base=e,l["extends"](e,o),e.prototype.setDomAdapter=function(e){this.apvData=e,this.domAdapter=this.apvData.getDomAdapter(),this.apvPlayer=this.apvData.getApvPlayer(),this.articleData=this.apvData.getArticleData()},e.prototype.start=function(){}}(),function(){function e(){e.__superCtor__.call(this)}s.apv.playmodes.AndroidCharmerViewport=e,l["extends"](e,s.apv.playmodes.Base),e.prototype.start=function(){e.__super__.start.call(this);var t=this;this.apvPlayer.setAutoplay(),this.apvPlayer.addEventListener(a.Events.Players.LOADED,function(){t.domAdapter.isElementVisible()?t.domAdapter.play():t.domAdapter.pause()}),this.domAdapter.addEventListener(a.Events.Element.VISIBLE,function(){t.domAdapter.play()}),this.domAdapter.addEventListener(a.Events.Element.NON_VISIBLE,function(){t.domAdapter.pause()}),this.domAdapter.addEventListener(a.Events.Element.MUTANT,function(e){setTimeout(function(){t.domAdapter.dispatchViewportEvent()},10)})}}(),function(){function e(){e.__superCtor__.call(this)}s.apv.playmodes.iOSCharmerViewport=e,l["extends"](e,s.apv.playmodes.Base),e.prototype.start=function(){e.__super__.start.call(this);var t=this;this.apvPlayer.setAutoplay(),this.apvPlayer.forcePlay(),this.domAdapter.addEventListener(a.Events.Element.VISIBLE,function(){t.domAdapter.play()}),this.domAdapter.addEventListener(a.Events.Element.NON_VISIBLE,function(){t.domAdapter.pause()}),this.domAdapter.addEventListener(a.Events.Element.MUTANT,function(e){setTimeout(function(){t.domAdapter.dispatchViewportEvent()},10)})}}(),function(){function e(){e.__superCtor__.call(this)}s.apv.playmodes.Viewport=e,l["extends"](e,s.apv.playmodes.Base),e.prototype.start=function(){e.__super__.start.call(this);var t=this;this.apvPlayer.addEventListener(a.Events.Players.LOADED,function(){t.domAdapter.isElementVisible()?t.domAdapter.play():t.domAdapter.pause()}),this.domAdapter.addEventListener(a.Events.Element.VISIBLE,function(){t.domAdapter.play()}),this.domAdapter.addEventListener(a.Events.Element.NON_VISIBLE,function(){t.domAdapter.pause()}),this.domAdapter.addEventListener(a.Events.Element.MUTANT,function(e){setTimeout(function(){t.domAdapter.dispatchViewportEvent()},10)})}}(),function(){function e(){e.__superCtor__.call(this)}s.apv.playmodes.TestGroup=e,l["extends"](e,s.apv.playmodes.Base),e.prototype.start=function(){e.__super__.start.call(this);var t=this;this.domAdapter.addEventListener(a.Events.Element.MUTANT,function(e){setTimeout(function(){t.domAdapter.dispatchViewportEvent()},10)})}}();var Q=function(){function e(e){this._containerUnique=l.generateShortUnique(),this._articleData=e.articleData,this._uuid=l.generateUnique(),this._product=e.product,this._key=""+this.getHighlightId(this._product),this._keyProduct=this._key+"_"+this._product,this._name=e.name,this._debug=null,this._state=a.APVStates.New,this._isLazy=e.isLazy,this._apvPlayer=null,this._domAdapter=null,this._minuteLogo=null,this._playerInstance=null,this._watcher=null,this._elementToReplace=e.elmToReplace,this._elementSize=e.elementSize,this._attrValue=e.attrValue,this._manualClick=null,this._rawAnchorValue=e.rawUrl,this._clickElements=[],this._viewportMask=e.viewportMaskElement,"undefined"==typeof this._viewportMask&&l.logError("_viewportMask should always be something!!!"),this._viewportObserver=e.viewportObserver,this._containerElement=null,this._domContainerElementTracker=null,this._domViewportMaskElementTracker=null,this._onDisposed=new s.utils.Signal,this._hasDisposed=!1,this._hasPlayerAssetLoaded=!1,this._belongToUrl=null,this.setContainerElement(e.containerElement),this._shouldSendImpression=!0,this._didImpressionSent=!1,this._isClickRegistered=!1,this._shouldSendClickEvent=!0,this._clickAlreadySent=!1}return e.prototype.setImpressionHasSent=function(){this._didImpressionSent=!0},e.prototype.setShouldSendImpression=function(e){this._shouldSendImpression=e},e.prototype.getShouldSendImpression=function(){return!this.getDidImpressionSent()&&this._shouldSendImpression&&!this.getClickAlreadySent()},e.prototype.getDidImpressionSent=function(){return this._didImpressionSent},e.prototype.setIsClickRegistered=function(e){this._isClickRegistered=e},e.prototype.getIsClickRegistered=function(){return this._isClickRegistered},e.prototype.setShouldSendClickEvent=function(e){this._shouldSendClickEvent=e},e.prototype.getShouldSendClickEvent=function(){return this._shouldSendClickEvent&&!this.getClickAlreadySent()&&this.getDidImpressionSent()},e.prototype.setClickAlreadySent=function(){this._clickAlreadySent=!0},e.prototype.getClickAlreadySent=function(){return this._clickAlreadySent},e.prototype.setClickElements=function(e){this._clickElements=e},e.prototype.getVideoId=function(){return this._articleData&&this._articleData.getPublisherVideoId()},e.prototype.getName=function(){return this._name},e.prototype.setName=function(e){this._name=e},e.prototype.getClickElements=function(){return this._clickElements},e.prototype.setAttributeValue=function(e){this._attrValue=e},e.prototype.setContainerElement=function(e){e&&!this._containerElement&&(this._containerElement=e,this._createElementsTracker(),this._belongToUrl=s.publisher.utils&&s.publisher.utils.getElementUrl&&s.publisher.utils.getElementUrl(this._containerElement))},e.prototype._createElementsTracker=function(){this._domContainerElementTracker=new s.utils.DomElementTracker(this._containerElement),this._domContainerElementTracker.onRemovedFromDom.addOnce(this._onContainerElementRemoved,this),this._domContainerElementTracker.start(),this._viewportMask!==window&&(this._domViewportMaskElementTracker=new s.utils.DomElementTracker(this._viewportMask),this._domViewportMaskElementTracker.onRemovedFromDom.addOnce(this._onContainerElementRemoved,this),this._domViewportMaskElementTracker.start())},e.prototype.getProduct=function(){return this._product},e.prototype.getKey=function(){return this._key},e.prototype.getKeyProduct=function(){return this._keyProduct},e.prototype.getArticleData=function(){return this._articleData},e.prototype.getElementToReplace=function(){return this._elementToReplace},e.prototype.getElementSize=function(){return this._elementSize},e.prototype.getContainerElement=function(){return this._containerElement},e.prototype.setApvPlayer=function(e){return this._apvPlayer=e,this._apvPlayer},e.prototype.getApvPlayer=function(){return this._apvPlayer},e.prototype.setDomAdapter=function(e){return this._domAdapter=e},e.prototype.getDomAdapter=function(){return this._domAdapter},e.prototype.setMinuteLogo=function(e){return this._minuteLogo=e},e.prototype.getMinuteLogo=function(){return this._minuteLogo},e.prototype.setWatcher=function(e){this._watcher=e},e.prototype.removeWatcher=function(){this._watcher=null},e.prototype.getWatcher=function(){return this._watcher},e.prototype.getBlockingDistance=function(){return he.getBlockingDistanceRadius()},e.prototype.getPosition=function(){var e=this.getRect();return{top:e.top+document.body.scrollTop+parseInt(e.height)/2,left:e.left+document.body.scrollLeft+parseInt(e.width)/2}},e.prototype.getRect=function(){return this._domAdapter?this._domAdapter.getBoundingClientRect():this._elementToReplace.getBoundingClientRect()},e.prototype.setDebug=function(e){this._debug&&this._debug.parentElement.removeChild(this._debug),this._debug=e},e.prototype.getDebug=function(){return this._debug},e.prototype.setState=function(e){l.log("BlockingD: "+this._articleData.getArticleUrl()+" is "+e),this._state=e},e.prototype.getState=function(){return this._state},e.prototype.getViewportMaskElement=function(){return this._viewportMask},e.prototype.setViewportObserver=function(e){this._viewportObserver=e},e.prototype.getViewportObserver=function(){return this._viewportObserver},e.prototype.setPlayerInstance=function(e){this._playerInstance=e},e.prototype.getPlayerInstance=function(){return this._playerInstance},e.prototype.setManualClick=function(e){e.length&&l.logWarning("SetManualClick as array which is not supported at the moment"),this._manualClick=e},e.prototype.getManualClick=function(){return this._manualClick},e.prototype.setIsLazy=function(e){this._isLazy=e},e.prototype.getIsLazy=function(){return this._isLazy},e.prototype.getUniqId=function(){return this._uuid},e.prototype.getRawAnchorValue=function(){return this._rawAnchorValue},e.prototype.getContainerUnique=function(){return this._containerUnique},e.prototype.dispose=function(){if(this._onDisposed){this.disposedHltData=l.cloneObject(ve.getHltByProduct(this._articleData.getHighlights(),this._product)),this.disposedArticleUrl=this._articleData.getArticleUrl(),this._onDisposed.dispatch(this),this._domContainerElementTracker&&(this._domContainerElementTracker.dispose(),this._domContainerElementTracker=null),this._domViewportMaskElementTracker&&(this._domViewportMaskElementTracker.dispose(),this._domViewportMaskElementTracker=null),this._domAdapter&&(this._domAdapter.dispose(),this._domAdapter=null),this._articleData=null,this._apvPlayer=null,this._elementToReplace=null,this._elementSize=null,this._attrValue=null,this._viewportMask=null,this._viewportObserver=null,this._containerElement=null,this._onDisposed.removeAll(),this._onDisposed=null,this._hasDisposed=!0,this._minuteLogo=null,this._watcher=null,this._manualClick=null,this._clickElements=null,l.log("APV data has been disposed");var e=this;setTimeout(function(){e.disposedHltData=null,e.disposedArticleUrl=null},3e3)}},e.prototype.hasDisposed=function(){return this._hasDisposed},e.prototype.onDisposed=function(){return this._onDisposed},e.prototype._onContainerElementRemoved=function(){this.dispose()},e.prototype.getBelongToUrl=function(){return this._belongToUrl},e.prototype.getHighlights=function(){return this._articleData.getHighlights()},e.prototype.getHighlightId=function(){if(this._hasDisposed)return this.disposedHltData.hltId;var e=ve.getHltByProduct(this._articleData.getHighlights(),this._product);return e||l.logError("shouldnt ever get to this point"),e.hltId},e.prototype.getRank=function(){var e=ve.getHltByProduct(this._articleData.getHighlights(),this._product);return e||l.logError("BlockingD: shouldnt ever get to this point"),e.rank},e.prototype.getHltAPVUrl=function(){if(this._hasDisposed)return this.disposedHltData.vidUrl;var e=ve.getHltByProduct(this._articleData.getHighlights(),this._product);return e||l.logError("shouldnt ever get to this point"),e.vidUrl},e.prototype.getArticleUrl=function(){return this._hasDisposed?this.disposedArticleUrl:this._articleData.getArticleUrl()},e}();!function(){function e(e){function t(e,t){d.has(e,t)||d.add(e,t)}function n(){return!d||d.getNumListeners()>0}function i(){u&&(p&&(p.disconnect(),p=null),d.removeAll(),d=null,u=null)}function r(){p=new MutationObserver(o),p.observe(u.getElementToReplace(),{attributes:!0});var e=u.getElementToReplace();e.addEventListener?e.addEventListener("load",a):e.attachEvent("onload",a),u.onDisposed().add(i)}function o(e){l.isElementLazyLoad(u.getElementToReplace())===!1&&c()}function a(){if(u){var e=u.getElementToReplace();l.isElementLazyLoad(e)===!1&&c()}}function c(){h>0&&(clearTimeout(h),h=0),l.isElementHasSize(u.getElementToReplace())?(s.utils.ApvElementUtils.removeIsElementWatched(u.getElementToReplace()),d.dispatch(u)):h=setTimeout(c,50)}var u=e,d=new s.utils.Signal,p=null,h=0;return r(),{addListener:t,isWatched:n,dispose:i}}s.apv=s.apv||{},s.apv.LazyLoadWatcher=e}(),function(){function e(){this._usedApvDataList={},this._isRequestDisposedUpdate=!1,this._clickSentApv={},this._usedArticleDataList={},this._alreadySentImpression={}}e.prototype.isArticleDataAlreadyOnPage=function(e){var t=ve.getHltByProduct(e.getHighlights(),a.Emitter.PRODUCT_IN_ARTICLE);return!!this._usedArticleDataList[t.hltId.toString()]},e.prototype.isAPVAlreadyExists=function(e){if(this._usedApvDataList[e.getContainerUnique()])return!0;for(var t=Object.keys(this._usedApvDataList),n=0;n<t.length;n++)if(t[n]===e.getContainerElement()||this._usedApvDataList[t[n]]._containerElement===e.getContainerElement())return!0;return!1},e.prototype.add=function(e,t){if(e.hasDisposed())return!1;if(this.isAPVAlreadyExists(e))return!1;var n=this;this._usedApvDataList[e.getContainerUnique()]=e,"undefined"==typeof e.getHighlightId()&&l.logWarning("apvData with no highlight, make sure we have highlight in 'InArticlePlacer'");var i=e.getHighlightId().toString();return this._usedArticleDataList[i]=e,e.onDisposed().add(function(e){n.remove(e)}),this._alreadySentImpression[e.getKeyProduct()]&&this.setImpressionSent(e),this._clickSentApv[e.getKeyProduct()]&&e.setClickAlreadySent(),!0},e.prototype.remove=function(e){var t=e.getContainerUnique();this._usedApvDataList[t]&&delete this._usedApvDataList[t];var n=e.getHighlightId().toString();this._usedArticleDataList[n]&&delete this._usedArticleDataList[n],this._isRequestDisposedUpdate||(this._isRequestDisposedUpdate=!0,l.getRequestAnimationFrame(this.sendApvDisposedEvent.bind(this)))},e.prototype.sendApvDisposedEvent=function(){this._isRequestDisposedUpdate=!1,h.dispatchEvent(a.Events.APV_DISPOSED)},e.prototype.getApvDataByKeyProduct=function(e,t){var n=this._getAllApvDataByKeyProduct(e,t);return n.length>0?n[0]:null},e.prototype.getApvDataByVideoIdHrefAndProduct=function(e,t,n){for(var i=Object.keys(this._usedApvDataList),r=[],o=0;o<i.length;o++){var a=this._usedApvDataList[i[o]];a.getVideoId()===e&&a.getArticleData().getArticleUrl()===t&&a.getProduct()===n&&r.push(a)}return r.length>0?r[0]:null},e.prototype.setClickAlreadySent=function(e){e&&e.setClickAlreadySent();for(var t=this._getAllApvDataByKeyProduct(e.getHighlightId(),e.getProduct()),n=0;n<t.length;n++){var i=t[n];i!==e&&i.setClickAlreadySent()}this._clickSentApv[e.getKeyProduct()]=!0},e.prototype.setImpressionSent=function(e){this._alreadySentImpression[e.getKeyProduct()]=!0;for(var t=this._getAllApvDataByKeyProduct(e.getHighlightId(),e.getProduct()),n=0;n<t.length;n++){var i=t[n];i.setImpressionHasSent()}},e.prototype.setShouldSendImpClickForApvData=function(e,t){e.setShouldSendImpression(t),e.getDidImpressionSent()||e.setShouldSendClickEvent(t)},e.prototype.setIsClickRegistered=function(e,t){e.setIsClickRegistered(t)},e.prototype.getShouldSendClickEvent=function(e){return!(!e||!e.getShouldSendClickEvent())},e.prototype.getIsClickRegistered=function(e){return e.getIsClickRegistered()},e.prototype.getShouldSendImpression=function(e){return e.getShouldSendImpression()},e.prototype.getAllActiveApv=function(){for(var e=Object.keys(this._usedApvDataList),t=[],n=0;n<e.length;n++){var i=this._usedApvDataList[e[n]];i.getState()===a.APVStates.Active&&t.push(i)}return t},e.prototype._getAllApvDataByKeyProduct=function(e,t){for(var n=Object.keys(this._usedApvDataList),i=[],r=0;r<n.length;r++){var o=this._usedApvDataList[n[r]];o.getHighlightId()===e&&o.getProduct()===t&&i.push(o)}return i},e.prototype.getAmountOfApvDataOnPage=function(){return Object.keys(this._usedApvDataList).length},e.prototype.create=function(e){var t=new Q(e),n=this.add(t,e.product);if(n)return t},e.prototype.setShouldSendClickEvent=function(e,t){e.setShouldSendClickEvent(t)},s.ApvDataManager=e}(),function(){function e(e){t=e,h.addEventListener(a.Events.LOAD_MORE_FOUND,this.loadMoreHandler,this)}var t;e.prototype.init=function(){this.markPlaces();setInterval(function(){this.markPlaces()}.bind(this),1e3)},e.prototype.loadMoreHandler=function(e){this.markPlaces(),e&&e.data&&"NFL"==e.data.origin||h.dispatchEvent(a.Events.FORCE_FIND_ELMS)},e.prototype.markPlaces=function(){for(var e,t=!1,n=Se.getAllPlacements(),i=0;i<n.length;i++){e=n[i];for(var r=e.getContainerSelector().split(","),o=0;o<r.length;o++)r[o]+=":not([data-min-enable])";var s=r.join(),l=document.querySelectorAll(s);if(0!==l.length){for(var c=0;c<l.length;c++){var u=l[c];if(u.setAttribute(a.integrationDataSet.ENABLE,e.getName()||"true"),t=!0,"a"!==e.getAnchorSelector()){var d=u.querySelector(e.getAnchorSelector());d&&d.setAttribute(a.integrationDataSet.ANCHOR,"true"),"CONTAINER"===e.getAnchorSelector()&&u.setAttribute(a.integrationDataSet.ANCHOR,"true")}if("img"!==e.getPreviewSelector()){var p=u.querySelector(e.getPreviewSelector());p&&p.setAttribute(a.integrationDataSet.PREVIEW,"true")}if("undefined"!=typeof e.getSizeSelector()&&""!==e.getSizeSelector()){var g=u.querySelector(e.getSizeSelector());g&&g.setAttribute(a.integrationDataSet.SIZE,"true"),"CONTAINER"===e.getSizeSelector()&&u.setAttribute(a.integrationDataSet.SIZE,"true")}}if(e.getViewportObserverSelector())for(var f=document.querySelectorAll(e.getViewportObserverSelector()),o=0;o<f.length;o++){var v=f[o];v.setAttribute(a.integrationDataSet.VIEWPORT_OBSERVER,"true")}if(e.getViewportMaskSelector())for(var m=document.querySelectorAll(e.getViewportMaskSelector()),o=0;o<m.length;o++){var v=m[o];v.setAttribute(a.integrationDataSet.VIEWPORT_MASK,"true")}}}t&&(h.dispatchEvent(a.Events.FORCE_FIND_ELMS),t=!1)},s.services=s.services||{},s.services.Simulation=e}(),function(){function e(r,o,a){e.__superCtor__.call(this),!t&&(t=r),!n&&(n=o),!i&&(i=a),this.videosManagerCount=0,this._apvDataCounter=0}var t,n,i,r=s.utils.ApvElementUtils;l["extends"](e,o),e.prototype.checkForArticleData=function(e){return be.isArticleDataAlreadyOnPage(e)},e.prototype.createData=function(e){e.product=a.Emitter.PRODUCT_APV;var t=n.create(e);if(t){var i=[],r=[];if(s.publisher.utils&&s.publisher.utils.getAdditionalClickElements&&(r=s.publisher.utils.getAdditionalClickElements(e)),e.containerElement===e.anchorElement)l.log("Relative Selectors no anchor was set -> container equals to anchor"),i=[t.getContainerElement()];else{var o=t.getContainerElement(),c="["+e.attributeName+"*='"+e.attrValue+"']",u="["+e.attributeName+"*='"+encodeURIComponent(e.attrValue)+"']",d=o.querySelectorAll(c+","+u);i=Array.prototype.slice.call(d)}return i=i.concat(r),t.setClickElements(i),t}},e.prototype.filterHiddenElements=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];i.offsetParent&&t.push(i)}return t},e.prototype.setPotentialObserver=function(e){var t=this;e.observer=new MutationObserver(function(n){n.forEach(function(){var n=t.retrieveDomElements(e);if(n){if(!i.isElementToReplaceValid(n.elmToReplace,n.elementSize))return;r.setElementAsWatched(n.elmToReplace),l.extendObject(e,n);var o=t.createData(e);if(!o)return;t.dispatchEvent(a.Events.NEW_VIDEO_DATE,[o]),e.observer.disconnect()}})}),e.observer.observe(e.containerElement,{attributes:!0,subtree:!0,childList:!0})},e.prototype.retrieveDomElements=function(e){var t={};if(t.elmToReplace=this.getElementToReplace(e),t.elementSize=this.getElementSize(e)||t.elmToReplace,!t.elmToReplace||!i.isElementToReplaceValid(t.elmToReplace,t.elementSize))return e.observer||this.setPotentialObserver(e),null;if(t.isLazy=i.isElementLazyLoad(t.elmToReplace),t.isLazy&&!e.observer){if(r.getIsElementWatched(t.elmToReplace))return null;r.setElementAsWatched(t.elmToReplace)}else if(r.getIsElementReplaced(t.elmToReplace))return null;return t.viewportMaskElement=this.getViewportMaskElement(e,t.elmToReplace),t.viewportObserver=this.getViewportObserver(e,t.elmToReplace),t.name=this._generateName(e),t},e.prototype.getApvDataByContainer=function(e){var t=this.checkForArticleData(e);if(t){l.extendObject(e,t);var n=this.retrieveDomElements(e);if(n)return r.setElementAsProcessed(n.elmToReplace),l.extendObject(e,n),this.createData(e)}},e.prototype.getViewportMaskElement=function(e,t){var n=document.querySelectorAll("["+a.integrationDataSet.VIEWPORT_MASK+"]");if(n){for(var i=0;i<n.length;i++){var r=n[i];if(r.contains(t))return r}return window}return window},e.prototype.getViewportObserver=function(e,t){var n=[],i=document.querySelectorAll("["+a.integrationDataSet.VIEWPORT_OBSERVER+"]");if(i)for(var r=0;r<i.length;r++){var o=i[r];o.contains(t)&&n.push(o)}return n},e.prototype.getNewApvData=function(){var e=[],t=this.getContainers();if(0!==t.length){for(var n=0;n<t.length;n++){var i=this.getApvDataByContainer({containerElement:t[n]});i&&e.push(i)}return e}},e.prototype.getContainers=function(){var e=document.querySelectorAll("["+a.integrationDataSet.ENABLE+"]");return 0===e.length?[]:e},s.services=s.services||{},s.services.VideoGenerator=s.services.VideoGenerator||{},s.services.VideoGenerator.Base=e}(),function(){function e(r,o,a){e.__superCtor__.call(this,r,o,a),!t&&(t=r),!n&&(n=o),!i&&(i=a),this.anchorWarned=!1,this.previewWarned=!1}var t,n,i;l["extends"](e,s.services.VideoGenerator.Base),e.prototype._getAricleData=function(e){for(var t,n,i,r=e.attributes,o=0;o<r.length;o++)if(i=r[o].name,n=e.getAttribute(i),t=me.getRegularArticleDataByURL(l.urls.getCanonicalURL(n)))return{attributeName:i,targetUrl:n,articleData:t};return null},e.prototype._getAnchorElement=function(e){var t=e.containerElement;if(t.dataset.minAnchor)return t;var n=e.containerElement.querySelector("["+a.integrationDataSet.ANCHOR+"]");if(!n){var i=e.containerElement.querySelectorAll("a");n=i[0],i.length>1&&!this.anchorWarned&&(this.anchorWarned=!0),0!==i.length||this.anchorWarned||(this.anchorWarned=!0),n||"A"!==e.containerElement.tagName||(n=e.containerElement)}return n},e.prototype.checkForArticleData=function(e){var t=this._getAnchorElement(e);if(!t)return null;var n=this._getAricleData(t);if(!n||l.isObjEmpty(n))return null;var i=n.articleData;return i&&i.hasAPVByProduct(a.Emitter.PRODUCT_APV)?{anchorElement:t,attributeName:n.attributeName,attrValue:l.urls.getCanonicalURL(n.targetUrl),rawUrl:l.urls.getRawByUrl(n.targetUrl),articleData:i}:null},e.prototype.getElementToReplace=function(e){var t=e.containerElement;if(t.dataset.minPreview)return t;var n=t.querySelector("["+a.integrationDataSet.PREVIEW+"]");if(!n){var i=t.querySelectorAll("img");if(i.length>=1){i.length>1&&!this.previewWarned&&(this.previewWarned=!0);for(var r=0;r<i.length;r++)if("none"!==getComputedStyle(i[r]).display&&"none"!=i[r].offsetParent){n=i[r];break}}if(!n)return this.previewWarned=!0,null}return n},e.prototype.getElementSize=function(e){return e.containerElement.dataset.minSize?e.containerElement:e.containerElement.querySelector("["+a.integrationDataSet.SIZE+"]")},e.prototype._generateName=function(e){var t="true",n=e.containerElement;return t="true"!==n.getAttribute(a.integrationDataSet.ENABLE)&&""!==n.getAttribute(a.integrationDataSet.ENABLE)?n.getAttribute(a.integrationDataSet.ENABLE):n.offsetWidth+"X"+n.offsetHeight},s.services=s.services||{},s.services.VideoGenerator=s.services.VideoGenerator||{},s.services.VideoGenerator.Integrated=e}(),function(){function e(e){this.elm=e}function t(e){this._blockersContainers=[],this.painter=e}s.services=s.services||{},s.services.BlockingDistance=s.services.BlockingDistance||{},s.services.BlockingDistance.StaticBlockerService=t,e.prototype.getRact=function(){return this.elm.getBoundingClientRect()},e.prototype.getPosition=function(){var e=this.getRact();return{top:e.top+document.body.scrollTop+parseInt(e.height)/2,left:e.left+document.body.scrollLeft+parseInt(e.width)/2}},e.prototype.getRank=function(){return 999},e.prototype.getBlockingDistance=function(){return he.getBlockingDistanceRadius()},t.prototype.isStaticAlreadyMarked=function(e){for(var t=0;t<this._blockersContainers.length;t++){var n=this._blockersContainers[t];if(n.elm&&n.elm==e)return!0}return!1},t.prototype.getBlockers=function(){for(var t=he.getStaticBlockerSelector(),n=document.querySelectorAll(t),i=0;i<n.length;i++){var r=n[i];if(!this.isStaticAlreadyMarked(r)){
var o=new e(r);o&&(this.painter.draw.drawStatic(o),this._blockersContainers.push(o))}}return this._blockersContainers}}(),function(){function e(e){function t(){var t=localStorage&&localStorage.getItem("_minDisableBlockingD");if(e.isBlockingDistanceEnabled()&&!t){var n=new s.services.BlockingDistance.DocumentRadiusPainterFactory(e).create();return new s.services.BlockingDistance.BlockingDistanceService(e,n)}return new s.services.BlockingDistance.NotActivatedBlockingDistance}return{create:t}}s.services=s.services||{},s.services.BlockingDistance=s.services.BlockingDistance||{},s.services.BlockingDistance.Factory=e}(),function(){function e(e,t){o=t,d=new s.services.BlockingDistance.StaticBlockerService(t)}function t(e,t){return t.getRank()-e.getRank()}function n(e,t){var n=Math.pow(e.top-t.top,2),i=Math.pow(e.left-t.left,2);return Math.sqrt(i+n)}function i(e,t){for(var i,r=he.isPlacementsDebugEnabled(),o=0;o<t.length;o++){var s=t[o];if(e.getUniqId()!==s.getUniqId()&&s.getState()!==a.APVStates.Blocked&&s.getState()!==a.APVStates.Disabled&&s.getState()!==a.APVStates.New&&(i=n(e.getPosition(),s.getPosition()),i<s.getBlockingDistance())){if(r){var u=s.getArticleData().getArticleId(),d=s.getArticleData().getArticleUrl(),p=e.getArticleData().getArticleUrl();l.log("BlockingD: ID: "+u+" with URL: "+d+" is blocking "+p)}var h=e.getElementToReplace();c.indexOf(h)===-1&&c.push(h);var g={url:l.urls.getLocationUrl(),user_agent:navigator.userAgent,source:ae.getAnalyticsSource(),publisher:he.getPublisherIdNumber(),category:"BlockingD",action:"blocked",label:p,value:e.getHighlightId()};return le.send(a.Emitter.CUSTOM_EVENTS,g),!0}}return!1}function r(e){for(var t,i,r=he.isPlacementsDebugEnabled(),o=0;i=u[o];o++)if(t=n(e.getPosition(),i.getPosition()),t<i.getBlockingDistance()){if(r){var s=e.getArticleData().getArticleUrl();l.log("BlockingD: "+s+" by a static container ")}var d=e.getElementToReplace();c.indexOf(d)===-1&&c.push(d);var p={url:l.urls.getLocationUrl(),user_agent:navigator.userAgent,source:ae.getAnalyticsSource(),publisher:he.getPublisherIdNumber(),category:"BlockingD",action:"blockedByStatic",label:s,value:e.getHighlightId()};return le.send(a.Emitter.CUSTOM_EVENTS,p),!0}return!1}s.services=s.services||{},s.services.BlockingDistance=s.services.BlockingDistance||{},s.services.BlockingDistance.BlockingDistanceService=e;var o=null,c=[],u=[],d=null;e.prototype.calculate=function(e){u=d.getBlockers();for(var n=be.getAllActiveApv(),s=e.sort(t),l=n.concat(e).sort(t),c=0;c<s.length;c++){var p=s[c],h=a.APVStates.Active;(r(p)||i(p,l))&&(h=a.APVStates.Blocked),p.setState(h)}o.draw.draw(n.concat(e))}}(),function(){function e(){this.state=t.SCROLLED}var t={INIT:0,NOT_SCROLLED:1,SCROLLED:2},n=function(n){this.viewportMaskElement=n,this.mutationObserver=new MutationObserver(e.bind(this)),this.mutationObserver.observe(this.viewportMaskElement,{attributes:!0}),this.state=t.INIT};n.prototype.isCarouselBlocking=function(){return this.state===t.SCROLLED},n.prototype.getViewportMaskElement=function(){return this.viewportMaskElement},s.apv=s.apv||{},s.apv.CarouselContainer=n}(),function(){function e(e){return{create:function(){var t=e.isPlacementsDebugEnabled()&&!l.isProdEnv()||localStorage&&localStorage.getItem&&"true"==localStorage.getItem("_minShowBD");return{draw:t?i():{draw:function(){},drawStatic:function(){}}}}}}function t(e){e.dataset.old_border=e.style.border,e.dataset.old_boxSizing=e.style.boxSizing,e.dataset.old_opacity=e.style.opacity}function n(e){var t=e.getElementToReplace();t.style.border=t.dataset.old_border,t.style.boxSizing=t.dataset.old_boxSizing,t.style.opacity=t.dataset.old_opacity}function i(){function e(e){var n=e.getElementToReplace();switch(t(n),e.getState()){case a.APVStates.Active:n.style.border="0 solid black",n.style.boxSizing="border-box",n.style.opacity=1;break;case a.APVStates.Blocked:case a.APVStates.Disabled:case a.APVStates.Disposed:n.style.border="13px solid black",n.style.boxSizing="border-box",n.style.opacity=.2,e.getDebug().style.opacity=0}}function i(e){var t=e.getPosition(),n=t.left+window.scrollX,i=t.top+window.scrollY,r=2*e.getBlockingDistance(),o="rgba(255, 0, 0, 0.1)",a=c(i,n,r,o,e);e.getDebug().appendChild(a)}function r(e){var t=document.createElement("div");d.insertAdjacentElement("afterbegin",t),e.setDebug(t)}function o(){for(var t in u){var o=u[t];if(o.hasDisposed())return;n(o),r(o),i(o),e(o)}}function s(e){for(var t=0;t<e.length;t++){var n=e[t],i=n.getUniqId();u[i]||(u[i]=n)}}function l(e){var t=document.createElement("div");d.insertBefore(t,d.childNodes[0]);var n=e.getPosition(),i=n.left+window.scrollX,r=n.top+window.scrollY,o=2*e.getBlockingDistance(),a="rgba(0, 0, 255, 0.1)",s=c(r,i,o,a,e);t.appendChild(s)}function c(e,t,n,i,r){var o=document.createElement("div");return o.className="minPoint",o.style.position="absolute",o.style.width=n+"px",o.style.height=n+"px",o.style.top=e+"px",o.style.left=t+"px",o.style.zIndex=1e7,o.style.backgroundColor=i,o.style.transform="translate(-50%,-50%)",o.style.border="dotted green",o.style.borderRadius="50%",o.style.display="flex",o.style.alignItems="center",o.style.alignContent="center",o.style.justifyContent="center",o.style.textShadow="0 0 10px white",o.style.fontSize="20px",o.style.pointerEvents="none",o.style.textAlign="center",o.innerHTML="radius: "+n+"<br/>rank: "+r.getRank(),o}var u={},d=document.body;return setInterval(o,2e3),{draw:s,drawStatic:l}}s.services=s.services||{},s.services.BlockingDistance=s.services.BlockingDistance||{},s.services.BlockingDistance.DocumentRadiusPainterFactory=e}(),function(){function e(){}s.services=s.services||{},s.services.BlockingDistance=s.services.BlockingDistance||{},s.services.BlockingDistance.NotActivatedBlockingDistance=e,e.prototype.calculate=function(e){e.forEach(function(e){e.setState(a.APVStates.Active)})}}(),function(){function e(e,a,s,l,c){t=e,n=a,i=s,r=l,o=c,this._configPlayer=a.getScraperPlayerById(this.getType())}var t=null,n=null,i=null,r=null,o=null;s.services=s.services||{},s.services.inArticlePlacers=s.services.inArticlePlacers||{},s.services.inArticlePlacers.Base=e,s.services.inArticlePlacers.Placer=e,e.prototype.createInArticleApvWrapper=function(e){if(e){var t=o.add(e);t&&(l.log("APV IN ARTICLE Wrapper will now be created. VideoId: "+e.getArticleData().getArticleId()+', selector: "'+e.getName()+'"'),new s.apv.APVWrapper(e))}},e.prototype.getName=function(){return"InArticle"},e.prototype.getType=function(){l.logError("Have to implement method that returns player type for publisher")},e.prototype.init=function(){this.startAPVFactory(),h.addEventListener(a.Events.PLAYER_FOUND,this.newPlayerFoundHandler.bind(this)),h.addEventListener(a.Events.VIDEOS_UPDATE,this.startAPVFactory.bind(this))},e.prototype.startAPVFactory=function(){var e=this.getPlayersOnPage()||[];e instanceof NodeList&&(e=Array.prototype.slice.call(e));var t=Object.keys(e||{});if(0===t.length)return void this.listenToNewPlayerEvent();for(var n=0;n<t.length;n++)this.createInArticleByPlayer(e[t[n]])},e.prototype.createInArticleByPlayer=function(e){var t=this.collectApvWrapperData(e);this.createInArticleApvWrapper(t)},e.prototype.newPlayerFoundHandler=function(e){},e.prototype.collectApvWrapperData=function(e){if(this.shouldPlayAPV(e)){var t={};t.player=e;var n=this.getArticleData(e);if(n&&n.hasAPVByProduct(a.Emitter.PRODUCT_IN_ARTICLE))return t.articleData=n,this.createApvData(t)}},e.prototype.createApvData=function(e){var n=this.getContainerElement(e);n||t.logWarning("No container found on in article so... ;|  ");var i=new Q({articleData:e.articleData,elementSize:n,containerElement:n,product:a.Emitter.PRODUCT_IN_ARTICLE,viewportMaskElement:this.getInarticleViewportMask(e),viewportObserver:this.getViewportElementsToObserve(e)});return i.setName(this.getName()),this.getManualClick(e.player)&&i.setManualClick(this.getManualClick(e.player)),i.setPlayerInstance(e.player),i},e.prototype.listenToNewPlayerEvent=function(){},e.prototype.getPlayersOnPage=function(){l.logError("Have to implement method that returns all players' instances")},e.prototype.getArticleData=function(){l.logError("getArticleData is not implemented")},e.prototype.shouldPlayAPV=function(e){return!0},e.prototype.getManualClick=function(){return null},e.prototype.getContainerElement=function(e){l.logError("Have to implement method getContainerElement")},e.prototype.getInarticleViewportMask=function(){return he.getInArticleViewportMask()},e.prototype.getViewportElementsToObserve=function(){return[]}}(),function(){function e(e){this.apvData=e,this._initElements(),this.apvData=null}s.apv=s.apv||{},s.apv.APVWrapper=e,e.prototype._createDomAdapter=function(){return this.apvData.getProduct()===a.Emitter.PRODUCT_APV?s.apv.domAdapter.pubDomAdapter?new s.apv.domAdapter.pubDomAdapter:new s.apv.domAdapter.Base:new s.apv.inArticleDomAdapter},e.prototype._createPlaymode=function(){return pe.isTestGroup()?new s.apv.playmodes.TestGroup:ae.isMobile()?this._createPlaymode_Mobile():this._createPlaymode_Desktop()},e.prototype._createPlaymode_Mobile=function(){var e=s.apv.playmodes,t=ae.isSafari(),n=ae.isChrome()&&ae.isAndroid();return t?new e.iOSCharmerViewport:n?new e.AndroidCharmerViewport:void 0},e.prototype._createPlaymode_Desktop=function(){var e=s.apv.playmodes;return new e.Viewport},e.prototype._initElements=function(){var e=new s.apv.players.ApvPlayerBase;e.init(this.apvData),this.apvData.setApvPlayer(e);var t=new s.apv.logos.LogoElmBase;t.init(this.apvData.getProduct()),this.apvData.setMinuteLogo(t);var n=this._createDomAdapter();if(!n)return l.log("No DomAdapter found."),null;this.apvData.setDomAdapter(n),De.register(this.apvData);var i=this._createPlaymode(this.apvData);i.setDomAdapter(this.apvData),i.start(),n.init(this.apvData)}}(),function(){function t(){var e=s.services.VideoGenerator;return e.pubApvData?e.pubApvData:e.Integrated}function n(e){for(var t=l.cloneArray(e.getContainerElement().querySelectorAll("img,div[style*='background-image']")||[]),n=0;n<t.length;n++){var i=t[n];s.utils.ApvElementUtils.setElementAsReplaced(i)}s.utils.ApvElementUtils.setElementAsReplaced(e.getElementToReplace())}function i(e,n,i){r=e,o=n;var s=t(),l=this;c=new s(e,n,i),c.addEventListener(a.Events.NEW_VIDEO_DATE,function(e){l.processApvDataList(e.data)}),this.blockingDistanceService=we.create(r),this._apvWrapperNotCreatedHash={},this._lazyWatcherHash={},this._numOfFoundApvs=0,this._htmlReport=null,this._apvsOnPage=0,this.findReplaceableElementsAndPlaceVideos(),setInterval(function(){this.findReplaceableElementsAndPlaceVideos()}.bind(this),1e3)}s.services=s.services||{};var r=null,o=null,c=null;s.services.PlacementService=i,i.prototype.findReplaceableElementsAndPlaceVideos=function(){var e=c.getNewApvData();this.processApvDataList(e)},i.prototype.processApvDataList=function(e){if(e){var t=this;this.blockingDistanceService.calculate(e),e.forEach(function(e){t._lazyWatcherHash[e.getKey()]===e||t._apvWrapperNotCreatedHash[e.getKey()]||e.hasDisposed()||e.getState()===a.APVStates.Blocked||e.getState()===a.APVStates.Disabled||(e.getIsLazy()&&r.isLazyEnabled()?t.createLazyWatcher(e):t.createApvWrapper(e),e.onDisposed().add(function(e){var n=e.getKey();t._lazyWatcherHash[n]&&delete t._lazyWatcherHash[n]}))}),this.reportCounters()}},i.prototype.createLazyWatcher=function(e){var t=new s.apv.LazyLoadWatcher(e);e.setWatcher(t),t.addListener(this.handleLazyLoadWatcher,this),this._lazyWatcherHash[e.getKey()]=e,l.log("Lazy Load Watcher Created. VideoId: "+e.getArticleData().getArticleId())},i.prototype.deleteLazyWatcher=function(e){var t=e.getWatcher();t.dispose(),e.removeWatcher(),this._lazyWatcherHash[e.getKey()]=null,delete this._lazyWatcherHash[e.getKey()]},i.prototype.createApvWrapper=function(e){return this._apvsOnPage++>=r.getMaxApvsPerPage()?(this._apvWrapperNotCreatedHash[e.getKey()]=!0,void l.log("Blocked APV creation. number of APVs on page exceeds limit. Max="+r.getMaxApvsPerPage())):(new s.apv.APVWrapper(e),n(e),l.log("APV Wrapper Created. VideoId: "+e.getArticleData().getArticleId()),void this.reportCounters())},i.prototype.handleLazyLoadWatcher=function(e){var t=e.getElementToReplace(),n=e.getElementSize();l.isElementToReplaceValid(t,n)&&(this.createApvWrapper(e),this.deleteLazyWatcher(e))},i.prototype.reportCounters=function(){var t=e._report||{APVs:-1,Watchers:-1};if(e._report={APVs:document.querySelectorAll("[data-apv_replaced]").length,NotCreated:Object.keys(this._apvWrapperNotCreatedHash).length,Watchers:document.querySelectorAll("[data-apv_watched]").length},(t.Watchers!==e._report.Watchers||t.NotCreated!==e._report.NotCreated||t.APVs!==e._report.APVs)&&document.body&&document.body.appendChild){this._numOfFoundApvs=e._report.Watchers+e._report.NotCreated+e._report.APVs;var n="# of ApvData: "+o.getAmountOfApvDataOnPage();n+=e._report.NotCreated?" # of Apv not created due to max on page: "+e._report.NotCreated:" ",n+=e._report.Watchers?" # of Apvs that are watched: "+e._report.Watchers:" ",l.log(n),this._htmlReport||(this._htmlReport=document.createElement("div"),this._htmlReport.setAttribute("id","minReport"),this._htmlReport.style.display="none",document.body.appendChild(this._htmlReport)),this._htmlReport.setAttribute("data-apvs",e._report.APVs),this._htmlReport.setAttribute("data-apvs-not-created",e._report.NotCreated),this._htmlReport.setAttribute("data-watchers",e._report.Watchers),this._htmlReport.setAttribute("data-test",pe.isTestGroup())}}}(),l.debugParamsOverrides();var $=null,ee=new I(f),te=new b(ee),ne=P.getInstance(te);ne.setConfig(a.cookiesKeysTable);var ie=new w(localStorage);if($=X.create(l,window.location),$.get($.CONSTS.DISABLE_VERSION)!==e.ver){var re=new _,oe=new L(l,navigator,re),ae=oe.create(l,navigator,re),se=new D(l,ne),le=new t(l,ne,a.Urls),ce=new j(l,ne,se),ue=new C(l,window,ne),de=new G(l,window,se,ee,ue,h,e.debugParams[m.FORCE_TEST],ne),pe=de.create(Y.DAILY),he=new R(e,l,pe),ge=new B(he,se),fe=new N(l,he),ve=new k(l,ie,ae,he),me=new V(l,he,ae,fe,ve),Ee=new W,ye=new i(l,ne,le,Ee),_e=new M,Se=new U(l,_e),Ae=new K(l,pe,ae,he,le,ce),Ie=new x(ae),be=new s.ApvDataManager,De=new s.analytics.ViewportAnalyticsService,Pe=new s.services.Simulation(he),we=new s.services.BlockingDistance.Factory(he),Ce=null,Te=new Z(l,pe,ae,ne,ee,v,se,he,ue),Le=new r(pe);c.utils=c.utils||{},se.init();var Oe=function(){function t(){e.debug===!0?l.consoleNative.log("Welcome to Minute "+e.ver+" "+e.debugParams[E.SCRIPT_HOSTNAME]):l.consoleNative.log("Welcome to Minute")}function n(){l.globalTasks.listenToWindowErrors(),l.log(e.debugParams),t(),o()}function i(){s.publisher&&s.publisher.runSegment&&s.publisher.runSegment()}function r(){i(),Le.dispatchReadyEvent()}function o(){return T=e.config,_min.config=null,ae.init(T.config),ce.init(),he.init(T,ae,u,e.debugParams[m.ENABLE_BLOCKING_DISTANCE]),ve.init(),Le.init(),e.events=Le,ge=new B(he,se),l.isCurrentUrlExcluded(he.getFilterExclude())?void l.logWarning("This page was EXCLUDED by configuration"):(ge.init(),ge.isReferrerManiak()?void l.log("Minute blocked by maniak referrer"):(De.init(),F.init(),c(),r(),le.flushAll(),void h.dispatchEvent(a.Events.SYSTEM_RUNNING)))}function c(){pe.init(he.getTestGroupSize(),!1),s.utils.logger.setTestGroup(pe.isTestGroup()),g(),f()}function d(){p(),C=setTimeout(function(){w=!0,l.log("Minute window load start after timeout."),f()}.bind(this),he.getWindowLoadTimeout())}function p(){C&&clearTimeout(C),C=0}function g(){if(!L){if(L=!0,Ae.init(De),J.sendUrlReport(),!ae.isBrowserSupported())return l.log("Minute is not supported "+e.ver+" "+e.debugParams[E.SCRIPT_HOSTNAME]),void p();if(!te.getLocalStorageInstance())return l.log("Local Storage and Session Storage are not supported. Disable Minute."),void p();Te.start(),me.init(T),b(),ye.init(),q.sendDelayedClicks(),Se.init(he)}}function f(){0===he.getWindowLoadTimeout()&&(w=!0),y()?v():_()===!1&&d()}function v(){A(),I(),S(),P=0}function y(){return!!L&&(_()===!1?(l.log("Minute wait for window load."),!1):(p(),!0))}function _(){return"complete"===document.readyState||"true"===e.debugParams[m.BYPASS_WINDOW_LOAD]||w}function S(){D||(D=new s.scrap.ScraperService,l.log("Detector created"))}function A(){if(!l.isPlacementEnabled(a.Emitter.PRODUCT_IN_ARTICLE))return void l.log("** InArticle placement Disabled by configuration. See filter configuration. **");if(!he.isInArticlePlacerActive())return void l.log("** InArticle is turned off in configuration");var e=new s.services.inArticlePlacers.Placer(l,he,_e,ae,be);e.init()}function I(){return l.isPlacementEnabled(a.Emitter.PRODUCT_APV)?(Pe.init(),Ce=new s.services.PlacementService(he,be,l),!0):(l.log("** Placement Disabled by configuration. See filter configuration. **"),!1)}function b(){if(he.isCheckForMissingDataActive()&&!l.urls.isUrlHomePage()){var e=l.urls.getCurrentCanonicalURL();me.hasInArticleArticleDataForUrl(e)||""==e||Ie.loadNextArticle({onSuccess:me.appendVideos,videosFallback:!1})}}var D=null,P=0,w=!1,C=0,T=null,L=!1;n()};new Oe;return e}}(window._minDebug||_min||{});